{"version":3,"sources":["../../src/extensionSettings.ts","components/user-libraries-components/modals/modals.module.scss","../../../src/localization/index.ts","../../src/logger.ts","components/page/index.tsx","../../src/index.ts","../../src/config.ts","../../../src/components/Panel.tsx","../../../src/components/ButtonsPanelLibrary.tsx","../../../src/components/ButtonsPanelCodeCell.tsx","../../../src/components/OutputPanel.tsx","../../../src/components/ExpanderBox.tsx","../../../src/components/ExpanderBoxIcon.tsx","../../../src/components/ExpanderBoxWrapper.tsx","../../../src/protocol/index.ts","../../../src/protocol/runtime.ts","../../../src/protocol/mockRuntime.ts","../../src/cellSettingsProcessor.ts","../../src/theme.ts","components/user-libraries-components/modals/Editor/index.module.scss","components/user-libraries-components/modals/OutputPanel/index.module.scss","components/user-libraries-components/libraries-list-accordion/libraries-list-accordion.module.scss","azureNotebookLoader.ts","types.ts","lessonData.ts","components/user-libraries-components/modals/ModalTitle.tsx","components/user-libraries-components/modals/DeleteConformation.tsx","components/user-libraries-components/modals/OutputPanel/index.tsx","components/user-libraries-components/modals/Editor/index.tsx","components/checkbox/index.tsx","components/user-libraries-components/libraries-list/librariesListItem.tsx","components/user-libraries-components/libraries-list/index.tsx","components/user-libraries-components/libraries-list-accordion/accordionHeader.tsx","components/user-libraries-components/libraries-list-accordion/index.tsx","components/user-libraries-components/modals/Libraries.tsx","components/user-libraries-components/modals/LibraryName.tsx","components/footer-buttons/index.tsx","utils/tabs.utils.ts","components/tabs/index.tsx","components/notebook/frame.tsx","components/notebook/NotebookViewController.tsx","components/reset-modal/index.tsx","components/notebook/index.tsx","../../src/types.ts"],"names":["module","exports","log","error","PageHeader","className","this","props","children","Component","displayName","PageBody","PageFooter","Page","Header","Body","Footer","context","config","mainFrame","showStatusBar","showCellStatusBar","showCommandBar","showCellBanner","showCellVerticalToolbar","showCellToolbar","enableDragDrop","theme","keyboardShortcuts","shortcutsMode","shortcutsOverrides","codeCell","prompt","showCounter","showExecuteButton","outputs","precedingComponents","editor","showLineNumber","markdownCell","viewOnly","libraryId","e","logger","createLogger","newSettings","AzureNotebookLoader","translations","locale","rootElementId","isInitialized","telemetryLogger","aznbTranslations","loadedNotebook","getIpcTelemetry","MinecraftExtension","setLocStrings","AzureNotebooks","registerExtension","init","resourceUrl","userHasGivenCookieConsent","lazyLoadEditor","getResourceIdAndKey","Promise","resolve","notebookResourceId","notebookResourceKey","then","filepath","disableAutoSave","Error","loadNotebook","parentElementId","filePath","getNotebookStorageOptions","saveAs","content","disableOutputIframe","showSurveyBar","mapLocaleToAznbLocale","extensions","compute","name","targetUrl","getAuthSettings","authType","token","shouldMount","setCompute","targetSettings","kernels","interrupt","dispose","defaultIsLanguageSupported","lang","additionalLanguages","includes","url","bypassCache","a","httpOptions","method","headers","Object","create","mode","fetch","response","LessonData","json","data","decode","_tag","addLessonLibrariesToLocalStore","right","libraries","isLanguageSupported","console","ModalTitle","title","handleOnClose","displayLockIcon","data-testid","type","aria-label","styles","modal_title","data-dismiss","onClick","DeleteConformation","stateSlice","fn","useTranslation","t","translate","useStore","state","deleteLibrary","setCrossCellState","useCallback","diff","currentBaseCodeCellId","attachedLibraryData","kind","displayedModalWindow","Modal","show","onHide","backdrop","size","contentClassName","dialogClassName","modal_dialogClassName","centered","bsPrefix","currentLibraryItem","modal_footer_wrapper","Button","modal_footer_button","id","MPS","OutputPanel","isRunning","output","messagePanelState","message","stateClass","none","running","output_type","ResultMessages","ExecutionSucceeds","success","ExecutionCancelled","warning","evalue","JSON","stringify","panelStateClass","output_message_root__open","output_message_root__closed","output_message_root","output_message_container","EditorModalComponent","aznbLoader","unsubscribe","appStore","getState","handleOnRename","send","action","handleOnSave","hidePanel","setState","panelStatus","handleOnTest","librarySourceEditorOutputPanelData","getAznbTranslations","initialize","libraryPath","index","window","location","href","search","substring","origin","loadComponent","subscribe","modal_dialogClassName_editor","readonly","editor_body","edit_panel_monaco_frame","edit_panel_output_wrapper","edit_panel_results_container_hidden","edit_panel_results_container_shown","edit_panel_close_button","disabled","aria-hidden","edit_panel_buttons","edit_panel_button","React","PureComponent","EditorModal","withTranslation","Checkbox","style","overflow","LibrariesListItemWrapper","item","predefined","data-bold-title","data-controls-deletable","data-controls-no-delete","data-controls-editor","data-controls-readonly","LibrariesListItem","setAttachedLibraries","crossCellState","editOrViewIconClick","onChange","evt","currentTarget","checked","defaultChecked","undefined","listItemStyle","textAlign","LibrariesList","memo","filter","getFilteredLibraries","length","map","key","commonClasses","AccordionHeader","eventKey","callback","accordionKey","toggleAccordionsActiveKey","currentEventKey","useContext","AccordionContext","decoratedOnClick","useAccordionToggle","currentClasses","data-main-editor","getDefaultActiveKey","input","LibrariesListAccordion","accordionsActiveKeys","Accordion","defaultActiveKey","Card","wrapper","Collapse","LibrariesModal","library_list_modal_header","library_list_modal_body","library_list_wrapper","library_list_modal_body_title","library_list_accordion","timestamp","values","activeAznbCellId","update","LibraryName","upsertLibraryName","useState","libraryName","setLibraryName","showDuplicateNameMsg","setShowDuplicateNameMsg","nextState","isOkButtonDisabled","toLowerCase","Form","Group","library_name_input","Control","placeholder","value","target","library_name_warning_wrapper","library_name_warning_line_1","library_name_warning_line_2","find","library","toLocaleLowerCase","trim","FooterButtons","nextButton","previousButton","classes","getElementWidthWithLRMargin","getComputedStyle","Math","ceil","parseFloat","width","marginLeft","marginRight","fillRightSide","remainingWidth","activeTabIndex","itemsWidths","restWidth","navBarEndIndex","fillLeftSide","navBarStartIndex","getRemainingWidth","currentContainerWidths","navigationTabsTotalWidth","getStartThanEndIndexes","currentContainerWidth","elementsWidth","initialRemainingWidth","getEndThanStartIndexes","Tabs","containerRef","createRef","width$","timeout","updateSource","containerWidths","containerPadding","leftButtonWidth","dropdownWidths","rightButtonWidth","itemsTotalWidth","showAllItems","showNavControls","containerIsHidden","tabs","processResizeInfo","onShrink","onExpand","nextWidth","leftRightArrowClickHandler","direction","getAttribute","nextIndex","setElementsLayout","onActivate","activeIndex","onDropdownSelectHandler","_evt","idx","parseInt","dataId","showNavigationTabs","fromEvent","pipe","debounceTime","innerWidth","ref","current","setTimeout","el","itemsCollection","val","push","calculateElementsWidth","setInitialElementsLayout","prevProps","Navbar","variant","Nav","Link","data-id","hidden","active","NavDropdown","onSelect","alignRight","Item","toString","clearTimeout","aznbErrorListener","whyDidYouRender","Frame","rootElement","document","getElementById","addEventListener","warn","activate","notebookUrl","removeEventListener","role","isPagePaths","NotebookViewController","TelemetryProvider","ActiveTabProvider","DisableAutoSave","AzureNoteBookInstance","hasLoaded","tabProps","activeTabPath","bind","onActivateByIndex","readableErrorMessage","errorMsg","localStorage","ipcRenderer","MinecraftCommander","getInstance","MockMinecraftCommander","component","initEvent","components","telemetry","comp","cb","startTime","performance","now","callbackFunctionExecutionResult","timeElapsed","trunc","telemetryComponent","details","getLessonData","disableUserSaves","contentProvider","setContentSaveFlag","setName","creatorName","azureNotebookLoader","load","notebookCount","throwAsyncError","filename","language","params","default","pathEn","rootNotebookPath","pathLoc","tabIndexFunctor","get","lessonJsonPath","activityTracker","activitySelectorObjective","activeTab","path","all","pages","page","pathData","getNotebookPath","notebook","status","metadata","minecraft","page_name","pagePaths","tabIndex","save","getTabPathFromIndex","setContext","customStyles","top","left","bottom","transform","borderColor","backgroundColor","zIndex","setAppElement","ResetModalComponent","resetCallback","isOpen","onClickAccept","stopNotebookCode","nbContentProvider","clear","reload","closeModal","registerResetCallback","unregisterResetCallback","onRequestClose","shouldCloseOnEsc","shouldCloseOnOverlayClick","overlayClassName","aria-labelledby","ResetModal","AzNotebook","AznbbErrorPrefix","AznbbErrorRun","AznbbErrorUnexpected","AznbbReadOnly","AznbbResetCode","AznbbResetWorld","AznbbRun","AznbbRunCancelled","AznbbRunInProcess","AznbbRunSuccessful","AznbbStop","AznbbLibraries","parameters","NotebookContentProvider","GetLessonData","disableLessonDataCache","CodeListenerIds"],"mappings":"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","file":"static/js/az-notebook.4fe8b54d.chunk.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.settings = exports.mapLocaleToAznbLocale = void 0;\nconst core_contract_1 = require(\"@aznb/core-contract\");\nconst core_library_1 = require(\"core-library\");\n/**\n * Convert this locale type to Aznb's Locale enum type\n *\n * @param locale - Extension's locale value\n */\nfunction mapLocaleToAznbLocale(locale) {\n    switch (locale) {\n        case \"zh-CN\":\n            return core_contract_1.Locale.zh_Hans;\n        case \"zh-TW\":\n            return core_contract_1.Locale.zh_Hant;\n        case \"en-GB\":\n        case \"en-US\":\n            return core_contract_1.Locale.en;\n        case \"cs-CZ\":\n            return core_contract_1.Locale.cs;\n        case \"de-DE\":\n            return core_contract_1.Locale.de;\n        case \"es-ES\":\n        case \"es-MX\":\n            return core_contract_1.Locale.es;\n        case \"fr-CA\":\n        case \"fr-FR\":\n            return core_contract_1.Locale.fr;\n        case \"hu-HU\":\n            return core_contract_1.Locale.hu;\n        case \"it-IT\":\n            return core_contract_1.Locale.it;\n        case \"ja-JP\":\n            return core_contract_1.Locale.ja;\n        case \"ko-KR\":\n            return core_contract_1.Locale.ko;\n        case \"nl-NL\":\n            return core_contract_1.Locale.nl;\n        case \"pl-PL\":\n            return core_contract_1.Locale.pl;\n        case \"pt-PT\":\n            return core_contract_1.Locale.pt_PT;\n        case \"pt-BR\":\n            return core_contract_1.Locale.pt_BR;\n        case \"ru-RU\":\n            return core_contract_1.Locale.ru;\n        case \"sv-SE\":\n            return core_contract_1.Locale.sv;\n        case \"tr-TR\":\n            return core_contract_1.Locale.tr;\n        case \"ps-PS\":\n            return core_contract_1.Locale.pseudo;\n        case \"bg-BG\":\n        case \"el-GR\":\n        case \"da-DK\":\n        case \"fi-FI\":\n        case \"id-ID\":\n        case \"nb-NO\":\n        case \"sk-SK\":\n        case \"uk-UA\":\n            return core_contract_1.Locale.en;\n    }\n    return core_library_1.assertUnreachable(locale);\n}\nexports.mapLocaleToAznbLocale = mapLocaleToAznbLocale;\nexports.settings = {\n    logToConsole: true,\n    locale: \"en-US\"\n};\n//# sourceMappingURL=extensionSettings.js.map","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_dialogClassName\":\"modals_modal_dialogClassName__3-1eI\",\"library_list_modal_body\":\"modals_library_list_modal_body__19_dv\",\"library_list_accordion\":\"modals_library_list_accordion__1is8t\",\"library_list_wrapper\":\"modals_library_list_wrapper__1HBEv\",\"library_list_modal_header\":\"modals_library_list_modal_header__2IKWs\",\"library_list_modal_body_title\":\"modals_library_list_modal_body_title__3Jp7W\",\"modal_footer_button\":\"modals_modal_footer_button__13SjO\",\"modal_footer_wrapper\":\"modals_modal_footer_wrapper__hedCp\",\"library_name_warning_wrapper\":\"modals_library_name_warning_wrapper__3LI3I\",\"library_name_warning_line_1\":\"modals_library_name_warning_line_1__2PgNh\",\"library_name_warning_line_2\":\"modals_library_name_warning_line_2__znSXu\",\"modal_title\":\"modals_modal_title__3bv5U\",\"library_name_input\":\"modals_library_name_input__1-BcW\"};","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getLocStrings = exports.setLocStrings = void 0;\nconst extensionSettings_1 = require(\"../extensionSettings\");\nconst react_localization_1 = __importDefault(require(\"react-localization\"));\nlet strings;\nconst setLocStrings = (local, input) => {\n    strings = new react_localization_1.default({ [local]: input });\n};\nexports.setLocStrings = setLocStrings;\nconst getLocStrings = () => {\n    if (extensionSettings_1.settings.locale !== strings.getLanguage()) {\n        strings.setLanguage(extensionSettings_1.settings.locale);\n    }\n    return strings;\n};\nexports.getLocStrings = getLocStrings;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createLogger = void 0;\nconst extensionSettings_1 = require(\"./extensionSettings\");\n// Define a dummy logger for case that logger is disabled.\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = () => { };\nconst noopLogger = {\n    log: noop,\n    error: noop\n};\nconst createLogger = (name) => {\n    const formatMsg = (msg) => `${name}: ${msg}`;\n    const loggerTarget = extensionSettings_1.settings.logToConsole === true ? console : noopLogger;\n    return {\n        log: (msg) => loggerTarget.log(formatMsg(msg)),\n        error: (msg) => loggerTarget.error(formatMsg(msg))\n    };\n};\nexports.createLogger = createLogger;\n//# sourceMappingURL=logger.js.map","import React, { Component } from \"react\";\nimport \"./index.scss\";\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nexport class PageHeader extends Component<Props> {\n  static displayName = \"PageHeader\";\n  render() {\n    return <div className=\"page-wrapper-header\">{this.props.children}</div>;\n  }\n}\n\nexport class PageBody extends Component<Props> {\n  static displayName = \"PageBody\";\n  render() {\n    return <div className=\"page-wrapper-body\">{this.props.children}</div>;\n  }\n}\nexport class PageFooter extends Component<Props> {\n  static displayName = \"PageFooter\";\n  render() {\n    return <div className=\"page-wrapper-footer\">{this.props.children}</div>;\n  }\n}\n\nexport class Page extends Component<Props> {\n  static displayName = \"Page\";\n  static Header = PageHeader;\n  static Body = PageBody;\n  static Footer = PageFooter;\n\n  render() {\n    return <div className=\"page-wrapper\">{this.props.children}</div>;\n  }\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createExtension = exports.mapLocaleToAznbLocale = void 0;\nconst config_1 = __importDefault(require(\"./config\"));\n// import { ButtonsPanel } from \"./components/ButtonsPanel\";\nconst Panel_1 = require(\"./components/Panel\");\nconst protocol_1 = require(\"./protocol\");\nconst types_1 = require(\"./types\");\nconst cellSettingsProcessor_1 = require(\"./cellSettingsProcessor\");\nconst extensionSettings_1 = require(\"./extensionSettings\");\nrequire(\"../styles/index.scss\");\nconst theme_1 = require(\"./theme\");\nconst localization_1 = require(\"./localization\");\nconst core_library_1 = require(\"core-library\");\nvar extensionSettings_2 = require(\"./extensionSettings\");\nObject.defineProperty(exports, \"mapLocaleToAznbLocale\", { enumerable: true, get: function () { return extensionSettings_2.mapLocaleToAznbLocale; } });\n__exportStar(require(\"./types\"), exports);\nconst createExtension = (component) => {\n    const extension = {\n        name: \"minecraft\",\n        config: config_1.default,\n        activate: (context) => {\n            context.components.register(\"Panel\", component);\n            context.compute.registerProtocol(types_1.MyComputeProtocol, protocol_1.createRuntime());\n            context.commands.registerCellSettingsProcessor(\"minecraft-metadata\", cellSettingsProcessor_1.cellSettingsProcessor);\n            const parameters = core_library_1.ExtractUrlParams();\n            context.commands.registerMarkdownImageUriTransformer((url) => {\n                console.log(\"Uri Transformer Called: \" + url);\n                if (/^https?:/.test(url) || url.startsWith(\"/\"))\n                    return url;\n                else {\n                    let combinedUrl = parameters.rootNotebookPath;\n                    if (!combinedUrl.endsWith(\"/\"))\n                        combinedUrl += \"/\";\n                    return combinedUrl + url;\n                }\n            });\n            context.theme.registerTheme(\"minecraft\", theme_1.theme);\n        }\n    };\n    return extension;\n};\nexports.createExtension = createExtension;\nconst extension = {\n    name: \"minecraft\",\n    config: config_1.default,\n    activate: (context) => {\n        context.components.register(\"Panel\", Panel_1.Panel);\n        context.compute.registerProtocol(types_1.MyComputeProtocol, protocol_1.createRuntime());\n        context.commands.registerCellSettingsProcessor(\"minecraft-metadata\", cellSettingsProcessor_1.cellSettingsProcessor);\n        const parameters = core_library_1.ExtractUrlParams();\n        context.commands.registerMarkdownImageUriTransformer((url) => {\n            console.log(\"Uri Transformer Called: \" + url);\n            if (/^https?:/.test(url) || url.startsWith(\"/\"))\n                return url;\n            else {\n                let combinedUrl = parameters.rootNotebookPath;\n                if (!combinedUrl.endsWith(\"/\"))\n                    combinedUrl += \"/\";\n                return combinedUrl + url;\n            }\n        });\n        context.theme.registerTheme(\"minecraft\", theme_1.theme);\n    }\n};\nexports.default = Object.assign(Object.assign({}, extension), { settings: extensionSettings_1.settings, setLocStrings: localization_1.setLocStrings });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_contract_1 = require(\"@aznb/core-contract\");\nconst types_1 = require(\"./types\");\nconst config = {\n    mainFrame: {\n        showStatusBar: false,\n        showCellStatusBar: false,\n        showCommandBar: false,\n        showCellBanner: false,\n        showCellVerticalToolbar: false,\n        showCellToolbar: false,\n        enableDragDrop: false,\n        theme: \"minecraft\",\n        keyboardShortcuts: {\n            // For detailed and more avaiable options, please refer to https://aznb-docs.azurewebsites.net/keyboard-shortcuts/\n            shortcutsMode: core_contract_1.KeyboardShortcutsModes.none,\n            shortcutsOverrides: {\n                [core_contract_1.CommandModeShortcuts.focusEditor]: true,\n                [core_contract_1.CommandModeShortcuts.executeCell]: true,\n                [core_contract_1.EditModeShortcuts.unfocusEditor]: true,\n                [core_contract_1.EditModeShortcuts.executeCell]: true\n            }\n        }\n    },\n    codeCell: {\n        prompt: {\n            showCounter: false,\n            showExecuteButton: false\n        },\n        outputs: {\n            precedingComponents: [\n                {\n                    key: \"panel\",\n                    component: \"Panel\"\n                }\n            ]\n        },\n        editor: {\n            showLineNumber: true\n        }\n    },\n    markdownCell: {\n        viewOnly: true\n    },\n    // Description of each option can be found at https://devdiv.visualstudio.com/DevDiv/_git/AzureNotebooks?path=%2Fdocs%2Fapi%2Fextension-contract.imonacoeditoroptions.md&_a=preview&version=GBmaster\n    // The options are exact the same options get passed into monaco-editors, you can also test and play with the options on monaco's playground app:\n    // https://microsoft.github.io/monaco-editor/playground.html#creating-the-editor-editor-basic-options\n    monacoOptions: {\n        wordWrap: \"on\",\n        lineNumbersMinChars: 3,\n        scrollbar: {\n            vertical: \"auto\"\n        },\n        quickSuggestions: {\n            other: false,\n            comments: false,\n            strings: false\n        },\n        parameterHints: {\n            enabled: false\n        },\n        suggestOnTriggerCharacters: false,\n        acceptSuggestionOnEnter: \"off\",\n        tabCompletion: \"off\",\n        wordBasedSuggestions: false,\n        contextmenu: false,\n        gotoLocation: { multiple: \"goto\" },\n        codeLens: false,\n        lightbulb: { enabled: false }\n    },\n    compute: {\n        protocol: types_1.MyComputeProtocol\n    },\n    cellSettingProcessors: [\"minecraft-metadata\"]\n};\nexports.default = config;\n//# sourceMappingURL=config.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Panel = void 0;\nconst React = __importStar(require(\"react\"));\nconst core_library_1 = require(\"core-library\");\nconst ButtonsPanelLibrary_1 = require(\"./ButtonsPanelLibrary\");\nconst ButtonsPanelCodeCell_1 = require(\"./ButtonsPanelCodeCell\");\nclass Panel extends React.PureComponent {\n    render() {\n        if (this.props.cell.metadata.getIn([core_library_1.MetadataNamespace, \"LibraryEditCell\"])) {\n            return React.createElement(ButtonsPanelLibrary_1.ButtonsPanelLibrary, Object.assign({}, this.props));\n        }\n        else {\n            return React.createElement(ButtonsPanelCodeCell_1.ButtonsPanelCodeCell, Object.assign({}, this.props));\n        }\n    }\n}\nexports.Panel = Panel;\n//# sourceMappingURL=Panel.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ButtonsPanelLibrary = void 0;\nconst React = __importStar(require(\"react\"));\nconst core_library_1 = require(\"core-library\");\nclass ButtonsPanelLibrary extends React.PureComponent {\n    constructor() {\n        super(...arguments);\n        this.libraryListItem = undefined;\n        this.CodeLibraryProvider = core_library_1.CodeLibraryProviderInstance;\n        this.subscription = null;\n        this.minecraftCommander = (window === null || window === void 0 ? void 0 : window.ipcRenderer)\n            ? core_library_1.MinecraftCommander.getInstance(window.ipcRenderer)\n            : new core_library_1.MockMinecraftCommander();\n        this.ipcWorldStorage = (window === null || window === void 0 ? void 0 : window.ipcWorldStorage) ? window.ipcWorldStorage : new core_library_1.MockIpcWorldStorage();\n        this.onSaveHandler = () => {\n            var _a, _b;\n            const source = (_a = this.props.commands.notebook.cells.getSnapshot(this.props.cellId)) === null || _a === void 0 ? void 0 : _a.source;\n            const id = (_b = this.libraryListItem) === null || _b === void 0 ? void 0 : _b.id;\n            const localStorageLibrary = id ? this.CodeLibraryProvider.getLibraryItemWithSource(id) : undefined;\n            if (id && source && (localStorageLibrary === null || localStorageLibrary === void 0 ? void 0 : localStorageLibrary.source) !== source) {\n                const library = this.CodeLibraryProvider.update(id, \"source\", source);\n                if (library) {\n                    core_library_1.CrossCellMessageService.sendMessage({ action: core_library_1.CrossCellMessages.LIBRARY_UPDATED, library });\n                }\n            }\n            core_library_1.CrossCellMessageService.sendMessage({ action: core_library_1.CrossCellMessages.HIDE_LIBRARY_EDIT_WINDOW });\n        };\n    }\n    componentDidMount() {\n        this.props.commands.notebook.cells.setContent(this.props.cellId, \"\");\n        this.subscription = core_library_1.CrossCellMessageService.getMessage().subscribe((crossCellMessages) => {\n            switch (crossCellMessages.action) {\n                case core_library_1.CrossCellMessages.SEND_CURRENT_LIBRARY:\n                    {\n                        this.libraryListItem = this.CodeLibraryProvider.getLibraryItemWithSource(crossCellMessages.library.id);\n                        if (this.libraryListItem) {\n                            let metadata = this.props.commands.notebook.cells.getMetadata(this.props.cellId, core_library_1.MetadataNamespace);\n                            metadata = Object.assign(Object.assign({}, metadata), { readonly: this.libraryListItem.readonly ? true : false });\n                            this.props.commands.notebook.cells.setMetadata(this.props.cellId, core_library_1.MetadataNamespace, metadata);\n                            this.props.commands.notebook.cells.setContent(this.props.cellId, this.libraryListItem.source);\n                        }\n                    }\n                    break;\n                case core_library_1.CrossCellMessages.LIBRARY_UPDATED:\n                    this.libraryListItem = this.CodeLibraryProvider.getLibraryItemWithSource(crossCellMessages.library.id);\n                    break;\n                case core_library_1.CrossCellMessages.LIBRARY_UPDATE:\n                    this.onSaveHandler();\n                    break;\n                case core_library_1.CrossCellMessages.TEST_LIBRARY_CODE:\n                    if (this.props.cell.source.length > 0) {\n                        this.props.commands.notebook.cells.run(this.props.cellId);\n                    }\n                    break;\n                default:\n                    break;\n            }\n        });\n        core_library_1.CrossCellMessageService.sendMessage({ action: core_library_1.CrossCellMessages.GET_CURRENT_LIBRARY });\n    }\n    componentDidUpdate() {\n        var _a;\n        const { cell, settings } = this.props;\n        if (cell.cell_type === \"code\" && settings.cellType === \"code\") {\n            const cellStatus = settings.cellStatus;\n            // todo refactor\n            const output = (_a = cell.outputs.first(null)) === null || _a === void 0 ? void 0 : _a.toJSON();\n            core_library_1.CrossCellMessageService.sendMessage({\n                action: core_library_1.CrossCellMessages.UPDATE_OUTPUT_PANEL_DATA,\n                data: { isRunning: cellStatus === \"busy\" || cellStatus === \"queued\", output }\n            });\n        }\n    }\n    componentWillUnmount() {\n        var _a;\n        (_a = this.subscription) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n    }\n    render() {\n        return React.createElement(\"div\", null);\n    }\n}\nexports.ButtonsPanelLibrary = ButtonsPanelLibrary;\n//# sourceMappingURL=ButtonsPanelLibrary.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ButtonsPanelCodeCell = void 0;\n/* eslint-disable @typescript-eslint/camelcase */\nconst React = __importStar(require(\"react\"));\nconst rxjs_1 = require(\"rxjs\");\nconst core_library_1 = require(\"core-library\");\nconst OutputPanel_1 = require(\"./OutputPanel\");\nconst logger_1 = require(\"../logger\");\nconst localization_1 = require(\"../localization\");\nconst react_dom_1 = require(\"react-dom\");\nconst ExpanderBox_1 = require(\"./ExpanderBox\");\nconst operators_1 = require(\"rxjs/operators\");\nconst logger = logger_1.createLogger(\"ButtonsPanelCodeCell\");\n/**\n * Panel to place buttons\n */\nclass ButtonsPanelCodeCell extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.onChangeNotebookLibraryCell$ = null;\n        this.minecraftCommander = null;\n        this.ipcWorldStorage = null;\n        this.CodeLibraryProvider = core_library_1.CodeLibraryProviderInstance;\n        this.subscription = null;\n        //  used to detect lineOffset\n        this.libraryCellLines = {};\n        this.codeCellContainer = null;\n        this.panelRef = React.createRef();\n        // portal element used to render ExpanderBox\n        this.portalEl = document.createElement(\"div\");\n        this.prependElement = () => {\n            var _a, _b, _c;\n            const node = this.panelRef.current;\n            (_a = node === null || node === void 0 ? void 0 : node.closest(\".cell-not-draggable\")) === null || _a === void 0 ? void 0 : _a.classList.add(\"cell-not-draggable-padding\");\n            (_b = node === null || node === void 0 ? void 0 : node.closest(\".cell-container\")) === null || _b === void 0 ? void 0 : _b.prepend(this.portalEl);\n            this.codeCellContainer = (_c = node === null || node === void 0 ? void 0 : node.closest(\".cell-container\")) === null || _c === void 0 ? void 0 : _c.lastChild;\n        };\n        this.cellPropsHelper = () => {\n            const { cellId, commands: { notebook: { cells } } } = this.props;\n            return { cellId, cells };\n        };\n        this.setCodeCellStyle = () => {\n            var _a, _b, _c;\n            const { cellId, cells } = this.cellPropsHelper();\n            const { expand } = core_library_1.getMetadata(cells, cellId);\n            const codeCellDiv = (_a = this.codeCellContainer) === null || _a === void 0 ? void 0 : _a.querySelector(\".cell-code-input\");\n            if (this.codeCellContainer && codeCellDiv) {\n                const el = (_c = (_b = this.portalEl) === null || _b === void 0 ? void 0 : _b.firstElementChild) === null || _c === void 0 ? void 0 : _c.firstElementChild;\n                if (el) {\n                    const styles = window.getComputedStyle(el);\n                    const computedColor = styles.borderColor === \"rgb(255, 255, 255)\" ? styles.backgroundColor : styles.borderColor;\n                    codeCellDiv.style.border = `solid 2px ${computedColor}`;\n                    if (!expand) {\n                        codeCellDiv.classList.remove(\"expanderBox_expand\");\n                        codeCellDiv.classList.add(\"expanderBox_shrink\");\n                    }\n                    else {\n                        codeCellDiv.classList.remove(\"expanderBox_shrink\");\n                        codeCellDiv.classList.add(\"expanderBox_expand\");\n                    }\n                }\n            }\n        };\n        this.handleBaseCellExecutionResults = (output) => {\n            var _a;\n            const { cells } = this.cellPropsHelper();\n            const { baseCellErrorLineNumbers, librariesErrorLineNumbers, firstErrorLineNumberAndCellId } = core_library_1.getErrorData(output, this.libraryCellLines);\n            const cellIds = Object.keys(librariesErrorLineNumbers);\n            cellIds.forEach((cellId) => {\n                const errorData = JSON.stringify({\n                    summary: ` ${output.evalue}`,\n                    lineNumbers: librariesErrorLineNumbers[cellId]\n                });\n                this.updateLibraryCodeCellMetadataAndSource(cellId, { errorData, codeStatus: \"error\" }, null);\n            });\n            if (cellIds.length > 0) {\n                const { cellId: libraryCellId, lineNumber } = firstErrorLineNumberAndCellId;\n                const { libraryId } = core_library_1.getMetadata(cells, libraryCellId);\n                const libraryName = libraryId ? (_a = this.CodeLibraryProvider.getLibraryItem(libraryId)) === null || _a === void 0 ? void 0 : _a.name : \"\";\n                const errorDataBaseCell = JSON.stringify({\n                    summary: `${libraryName} line ${lineNumber}   ${output.evalue}`,\n                    lineNumbers: baseCellErrorLineNumbers\n                });\n                this.updateLibraryCodeCellMetadataAndSource(this.props.cellId, { errorData: errorDataBaseCell }, null);\n                cellIds.forEach((cellId) => {\n                    this.props.commands.notebook.cells.run(cellId);\n                });\n                this.props.commands.notebook.cells.run(this.props.cellId);\n            }\n        };\n        this.deleteCell = (cellId) => {\n            this.setFocusToCell(cellId);\n            this.props.commands.notebook.cells.delete();\n        };\n        this.deleteLibraryCell = () => {\n            const { cellId, cells } = this.cellPropsHelper();\n            const { libraryId, baseKey } = core_library_1.getMetadata(cells, cellId);\n            const baseCellId = core_library_1.getBaseCellId(cells, { baseKey });\n            if (libraryId && baseCellId) {\n                core_library_1.setBaseCellLibraries({\n                    cells,\n                    baseCellId,\n                    update: { [libraryId]: -1 },\n                    deleteCellFn: this.deleteCell,\n                    updateLibraryCodeCellMetadataAndSourceFn: this.updateLibraryCodeCellMetadataAndSource,\n                    insertCellFn: this.insertCell,\n                    getLibraryItemWithSourceFn: this.CodeLibraryProvider.getLibraryItemWithSource\n                });\n            }\n            if (baseCellId) {\n                core_library_1.CrossCellMessageService.sendMessage({\n                    action: core_library_1.CrossCellMessages.UPDATE_ARROW_ICONS,\n                    connectedLibrariesCellIds: core_library_1.getConnectedLibrariesCellIdsSet(cells, baseCellId)\n                });\n            }\n            this.props.commands.notebook.save();\n        };\n        this.updateLibraryCodeCellMetadataAndSource = (cellId, item, source) => {\n            let metadata = this.props.commands.notebook.cells.getMetadata(cellId, core_library_1.MetadataNamespace);\n            metadata = Object.assign(Object.assign({}, metadata), item);\n            this.props.commands.notebook.cells.setMetadata(cellId, core_library_1.MetadataNamespace, metadata);\n            if (source !== null) {\n                this.props.commands.notebook.cells.setContent(cellId, source);\n            }\n            this.props.commands.notebook.save();\n        };\n        this.refresh = (cellId) => {\n            // using cells.setMetadata instead of changing local state\n            const metadata = this.props.commands.notebook.cells.getMetadata(cellId, core_library_1.MetadataNamespace);\n            if (typeof metadata === \"object\") {\n                this.props.commands.notebook.cells.setMetadata(cellId, core_library_1.MetadataNamespace, Object.assign({}, metadata));\n            }\n        };\n        this.moveBtnOnClick = (moveDirection) => {\n            const { cellId, cells } = this.cellPropsHelper();\n            this.setFocusToCell(cellId);\n            const data = core_library_1.changeLibraryOrderData(cells, cellId, moveDirection);\n            this.props.commands.notebook.cells.move(moveDirection);\n            if (data) {\n                const { baseCellId, connectedLibraries, set: connectedLibrariesCellIds } = data;\n                this.updateLibraryCodeCellMetadataAndSource(baseCellId, { connectedLibraries }, null);\n                core_library_1.CrossCellMessageService.sendMessage({\n                    action: core_library_1.CrossCellMessages.UPDATE_ARROW_ICONS,\n                    connectedLibrariesCellIds\n                });\n            }\n        };\n        this.moveUpBtnOnClick = (_) => {\n            this.moveBtnOnClick(\"up\");\n        };\n        this.moveDownBtnOnClick = (_) => {\n            this.moveBtnOnClick(\"down\");\n        };\n        this.removeBtnOnClick = (e) => {\n            var _a;\n            e.preventDefault();\n            e.stopPropagation();\n            const isRemoveElementDisabled = ((_a = e.currentTarget) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-item-disabled\")) === \"true\";\n            if (!isRemoveElementDisabled) {\n                this.deleteLibraryCell();\n            }\n        };\n        this.expanderBoxToggle = (_) => {\n            const { cellId, cells } = this.cellPropsHelper();\n            const metadata = core_library_1.getMetadata(cells, cellId);\n            this.updateLibraryCodeCellMetadataAndSource(this.props.cellId, { expand: !(metadata === null || metadata === void 0 ? void 0 : metadata.expand) }, null);\n        };\n        this.handleShowLibrariesListModal = () => {\n            const { cellId, cells } = this.cellPropsHelper();\n            core_library_1.CrossCellMessageService.sendMessage({\n                action: core_library_1.CrossCellMessages.OPEN_LIBRARIES_LIST_WINDOW,\n                activeAznbCellId: this.props.cellId,\n                attachedLibraryData: core_library_1.getAttachedLibraryData(cells, cellId)\n            });\n        };\n        this.deleteLibraryFromStore = (libraryId) => {\n            const { cells } = this.cellPropsHelper();\n            const baseCellIds = core_library_1.getBaseCellIds(cells, { libraryId });\n            baseCellIds.forEach((baseCellId) => {\n                if (baseCellId) {\n                    core_library_1.setBaseCellLibraries({\n                        cells,\n                        baseCellId,\n                        update: { [libraryId]: -1 },\n                        deleteCellFn: this.deleteCell,\n                        insertCellFn: this.insertCell,\n                        updateLibraryCodeCellMetadataAndSourceFn: this.updateLibraryCodeCellMetadataAndSource,\n                        getLibraryItemWithSourceFn: this.CodeLibraryProvider.getLibraryItemWithSource\n                    });\n                }\n            });\n            baseCellIds.forEach((baseCellId) => {\n                if (baseCellId) {\n                    core_library_1.CrossCellMessageService.sendMessage({\n                        action: core_library_1.CrossCellMessages.UPDATE_ARROW_ICONS,\n                        connectedLibrariesCellIds: core_library_1.getConnectedLibrariesCellIdsSet(cells, baseCellId)\n                    });\n                }\n            });\n            this.props.commands.notebook.save();\n        };\n        this.getCodeCellLabel = ({ libraryId, baseCodeCellName }) => { var _a; return libraryId ? (_a = this.CodeLibraryProvider.getLibraryItem(libraryId)) === null || _a === void 0 ? void 0 : _a.name : baseCodeCellName || \"Main\"; };\n        this.insertCell = (cellId, source, metadata) => {\n            const { cells } = this.cellPropsHelper();\n            this.setFocusToCell(cellId);\n            cells.insertAbove(\"code\", source, { key: core_library_1.MetadataNamespace, value: metadata });\n        };\n        this.setBaseCellLibraries = (update) => {\n            const { cellId, cells } = this.cellPropsHelper();\n            core_library_1.setBaseCellLibraries({\n                cells,\n                baseCellId: cellId,\n                update,\n                deleteCellFn: this.deleteCell,\n                insertCellFn: this.insertCell,\n                updateLibraryCodeCellMetadataAndSourceFn: this.updateLibraryCodeCellMetadataAndSource,\n                getLibraryItemWithSourceFn: this.CodeLibraryProvider.getLibraryItemWithSource\n            });\n            core_library_1.CrossCellMessageService.sendMessage({\n                action: core_library_1.CrossCellMessages.UPDATE_ARROW_ICONS,\n                connectedLibrariesCellIds: core_library_1.getConnectedLibrariesCellIdsSet(cells, cellId)\n            });\n        };\n        this.setFocusToCell = (cellId) => {\n            const msg = document.getElementById(`editor-${cellId}`);\n            msg === null || msg === void 0 ? void 0 : msg.click();\n            // if (process.env.NODE_ENV === \"development\") {\n            //   const focusedCellId = this.props.commands.notebook.cells.getFocusedCellId();\n            //   if (focusedCellId !== cellId) {\n            //     throw new Error(\"wrong cellId !\");\n            //   }\n            // }\n        };\n        this.onRunButtonClicked = () => {\n            const { cellId, cells } = this.cellPropsHelper();\n            const { connectedLibraries, baseKey } = core_library_1.getMetadata(cells, cellId);\n            if (this.props.cell.source.length > 0) {\n                if (baseKey === undefined) {\n                    this.props.commands.notebook.cells.run(this.props.cellId);\n                }\n                else {\n                    if (connectedLibraries && connectedLibraries.length > 0) {\n                        this.props.commands.notebook.kernels.interrupt();\n                        const libraryCellIds = [];\n                        const sources = [];\n                        this.libraryCellLines = {};\n                        let from = 1;\n                        connectedLibraries === null || connectedLibraries === void 0 ? void 0 : connectedLibraries.forEach((id) => {\n                            var _a;\n                            const libraryCellId = core_library_1.getConnectedLibraryCellId(cells, { libraryId: id, baseKey });\n                            const source = (_a = this.CodeLibraryProvider.getLibraryItemWithSource(id)) === null || _a === void 0 ? void 0 : _a.source;\n                            if (source && source.length > 0 && libraryCellId) {\n                                sources.push(source);\n                                libraryCellIds.push(libraryCellId);\n                                this.libraryCellLines[libraryCellId] = { from, to: from + source.split(\"\\n\").length - 1 };\n                                from = this.libraryCellLines[libraryCellId].to + 1;\n                            }\n                        });\n                        libraryCellIds.forEach((libraryCellId) => {\n                            this.updateLibraryCodeCellMetadataAndSource(libraryCellId, { codeStatus: \"ok\", errorData: \"\" }, null);\n                        });\n                        libraryCellIds.forEach((libraryCellId) => {\n                            this.props.commands.notebook.cells.run(libraryCellId);\n                        });\n                        const libsSource = sources.join(\"\\n\");\n                        this.updateLibraryCodeCellMetadataAndSource(this.props.cellId, { overridePython: libsSource + \"\\n@user-code\", errorData: \"\" }, null);\n                        this.props.commands.notebook.cells.run(this.props.cellId);\n                    }\n                    if (connectedLibraries && !connectedLibraries.length) {\n                        this.updateLibraryCodeCellMetadataAndSource(this.props.cellId, { overridePython: \"\\n@user-code\", errorData: \"\" }, null);\n                        this.props.commands.notebook.cells.run(this.props.cellId);\n                    }\n                }\n            }\n        };\n        this.onStopButtonClicked = () => {\n            this.props.commands.notebook.kernels.interrupt();\n        };\n        this.onResetCodeButtonClicked = () => {\n            var _a;\n            this.props.commands.notebook.cells.clearOutputs(this.props.cellId);\n            this.props.commands.notebook.kernels.interrupt();\n            const { cellId, cells } = this.cellPropsHelper();\n            const { default_code: defaultCode } = core_library_1.getMetadata(cells, cellId);\n            let codeString = undefined;\n            if (typeof defaultCode === \"string\") {\n                codeString = defaultCode;\n            }\n            else if (Array.isArray(defaultCode)) {\n                codeString = defaultCode.join(\"\");\n            }\n            else if (codeString === undefined) {\n                codeString = \"\";\n            }\n            else {\n                // Other types are unexpected, it means the content is written in a wrong format\n                logger.log(`Error: unexpected type of default_code:'${typeof defaultCode}' defined for cell '${this.props.cellId}'`);\n            }\n            if (codeString !== undefined) {\n                this.props.commands.notebook.cells.setContent(this.props.cellId, codeString);\n            }\n            // The user has reset the code cell, so inform the world to update its CodeStatus to NotStarted\n            (_a = this.ipcWorldStorage) === null || _a === void 0 ? void 0 : _a.setCodeStatus(core_library_1.CodeStatus.notStarted);\n        };\n        this.onResetWorldButtonClicked = () => {\n            var _a;\n            this.props.commands.notebook.kernels.interrupt();\n            const { cellId, cells } = this.cellPropsHelper();\n            const { resetWorldCommand } = core_library_1.getMetadata(cells, cellId);\n            if (resetWorldCommand) {\n                (_a = this.minecraftCommander) === null || _a === void 0 ? void 0 : _a.send(new core_library_1.AnyCommand(resetWorldCommand));\n            }\n        };\n        const { cellId, cells } = this.cellPropsHelper();\n        const metadata = core_library_1.getMetadata(cells, cellId);\n        if (!metadata.libraryId) {\n            this.minecraftCommander = (window === null || window === void 0 ? void 0 : window.ipcRenderer)\n                ? core_library_1.MinecraftCommander.getInstance(window.ipcRenderer)\n                : new core_library_1.MockMinecraftCommander();\n            this.ipcWorldStorage = (window === null || window === void 0 ? void 0 : window.ipcWorldStorage) ? window.ipcWorldStorage : new core_library_1.MockIpcWorldStorage();\n        }\n        else {\n            this.onChangeNotebookLibraryCell$ = new rxjs_1.Subject();\n        }\n    }\n    componentDidMount() {\n        var _a, _b;\n        const { cellId, cells } = this.cellPropsHelper();\n        const metadata = core_library_1.getMetadata(cells, cellId);\n        (_a = this.onChangeNotebookLibraryCell$) === null || _a === void 0 ? void 0 : _a.pipe(operators_1.debounceTime(500)).subscribe(({ libraryId, cellId }) => {\n            const library = this.CodeLibraryProvider.getLibraryItemWithSource(libraryId);\n            if (library) {\n                core_library_1.CrossCellMessageService.sendMessage({\n                    action: core_library_1.CrossCellMessages.LIBRARY_UPDATED,\n                    library,\n                    cellId\n                });\n            }\n        });\n        this.subscription = core_library_1.CrossCellMessageService.getMessage().subscribe((crossCellMessages) => {\n            switch (crossCellMessages.action) {\n                case core_library_1.CrossCellMessages.LIBRARY_UPDATED:\n                    {\n                        const { library: { timestamp, source }, cellId: crossCellCellId } = crossCellMessages;\n                        if ((metadata === null || metadata === void 0 ? void 0 : metadata.libraryId) === crossCellMessages.library.id &&\n                            (!crossCellCellId || crossCellCellId !== cellId)) {\n                            this.updateLibraryCodeCellMetadataAndSource(this.props.cellId, { timestamp }, source);\n                        }\n                    }\n                    break;\n                case core_library_1.CrossCellMessages.ADD_REMOVE_CONNECTED_LIBRARIES_TO_BASE_CELL:\n                    {\n                        if (cellId === crossCellMessages.activeAznbCellId) {\n                            this.setBaseCellLibraries(crossCellMessages.update);\n                        }\n                    }\n                    break;\n                case core_library_1.CrossCellMessages.DELETE_LIBRARY_FROM_STORE:\n                    {\n                        if (cellId === crossCellMessages.activeAznbCellId) {\n                            this.deleteLibraryFromStore(crossCellMessages.libraryId);\n                        }\n                    }\n                    break;\n                case core_library_1.CrossCellMessages.UPDATE_ARROW_ICONS:\n                    {\n                        if ((metadata === null || metadata === void 0 ? void 0 : metadata.libraryId) && crossCellMessages.connectedLibrariesCellIds.has(cellId)) {\n                            this.refresh(cellId);\n                        }\n                    }\n                    break;\n                default:\n                    break;\n            }\n        });\n        this.props.commands.notebook.cells.onChangeContent((e) => {\n            var _a;\n            const { libraryId, readonly } = metadata;\n            if (cellId === e.cellId && libraryId && !readonly) {\n                const source = this.props.cell.source;\n                this.CodeLibraryProvider.update(libraryId, \"source\", source);\n                (_a = this.onChangeNotebookLibraryCell$) === null || _a === void 0 ? void 0 : _a.next({ libraryId, cellId });\n            }\n        });\n        this.props.commands.notebook.cells.onRun((e) => {\n            var _a;\n            const { connectedLibraries, errorData } = core_library_1.getMetadata(cells, e.cellId);\n            const { cell } = this.props;\n            if (cellId === e.cellId && cell.cell_type === \"code\" && (connectedLibraries === null || connectedLibraries === void 0 ? void 0 : connectedLibraries.length)) {\n                const output = (_a = cell.outputs.first(null)) === null || _a === void 0 ? void 0 : _a.toJSON();\n                const baseCellHasErrorMetadata = !!errorData;\n                if (output && output.output_type === \"error\" && !baseCellHasErrorMetadata) {\n                    this.handleBaseCellExecutionResults(Object.assign(Object.assign({}, output), { traceback: output.traceback.toJSON() }));\n                }\n            }\n        });\n        this.prependElement();\n        this.setCodeCellStyle();\n        if ((_b = metadata === null || metadata === void 0 ? void 0 : metadata.connectedLibraries) === null || _b === void 0 ? void 0 : _b.length) {\n            core_library_1.CrossCellMessageService.sendMessage({\n                action: core_library_1.CrossCellMessages.UPDATE_ARROW_ICONS,\n                connectedLibrariesCellIds: core_library_1.getConnectedLibrariesCellIdsSet(cells, cellId)\n            });\n        }\n    }\n    componentDidUpdate() {\n        this.setCodeCellStyle();\n    }\n    componentWillUnmount() {\n        var _a, _b, _c, _d;\n        (_a = this.onChangeNotebookLibraryCell$) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n        (_b = this.subscription) === null || _b === void 0 ? void 0 : _b.unsubscribe();\n        (_d = (_c = this.panelRef.current) === null || _c === void 0 ? void 0 : _c.closest(\".cell-container\")) === null || _d === void 0 ? void 0 : _d.removeChild(this.portalEl);\n    }\n    render() {\n        const { cell, settings, cellId, commands: { notebook: { cells } } } = this.props;\n        if (cell.cell_type !== \"code\" || settings.cellType !== \"code\") {\n            return null;\n        }\n        else {\n            const metadata = core_library_1.getMetadata(cells, cellId);\n            const { libraryId, baseCodeCellName } = metadata;\n            const locStrings = localization_1.getLocStrings();\n            const cellStatus = settings.cellStatus;\n            const isRunning = cellStatus === \"busy\" || cellStatus === \"queued\";\n            const output = cell.outputs.first(null);\n            return (React.createElement(\"div\", { ref: this.panelRef, className: \"editor-buttons-panel\" },\n                react_dom_1.createPortal(React.createElement(ExpanderBox_1.ExpanderBox, { moveDownBtnOnClick: this.moveDownBtnOnClick, moveUpBtnOnClick: this.moveUpBtnOnClick, removeBtnOnClick: this.removeBtnOnClick, expanderBoxToggle: this.expanderBoxToggle, metadata: metadata, label: this.getCodeCellLabel({ libraryId, baseCodeCellName }), cellId: cellId, cells: cells }), this.portalEl),\n                !metadata.libraryId && (React.createElement(React.Fragment, null,\n                    React.createElement(\"hr\", { className: \"standard-hr\" }),\n                    React.createElement(\"div\", { className: \"button-group\" },\n                        isRunning ? (React.createElement(\"button\", { className: \"editor-button __ButtonLiteGrey\", \"data-testid\": \"AznbbStop\", onClick: this.onStopButtonClicked },\n                            React.createElement(\"i\", { className: \"icon icon_stop\", \"aria-hidden\": \"true\" }),\n                            \"\\u00A0\",\n                            locStrings.AznbbStop)) : (React.createElement(\"button\", { className: \"editor-button __ButtonLiteGrey\", \"data-testid\": \"AznbbRun\", onClick: this.onRunButtonClicked },\n                            React.createElement(\"i\", { className: \"icon icon_play\", \"aria-hidden\": \"true\" }),\n                            \"\\u00A0\",\n                            locStrings.AznbbRun)),\n                        this.shouldHideCodeReset() ? null : (React.createElement(\"button\", { className: \"editor-button __ButtonLiteGrey\", \"data-testid\": \"AznbbResetCode\", onClick: this.onResetCodeButtonClicked },\n                            React.createElement(\"i\", { className: \"icon icon_refresh\", \"aria-hidden\": \"true\" }),\n                            \"\\u00A0\",\n                            locStrings.AznbbResetCode)),\n                        this.shouldHideWorldReset() ? null : (React.createElement(\"button\", { className: \"editor-button __ButtonLiteGrey\", \"data-testid\": \"AznbbResetWorld\", onClick: this.onResetWorldButtonClicked },\n                            React.createElement(\"i\", { className: \"icon icon_refresh\", \"aria-hidden\": \"true\" }),\n                            \"\\u00A0\",\n                            locStrings.AznbbResetWorld)),\n                        this.shouldHideLibrariesButton() ? null : (React.createElement(\"button\", { className: \"editor-button __ButtonLiteGrey\", \"data-testid\": \"AznbLibraries\", onClick: this.handleShowLibrariesListModal, disabled: isRunning },\n                            React.createElement(\"i\", { className: \"icon icon_article\", \"aria-hidden\": \"true\" }),\n                            \"\\u00A0\",\n                            locStrings.AznbbLibraries))),\n                    React.createElement(OutputPanel_1.OutputPanel, { output: output, isRunning: isRunning })))));\n        }\n    }\n    shouldHideCodeReset() {\n        const { cellId, cells } = this.cellPropsHelper();\n        const { default_code: defaultCode } = core_library_1.getMetadata(cells, cellId);\n        return defaultCode == undefined;\n    }\n    shouldHideLibrariesButton() {\n        const { cellId, cells } = this.cellPropsHelper();\n        const { enableCodeLibraryButton } = core_library_1.getMetadata(cells, cellId);\n        return enableCodeLibraryButton !== true;\n    }\n    shouldHideWorldReset() {\n        const { cellId, cells } = this.cellPropsHelper();\n        const { resetWorldCommand } = core_library_1.getMetadata(cells, cellId);\n        return resetWorldCommand == undefined;\n    }\n}\nexports.ButtonsPanelCodeCell = ButtonsPanelCodeCell;\n//# sourceMappingURL=ButtonsPanelCodeCell.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OutputPanel = void 0;\nconst core_library_1 = require(\"core-library\");\nconst react_1 = __importDefault(require(\"react\"));\n// import { getLocStrings } from \"./utils/getLocStrings\";\nconst localization_1 = require(\"../localization\");\nclass OutputPanel extends react_1.default.PureComponent {\n    constructor() {\n        super(...arguments);\n        this.MPS_INIT = 0;\n        this.MPS_OPEN = 1;\n        this.MPS_CLOSE = 2;\n        this.messagePanelState = this.MPS_INIT;\n    }\n    render() {\n        const { output, isRunning } = this.props;\n        const locStrings = localization_1.getLocStrings();\n        let message = \"\";\n        let stateClass = \"none\";\n        if (isRunning) {\n            message = locStrings.AznbbRunInProcess;\n            stateClass = \"running\";\n            this.messagePanelState = this.MPS_OPEN;\n        }\n        else if (output) {\n            if (output.output_type === \"execute_result\") {\n                message = output.data[\"text/html\"];\n                if (message === core_library_1.ResultMessages.ExecutionSucceeds) {\n                    message = locStrings.AznbbRunSuccessful;\n                    stateClass = \"success\";\n                }\n                else if (message === core_library_1.ResultMessages.ExecutionCancelled) {\n                    message = locStrings.AznbbRunCancelled;\n                    stateClass = \"warning\";\n                }\n                this.messagePanelState = this.MPS_OPEN;\n            }\n            else if (output.output_type === \"error\") {\n                message = locStrings.formatString(locStrings.AznbbErrorRun, output.evalue);\n                message = output.evalue;\n                stateClass = \"error\";\n                this.messagePanelState = this.MPS_OPEN;\n            }\n            else {\n                // We shouldn't fall into this branch, or it could be a bug\n                console.error(`Unexpected output_type from output:'${JSON.stringify(output)}'`);\n            }\n        }\n        else {\n            if (this.messagePanelState !== this.MPS_OPEN) {\n                this.messagePanelState = this.MPS_CLOSE;\n            }\n        }\n        let panelStateClass = \"\";\n        switch (this.messagePanelState) {\n            case this.MPS_INIT:\n                break;\n            case this.MPS_OPEN:\n                panelStateClass = \"output-message-root--open\";\n                break;\n            case this.MPS_CLOSE:\n                panelStateClass = \"output-message-root--closed\";\n                break;\n            default:\n                console.error(\"Unhandled messagePanelState: \" + this.messagePanelState);\n        }\n        return (react_1.default.createElement(\"div\", { className: \"output-message-root \" + panelStateClass },\n            react_1.default.createElement(\"hr\", { className: \"standard-hr\" }),\n            react_1.default.createElement(\"div\", { className: \"output-message-container \" + stateClass }, message)));\n    }\n}\nexports.OutputPanel = OutputPanel;\n//# sourceMappingURL=OutputPanel.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExpanderBox = void 0;\nconst react_1 = __importStar(require(\"react\"));\nconst core_library_1 = require(\"core-library\");\nconst ExpanderBoxIcon_1 = require(\"./ExpanderBoxIcon\");\nconst ExpanderBoxWrapper_1 = require(\"./ExpanderBoxWrapper\");\nclass ExpanderBox extends react_1.Component {\n    render() {\n        const { cellId, cells, metadata, label = \"Main\", moveDownBtnOnClick, moveUpBtnOnClick, removeBtnOnClick, expanderBoxToggle } = this.props;\n        let isMoveUpBtnDisabled = true;\n        let isMoveDownBtnDisabled = true;\n        let isCloseBtnDisabled = true;\n        if (metadata.libraryId) {\n            const librariesOrder = core_library_1.getLibraryCellPosition(cells, cellId);\n            isMoveUpBtnDisabled =\n                librariesOrder.kind === \"preAttached\" ||\n                    (librariesOrder.kind === \"custom\" &&\n                        (librariesOrder.position === \"first\" || librariesOrder.position === \"alone\"));\n            isMoveDownBtnDisabled =\n                librariesOrder.kind === \"preAttached\" ||\n                    (librariesOrder.kind === \"custom\" &&\n                        (librariesOrder.position === \"last\" || librariesOrder.position === \"alone\"));\n            isCloseBtnDisabled = !!metadata.isPreAttached;\n        }\n        const isReadOnly = metadata.readonly;\n        let cedeCellType = { kind: \"Main\" };\n        if (metadata.libraryId) {\n            cedeCellType = metadata.isPredefined\n                ? { kind: \"Library\", libraryType: \"LessonLibrary\" }\n                : { kind: \"Library\", libraryType: \"UserLibrary\" };\n        }\n        return (react_1.default.createElement(ExpanderBoxWrapper_1.ExpanderBoxWrapper, { hasError: metadata.codeStatus === \"error\", isMainEditor: !metadata.libraryId, isOpen: !!metadata.expand, isReadonly: !!isReadOnly, cedeCellType: cedeCellType },\n            react_1.default.createElement(\"div\", { className: \"mc_ExpanderBox--TitleBar\" },\n                react_1.default.createElement(\"div\", { className: \"mc_ExpanderBox--ToggleArrow\", onClick: expanderBoxToggle },\n                    react_1.default.createElement(\"i\", { className: \"icon icon_chevron-down\" })),\n                react_1.default.createElement(\"div\", { className: \"mc_ExpanderBox--Label\", onClick: expanderBoxToggle }, label),\n                react_1.default.createElement(\"div\", { className: \"mc_ExpanderBox--ControlsRight\" },\n                    react_1.default.createElement(\"div\", { className: \"mc_ExpanderBox--IconFlag readOnlyFlag\" },\n                        react_1.default.createElement(\"i\", { className: \"pa2-icon pa2_lock\" })),\n                    react_1.default.createElement(ExpanderBoxIcon_1.ExpanderBoxIcon, { btnClass: \"moveUpBtn\", isDisabled: isMoveUpBtnDisabled, onClickHandler: moveUpBtnOnClick },\n                        react_1.default.createElement(\"i\", { className: \"pa2-icon pa2_arrow_up__7x7\" })),\n                    react_1.default.createElement(ExpanderBoxIcon_1.ExpanderBoxIcon, { btnClass: \"moveDownBtn\", isDisabled: isMoveDownBtnDisabled, onClickHandler: moveDownBtnOnClick },\n                        react_1.default.createElement(\"i\", { className: \"pa2-icon pa2_arrow_down__7x7\" })),\n                    react_1.default.createElement(ExpanderBoxIcon_1.ExpanderBoxIcon, { btnClass: \"remove-CloseBtn\", isDisabled: isCloseBtnDisabled, onClickHandler: removeBtnOnClick },\n                        react_1.default.createElement(\"i\", { className: \"pa2-icon pa2_x-pixel__7x7\" }))))));\n    }\n}\nexports.ExpanderBox = ExpanderBox;\n//# sourceMappingURL=ExpanderBox.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExpanderBoxIcon = void 0;\nconst react_1 = __importStar(require(\"react\"));\nclass ExpanderBoxIcon extends react_1.Component {\n    render() {\n        const { isDisabled, children, btnClass, onClickHandler } = this.props;\n        return (react_1.default.createElement(react_1.default.Fragment, null, isDisabled ? (react_1.default.createElement(\"div\", { className: `mc_ExpanderBox--IconButton ${btnClass}`, \"data-item-disabled\": true }, children)) : (react_1.default.createElement(\"div\", { onClick: onClickHandler, className: `mc_ExpanderBox--IconButton ${btnClass}` }, children))));\n    }\n}\nexports.ExpanderBoxIcon = ExpanderBoxIcon;\n//# sourceMappingURL=ExpanderBoxIcon.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExpanderBoxWrapper = void 0;\nconst react_1 = __importStar(require(\"react\"));\nclass ExpanderBoxWrapper extends react_1.Component {\n    render() {\n        const { children, hasError, cedeCellType, isMainEditor, isReadonly, isOpen } = this.props;\n        const hasErrorClass = hasError ? \"mc_ExpanderBox__Error __Bright\" : \"mc_ExpanderBox__Valid\";\n        const isOpenClass = isOpen ? \"mc_ExpanderBox__Open\" : \" \";\n        const libraryClass = cedeCellType.kind === \"Library\"\n            ? cedeCellType.libraryType === \"UserLibrary\"\n                ? \"mc_ExpanderBox__UserLibrary\"\n                : \"mc_ExpanderBox__LessonLibrary\"\n            : \"\";\n        const wrapperClass = `mc_ExpanderBox  ${libraryClass}  ${hasErrorClass}  ${isOpenClass}`;\n        return (react_1.default.createElement(react_1.default.Fragment, null,\n            isMainEditor && isReadonly ? (react_1.default.createElement(\"div\", { className: wrapperClass, \"data-main-editor\": true, \"data-editor-readonly\": true }, children)) : null,\n            isMainEditor && !isReadonly ? (react_1.default.createElement(\"div\", { className: wrapperClass, \"data-main-editor\": true }, children)) : null,\n            !isMainEditor && isReadonly ? (react_1.default.createElement(\"div\", { className: wrapperClass, \"data-editor-readonly\": true }, children)) : null,\n            !isMainEditor && !isReadonly ? react_1.default.createElement(\"div\", { className: wrapperClass }, children) : null));\n    }\n}\nexports.ExpanderBoxWrapper = ExpanderBoxWrapper;\n//# sourceMappingURL=ExpanderBoxWrapper.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createRuntime = void 0;\nvar runtime_1 = require(\"./runtime\");\nObject.defineProperty(exports, \"createRuntime\", { enumerable: true, get: function () { return runtime_1.createRuntime; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createRuntime = exports.setError = void 0;\n/* eslint-disable @typescript-eslint/camelcase */\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst mockRuntime_1 = require(\"./mockRuntime\");\nconst core_contract_1 = require(\"@aznb/core-contract\");\nconst types_1 = require(\"../types\");\nconst logger_1 = require(\"../logger\");\nconst core_library_1 = require(\"core-library\");\nconst logger = logger_1.createLogger(\"Minecraft-Runtime\");\nconst setError = (errorData) => {\n    try {\n        const { summary, lineNumbers } = JSON.parse(errorData);\n        logger.log(`called setError with input ${errorData}`);\n        const markers = lineNumbers.map((lineNumber) => ({\n            startLineNumber: lineNumber,\n            startColumn: 1,\n            endLineNumber: lineNumber,\n            endColumn: 1000,\n            severity: core_contract_1.EditorMarkerSeverity.Error,\n            message: summary\n        }));\n        const output = {\n            type: \"error\",\n            executionCount: 0,\n            errorTarget: \"Error\",\n            errorMessage: summary,\n            errorDetails: [],\n            errorMarkers: markers,\n            metadata: {}\n        };\n        return {\n            output\n        };\n    }\n    catch (error) {\n        logger.error(`error parsing 'errorData'  ${error.message}`);\n        return {\n            output: {\n                type: \"error\",\n                executionCount: 0,\n                errorTarget: \"Error\",\n                errorMessage: `${error.message}`,\n                errorDetails: [],\n                errorMarkers: [],\n                metadata: {}\n            }\n        };\n    }\n};\nexports.setError = setError;\nconst createMessageStream = (ipc) => {\n    const messages = new rxjs_1.Subject();\n    const bridge = (eventName, payload) => {\n        messages.next({\n            eventName,\n            payload: payload ? JSON.parse(payload) : undefined\n        });\n    };\n    ipc.on(\"InitializationComplete\", bridge);\n    ipc.on(\"CompilationCompleted\", bridge);\n    ipc.on(\"ExecutionStarted\", bridge);\n    ipc.on(\"Error\", bridge);\n    ipc.on(\"Completed\", bridge);\n    return messages;\n};\n/**\n * Create a plain result\n *\n * @param {string} msg message to show in the result\n * @param {number} executionCount execution count\n * @returns {IExecutionHtmlOutput} result message to the notebook component\n */\nfunction createPlainResult(msg, executionCount) {\n    const output = {\n        type: \"html\",\n        executionCount,\n        metadata: {},\n        result: msg\n    };\n    return output;\n}\n// const redColorHeader = \"\\u001b[31m\";\n// /**\n//  * Create error marker info\n//  *\n//  * @param {number} lineNumber line number of the error\n//  * @param {string} message message to display for the error\n//  * @returns {IMarkerData} marker data\n//  */\n// function createErrorMarker(lineNumber: number, message: string): IMarkerData {\n//   return {\n//     startLineNumber: lineNumber,\n//     startColumn: 1,\n//     endLineNumber: lineNumber,\n//     endColumn: 1000,\n//     message\n//   };\n// }\n/**\n * Create error result\n *\n * @param {string} eventName name of the error\n * @param {number} lineOffset offset of line number in source where error occurs so we can adjust that in error markers\n * @param {number} executionCount execution count\n * @param {IError[]} errors errors\n * @returns {IExecutionErrorOutput} error output\n */\nfunction createErrorResult(eventName, lineOffset, executionCount, errors) {\n    const traceback = errors.map((e) => e.details);\n    const markers = core_library_1.getLineNumbersFromErrorOutput(traceback).map((lineNumber) => {\n        return {\n            startLineNumber: lineNumber + lineOffset,\n            startColumn: 1,\n            endLineNumber: lineNumber + lineOffset,\n            endColumn: 1000,\n            severity: core_contract_1.EditorMarkerSeverity.Error,\n            message: errors[0].summary\n        };\n    });\n    const errOutput = {\n        type: \"error\",\n        executionCount,\n        errorTarget: eventName,\n        errorMessage: errors.length > 0 ? errors[0].summary : \"unknown\",\n        errorDetails: traceback,\n        errorMarkers: markers,\n        metadata: {}\n    };\n    return errOutput;\n}\nconst handleCodeListener = (id, map) => {\n    var _a;\n    (_a = map === null || map === void 0 ? void 0 : map.get(id)) === null || _a === void 0 ? void 0 : _a();\n};\nconst messageToExecuteOutput = (message, executionCount, codeListener, metadata) => {\n    let msg = JSON.stringify(message.payload);\n    metadata = metadata || {};\n    const lineOffset = metadata.lineOffset || 0;\n    if (message.eventName === \"Error\") {\n        handleCodeListener(types_1.CodeListenerIds.onCodeErrorCommand, codeListener);\n        return createErrorResult(message.eventName, lineOffset, executionCount, message.payload.errors || []);\n    }\n    else if (message.eventName === \"Completed\") {\n        handleCodeListener(types_1.CodeListenerIds.onCodeStoppedCommand, codeListener);\n        const { success } = message.payload;\n        if (success === \"Succeeded\") {\n            handleCodeListener(types_1.CodeListenerIds.onCodeSuccessfulCommand, codeListener);\n            msg = core_library_1.ResultMessages.ExecutionSucceeds;\n        }\n        else if (success === \"Cancelled\") {\n            handleCodeListener(types_1.CodeListenerIds.onCodeCancelledCommand, codeListener);\n            msg = core_library_1.ResultMessages.ExecutionCancelled;\n        }\n    }\n    else if (message.eventName === \"CompilationCompleted\") {\n        const { errors } = message.payload;\n        if (!errors || errors.length === 0) {\n            msg = core_library_1.ResultMessages.CompilationSucceeds;\n        }\n        else {\n            return createErrorResult(message.eventName, lineOffset, executionCount, errors);\n        }\n    }\n    return createPlainResult(msg, executionCount);\n};\n/**\n * create runtime as the compute target\n *\n * @returns {IStandardComputeProtocol} a runtime supporting the {IStandardComputeProtocol}\n */\nfunction createRuntime() {\n    const clientLogger = window.ipcTelemetry\n        ? window.ipcTelemetry\n        : new core_library_1.MockIpcTelemetry();\n    const worldStorage = window.ipcWorldStorage\n        ? window.ipcWorldStorage\n        : new core_library_1.MockIpcWorldStorage();\n    const minecraftCommander = (window === null || window === void 0 ? void 0 : window.ipcRenderer)\n        ? core_library_1.MinecraftCommander.getInstance(window.ipcRenderer)\n        : new core_library_1.MockMinecraftCommander();\n    let executionCount = 0;\n    let isInExecution = false;\n    let pythonHost;\n    let codeScreenRenderer;\n    let message$;\n    let inits$;\n    let compiles$;\n    let executionResult$;\n    const storageProvider = new core_library_1.NotebookContentProvider(localStorage, logger);\n    const statusMap = new Map();\n    statusMap.set(types_1.CodeListenerIds.onCodeStartedCommand, core_library_1.CodeStatus.inProgress);\n    statusMap.set(types_1.CodeListenerIds.onCodeCancelledCommand, core_library_1.CodeStatus.notStarted);\n    statusMap.set(types_1.CodeListenerIds.onCodeErrorCommand, core_library_1.CodeStatus.error);\n    statusMap.set(types_1.CodeListenerIds.onCodeSuccessfulCommand, core_library_1.CodeStatus.succeeded);\n    /**\n     * Initialize the compute to get ready for connection from the azure notebook component\n     *\n     * @param input parameters for initialization\n     */\n    const initialize = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`initializeCompute is called with input ${JSON.stringify(input)}`);\n        codeScreenRenderer = window.ipcCodeScreenRenderer || mockRuntime_1.createIpcCodeScreenRenderer();\n        pythonHost = window.ipcPython || mockRuntime_1.createIpcPythonMock();\n        message$ = createMessageStream(pythonHost);\n        inits$ = message$.pipe(operators_1.filter((m) => m.eventName === \"InitializationComplete\"), operators_1.first());\n        isInExecution = false;\n        message$.pipe(operators_1.filter((m) => m.eventName === \"ExecutionStarted\")).subscribe({\n            next: () => {\n                isInExecution = true;\n            }\n        });\n        message$.pipe(operators_1.filter((m) => m.eventName === \"CompilationCompleted\")).subscribe({\n            next: () => {\n                console.log(\"CompilationCompleted\");\n            }\n        });\n        message$.pipe(operators_1.filter((m) => m.eventName === \"ExecutionStarted\")).subscribe({\n            next: () => {\n                console.log(\"ExecutionStarted\");\n            }\n        });\n        executionResult$ = message$.pipe(operators_1.filter((m) => m.eventName === \"Completed\" || m.eventName === \"Error\"));\n        executionResult$.subscribe({\n            next: () => {\n                isInExecution = false;\n            }\n        });\n        compiles$ = message$.pipe(operators_1.filter((m) => m.eventName === \"CompilationCompleted\"));\n        compiles$.pipe(operators_1.tap((m) => {\n            logger.log(`Compile$ message: ${JSON.stringify(m)}`);\n        }));\n        return { message: \"done\" };\n    });\n    /**\n     * Handler to start the session when Azure Notebook Component call to connect the compute\n     *\n     * @param input parameters for establishing the connection\n     */\n    const connect = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`connectCompute is called with input ${JSON.stringify(input)}`);\n        pythonHost.initialize();\n        const result = yield inits$.toPromise();\n        return { message: `Done. Details: ${JSON.stringify(result)}` };\n    });\n    /**\n     * Handler to stop the connection when Azure Notebook Component call to disconnect from compute\n     *\n     * @param input Parameters for disconnecting the connection\n     */\n    const disconnect = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`disconnectCompute is called with input ${JSON.stringify(input)}`);\n        // TODO: anything we need to clear here?\n        return { message: \"done\" };\n    });\n    /**\n     * Gets the onCodeCommand mappings from metadata.\n     *\n     * @param cell NTeract Immutable Cell; Used to obtain relevant onCode Id's\n     */\n    const getOnCodeListeners = (cell) => {\n        const codeListeners = new Map();\n        console.log(\"Started getOnCodeListeners\");\n        for (const key in types_1.CodeListenerIds) {\n            // TODO: Check if getin maps up to notebook metadata if cell is not available.\n            const val = cell.metadata.getIn([core_library_1.MetadataNamespace, key]);\n            if (val) {\n                console.log(`Found getOnCodeListeners ${key} --  ${val}`);\n                codeListeners.set(key, () => {\n                    const listenerId = statusMap.get(key);\n                    if (listenerId) {\n                        worldStorage.setCodeStatus(listenerId);\n                    }\n                    minecraftCommander.send(new core_library_1.AnyCommand(val));\n                });\n            }\n        }\n        return codeListeners;\n    };\n    /**\n     * Handler to execute script for a cell\n     *\n     * @param input Parameters for executing script for a cell\n     */\n    const execute = (input) => __awaiter(this, void 0, void 0, function* () {\n        const { script, cell } = input;\n        const errorData = cell.metadata.getIn([core_library_1.MetadataNamespace, \"errorData\"]);\n        const libraryId = cell.metadata.getIn([core_library_1.MetadataNamespace, \"libraryId\"]);\n        if (errorData) {\n            const onCodeListenerMap = getOnCodeListeners(cell);\n            handleCodeListener(types_1.CodeListenerIds.onCodeErrorCommand, onCodeListenerMap);\n            return yield executionResult$\n                .pipe(operators_1.first(), operators_1.map(() => exports.setError(errorData)))\n                .toPromise();\n        }\n        else {\n            if (libraryId) {\n                const onCodeListenerMap = getOnCodeListeners(cell);\n                handleCodeListener(types_1.CodeListenerIds.onCodeSuccessfulCommand, onCodeListenerMap);\n                const output = yield executionResult$\n                    .pipe(operators_1.first(), operators_1.map(() => createPlainResult(\"\", executionCount)))\n                    .toPromise();\n                return { output };\n            }\n            else {\n                logger.log(`executeCell is called with script '${script}'`);\n                try {\n                    if (isInExecution) {\n                        throw \"Previous execution is not completed yet.\";\n                    }\n                    else {\n                        executionCount++;\n                        let finalizedScript = script;\n                        // check if the override code is present. If it is, wrap it around the user code.\n                        const overrideCode = cell.metadata.getIn([core_library_1.MetadataNamespace, \"overridePython\"]);\n                        let overrideLineOffset = 0;\n                        if (overrideCode) {\n                            logger.log(`Found Override Code: '${overrideCode}'`);\n                            // Find the @usercode tag in override code\n                            const usercodeTag = \"@user-code\";\n                            const usercodeIndex = overrideCode.search(usercodeTag);\n                            // Find out the number of prefix override lines\n                            overrideLineOffset = -(overrideCode.substring(0, usercodeIndex).match(/\\n/g) || []).length;\n                            // Combine override code with usercode\n                            const combinedOverrideScript = overrideCode.substring(0, usercodeIndex) +\n                                script +\n                                overrideCode.substring(usercodeIndex + usercodeTag.length);\n                            finalizedScript = combinedOverrideScript;\n                        }\n                        const onCodeListenerMap = getOnCodeListeners(cell);\n                        handleCodeListener(types_1.CodeListenerIds.onCodeStartedCommand, onCodeListenerMap);\n                        pythonHost.execute(finalizedScript);\n                        clientLogger.log({\n                            action: \"execute\",\n                            codeListener: onCodeListenerMap.size,\n                            hasOverrideCode: overrideCode,\n                            scriptLength: script.length\n                        });\n                        // check if the closeCodeBuilderOnRun flag is on\n                        const closeCodeBuilderOnRun = cell.metadata.getIn([core_library_1.MetadataNamespace, \"closeCodeBuilderOnRun\"]) === true;\n                        if (closeCodeBuilderOnRun) {\n                            codeScreenRenderer.dismiss();\n                        }\n                        // return outputs\n                        const output = yield executionResult$\n                            .pipe(operators_1.first(), operators_1.map((r) => messageToExecuteOutput(r, executionCount, onCodeListenerMap, {\n                            lineOffset: overrideLineOffset\n                        })))\n                            .toPromise();\n                        return { output };\n                    }\n                }\n                catch (error) {\n                    return {\n                        output: {\n                            type: \"error\",\n                            errorTarget: \"sample runtime\",\n                            errorDetails: [],\n                            errorMessage: JSON.stringify(error),\n                            executionCount,\n                            metadata: {}\n                        }\n                    };\n                }\n            }\n        }\n    });\n    /**\n     * Handler to cancel an execution\n     *\n     * @param {IComputeInterruptOptions} input Parameters of the execution to be cancelled\n     * @returns {void}\n     */\n    const interrupt = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`interruptExecution is called with input ${JSON.stringify(input)}`);\n        pythonHost.cancel();\n    });\n    minecraftCommander.subscribe(new core_library_1.CodebuidlerRuntimeActionCommand(true), (result) => {\n        if (result && result.RuntimeAction == core_library_1.RuntimeAction.Stop) {\n            logger.log(\"interruptExecution is called from CodebuidlerRuntimeActionCommand\");\n            pythonHost.cancel();\n        }\n    });\n    /**\n     * Handler to return notebook content based on the given input parameter\n     *\n     * @param input Parameters to specify what notebook to fetch\n     */\n    const fetchContent = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`fetchContent is called with input ${JSON.stringify(input)}`);\n        const { url } = input;\n        const content = yield storageProvider.get(url, true);\n        return { content };\n    });\n    /**\n     * Handler to persist notebook to the given storage\n     *\n     * @param input Parameters contains info about the storage to persist the notebook\n     */\n    //@ts-nocheck\n    const saveContent = (input) => __awaiter(this, void 0, void 0, function* () {\n        //@ts-check\n        logger.log(`saveContent is called with for url ${input.url}`);\n        // @ts-expect-error\n        yield storageProvider.save(input.url, input.content);\n        const { url } = input;\n        return { url };\n    });\n    return {\n        type: \"standard\",\n        initialize,\n        connect,\n        disconnect,\n        execute,\n        interrupt,\n        fetchContent,\n        saveContent\n    };\n}\nexports.createRuntime = createRuntime;\n//# sourceMappingURL=runtime.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createIpcCodeScreenRenderer = exports.createIpcPythonMock = void 0;\nconst logger_1 = require(\"../logger\");\nconst logger = logger_1.createLogger(\"Minecraft-Mock-Host\");\nconst ForceErrorStatement = \"!Force Error!\";\n/**\n * Determine whether we emit error for the given code\n *\n * @param {string} code source code to scan\n * @returns error payload if we are emitting error, or null if not\n */\nfunction checkError(code) {\n    if (code.indexOf(ForceErrorStatement) >= 0) {\n        const lines = code.split(\"\\n\");\n        const errorlines = [];\n        lines.forEach((l, i) => {\n            const startCol = l.indexOf(ForceErrorStatement);\n            if (startCol >= 0) {\n                const lineNumber = i + 1;\n                errorlines.push({\n                    context: \"\",\n                    details: `  File \"CodeBuilder Script\", line ${lineNumber}\n  ${l}\n  ${new Array(startCol + 1).join(\" \")}^\n  Error: Explicit Error by ${ForceErrorStatement}\n  `,\n                    line: lineNumber,\n                    summary: `Error: Explicit Error by ${ForceErrorStatement}`\n                });\n            }\n        });\n        return {\n            errors: errorlines,\n            scriptName: \"CodeBuilder Script\"\n        };\n    }\n    else {\n        return null;\n    }\n}\nconst emptyFunction = () => { };\n/**\n * create a mock runtime for testing purpose\n *\n * @returns a mock instance of ipcPython\n */\nconst createIpcPythonMock = () => {\n    logger.log(\"createIpcPythonMock: Starting Mock!\");\n    const eventHandlers = {\n        InitializationComplete: emptyFunction,\n        CompilationCompleted: emptyFunction,\n        ExecutionStarted: emptyFunction,\n        Error: emptyFunction,\n        Completed: emptyFunction\n    };\n    let shouldCancelExecution = false;\n    const mock = {\n        initialize: () => {\n            logger.log(\"Initializing\");\n            setTimeout(() => {\n                eventHandlers.InitializationComplete({});\n                logger.log(\"Initialized\");\n            }, 1000);\n        },\n        execute: (code) => {\n            logger.log(`Executing Code:\\n${code}`);\n            eventHandlers.ExecutionStarted({});\n            shouldCancelExecution = false;\n            // complete after 3 seconds\n            setTimeout(() => {\n                if (shouldCancelExecution) {\n                    eventHandlers.Completed({\n                        details: \"\",\n                        scriptName: \"CodeBuilder Script\",\n                        success: \"Cancelled\"\n                    });\n                    logger.log(\"Cancelled Executing Code\");\n                }\n                else {\n                    const error = checkError(code);\n                    if (error) {\n                        eventHandlers.Error(error);\n                        logger.log(\"Error Executing Code\");\n                    }\n                    else {\n                        eventHandlers.Completed({\n                            details: `Executed Code: ${code}`,\n                            scriptName: \"CodeBuilder Script\",\n                            success: \"Succeeded\"\n                        });\n                        logger.log(\"Completed Executing Code\");\n                    }\n                }\n            }, 1000);\n        },\n        compile: (code) => {\n            logger.log(`Compiling Code:\\n${code}`);\n            setTimeout(() => {\n                const error = checkError(code);\n                if (error) {\n                    eventHandlers.Error(error);\n                    logger.log(\"Error Compiling Code\");\n                }\n                else {\n                    eventHandlers.CompilationCompleted({});\n                    logger.log(\"Completed Compiling Code\");\n                }\n            }, 1000);\n        },\n        cancel: () => {\n            shouldCancelExecution = true;\n            logger.log(\"Mark current execution cancelled\");\n        },\n        on: (eventName, handler) => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            eventHandlers[eventName] = (payload) => handler(eventName, JSON.stringify(payload));\n        },\n        once: (eventName, handler) => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            eventHandlers[eventName] = (payload) => handler(eventName, JSON.stringify(payload));\n        }\n    };\n    return mock;\n};\nexports.createIpcPythonMock = createIpcPythonMock;\n/**\n * mock representation for ipcCodeScreenRenderer\n *\n * @returns {IIpcCodeScreenRenderer} mock of ipcCodeScreenRenderer\n */\nfunction createIpcCodeScreenRenderer() {\n    logger.log(\"Using Mock IPCCodeScreenRederer\");\n    const mock = {\n        dismiss: () => {\n            logger.log(\"MockHost: closing window\");\n        },\n        registerResetCallback: (callback) => {\n            logger.log(`MockHost: registerResetCallback: ${callback}`);\n        },\n        unregisterResetCallback: (callback) => {\n            logger.log(`MockHost: unregisterResetCallback: ${callback}`);\n        },\n        on: (event) => {\n            logger.log(`On event called ${event}`);\n        },\n        removeListener: (event) => {\n            logger.log(`removeListener called ${event}`);\n        },\n        once: (event) => {\n            logger.log(`once called ${event}`);\n        }\n    };\n    return mock;\n}\nexports.createIpcCodeScreenRenderer = createIpcCodeScreenRenderer;\n//# sourceMappingURL=mockRuntime.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cellSettingsProcessor = void 0;\nconst types_1 = require(\"./types\");\nconst cellSettingsProcessor = (cellId, cell, settings) => {\n    let newSettings = settings;\n    // Only change the readonly setting to true when cell's metadata set readonly to true\n    const editorReadOnly = cell.metadata.getIn([types_1.MetadataNamespace, \"readonly\"]);\n    if (editorReadOnly === true && newSettings.editor.readOnly === false) {\n        newSettings = newSettings.setIn([\"editor\", \"readOnly\"], true);\n    }\n    // Check if metadata specify a valid numberOfLines, if yes then we pass that to cell settings\n    const numberOfLinesInEditor = cell.metadata.getIn([types_1.MetadataNamespace, \"numberOfLines\"]);\n    if (typeof numberOfLinesInEditor === \"number\" &&\n        numberOfLinesInEditor > 0 &&\n        numberOfLinesInEditor !== newSettings.editor.numberOfLines) {\n        newSettings = newSettings.setIn([\"editor\", \"numberOfLines\"], numberOfLinesInEditor);\n    }\n    // When metadata specify to hide the cell\n    const hideCell = cell.metadata.getIn([types_1.MetadataNamespace, \"hidden\"]);\n    if (hideCell === true && newSettings.showCell === true) {\n        newSettings = newSettings.setIn([\"showCell\"], false);\n    }\n    return newSettings;\n};\nexports.cellSettingsProcessor = cellSettingsProcessor;\n//# sourceMappingURL=cellSettingsProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.theme = void 0;\nconst core_contract_1 = require(\"@aznb/core-contract\");\nexports.theme = {\n    base: core_contract_1.Themes.Dark,\n    variables: new Map([\n        /*\n         * All Custom CSS Properties from AZNBC Package\n         *\n         * bg: background\n         * fg: foreground\n         */\n        [\"--theme-app-bg\", \"transparent\"],\n        [\"--theme-app-fg\", \"#f3f2f1\"],\n        [\"--theme-app-border\", \"#1b1a19\"],\n        [\"--theme-primary-bg\", \"transparent\"],\n        [\"--theme-primary-bg-hover\", \"transparent\"],\n        [\"--theme-primary-bg-focus\", \"transparent\"],\n        [\"--theme-primary-fg\", \"#f3f2f1\"],\n        [\"--theme-primary-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-primary-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-secondary-bg\", \"#201f1e\"],\n        [\"--theme-secondary-bg-hover\", \"#201f1e\"],\n        [\"--theme-secondary-bg-focus\", \"#201f1e\"],\n        [\"--theme-secondary-fg\", \"#252423\"],\n        [\"--theme-secondary-fg-hover\", \"#292827\"],\n        [\"--theme-secondary-fg-focus\", \"#323130\"],\n        [\"--theme-primary-shadow-hover\", \"0px 0px 6px rgba(0, 0, 0, 0.6)\"],\n        [\"--theme-primary-shadow-focus\", \"box-shadow(0px 0px 8px #000000)\"],\n        [\"--theme-title-bar-bg\", \"#2DFFFE\"],\n        [\"--theme-menu-bg\", \"#3b3a39\"],\n        [\"--theme-menu-bg-hover\", \"#323130\"],\n        [\"--theme-menu-bg-focus\", \"#292827\"],\n        [\"--theme-menu-shadow\", \"var(--theme-primary-shadow-hover)\"],\n        [\"--theme-menu-fg\", \"#f3f2f1\"],\n        [\"--theme-menu-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-menu-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-cell-bg\", \"transparent\"],\n        [\"--theme-cell-shadow-hover\", \"var(--theme-primary-shadow-hover)\"],\n        [\"--theme-cell-shadow-focus\", \"var(--theme-primary-shadow-focus)\"],\n        [\"--theme-cell-vertical-toolbar-button-bg\", \"#323130\"],\n        [\"--theme-cell-vertical-toolbar-button-bg-hover\", \"#484644\"],\n        [\"--theme-cell-vertical-toolbar-button-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-vertical-toolbar-button-fg-hover\", \"#edebe9\"],\n        [\"--theme-cell-state-bar-cell-focused-bg\", \"transparent\"],\n        [\"--theme-cell-state-bar-editor-focused-bg\", \"transparent\"],\n        [\"--theme-cell-state-bar-no-focus-hover-bg\", \"transparent\"],\n        [\"--theme-cell-execute-button-command-mode-bg\", \"#1891e2\"],\n        [\"--theme-cell-execute-button-command-mode-bg-hover\", \"#42a2e2\"],\n        [\"--theme-cell-execute-button-command-mode-fg\", \"#000000\"],\n        [\"--theme-cell-execute-button-command-mode-fg-hover\", \"#000000\"],\n        [\"--theme-cell-execute-button-edit-mode-bg\", \"#66a656\"],\n        [\"--theme-cell-execute-button-edit-mode-bg-hover\", \"#7ab46c\"],\n        [\"--theme-cell-execute-button-edit-mode-fg\", \"#000000\"],\n        [\"--theme-cell-execute-button-edit-mode-fg-hover\", \"#000000\"],\n        [\"--theme-cell-execute-button-hover-bg\", \"#3b3a39\"],\n        [\"--theme-cell-execute-button-hover-bg-hover\", \"#484644\"],\n        [\"--theme-cell-execute-button-hover-fg\", \"#1891e2\"],\n        [\"--theme-cell-execute-button-hover-fg-hover\", \"#1891e2\"],\n        [\"--theme-cell-prompt-bg\", \"#201f1e\"],\n        [\"--theme-cell-prompt-bg-hover\", \"#292827\"],\n        [\"--theme-cell-prompt-bg-focus\", \"#3b3a39\"],\n        [\"--theme-cell-prompt-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-prompt-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-cell-prompt-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-cell-toolbar-bg\", \"#201f1e\"],\n        [\"--theme-cell-toolbar-bg-hover\", \"#323130\"],\n        [\"--theme-cell-toolbar-bg-focus\", \"#3b3a39\"],\n        [\"--theme-cell-toolbar-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-toolbar-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-cell-toolbar-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-cell-menu-bg\", \"#252423\"],\n        [\"--theme-cell-menu-bg-hover\", \"#323130\"],\n        [\"--theme-cell-menu-bg-focus\", \"#3b3a39\"],\n        [\"--theme-cell-menu-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-menu-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-cell-menu-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-cell-menu-linktext\", \"0px solid\"],\n        [\"--theme-cell-input-bg\", \"#1e1e1e\"],\n        [\"--theme-cell-input-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-output-bg\", \"transparent\"],\n        [\"--theme-cell-output-bg-hover\", \"transparent\"],\n        [\"--theme-cell-output-bg-focus\", \"transparent\"],\n        [\"--theme-cell-output-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-creator-bg\", \"#252423\"],\n        [\"--theme-cell-creator-bg-hover\", \"#323130\"],\n        [\"--theme-cell-creator-bg-focus\", \"#3b3a39\"],\n        [\"--theme-cell-creator-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-creator-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-cell-creator-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-error-fg\", \"hsl(0, 100%, 95%)\"],\n        [\"--theme-error-bg\", \"hsl(0, 100%, 30%)\"],\n        [\"--theme-pager-bg\", \"#111\"],\n        [\"--theme-cell-border-width\", \"0\"],\n        [\"--theme-cell-input-border-width\", \"1px\"],\n        [\"--theme-cell-input-border-color\", \"#323130\"],\n        [\"--theme-cell-input-active-border-width\", \"1px\"],\n        [\"--prompt-width\", \"0px\"]\n    ]),\n    monacoTheme: {\n        base: \"vs-dark\",\n        inherit: true,\n        rules: [],\n        colors: {\n            // We want Monaco background to use the same background for our themes.\n            // Setting the background to transparent\n            \"editor.background\": \"#00000000\"\n        }\n    }\n};\n//# sourceMappingURL=theme.js.map","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_dialogClassName_editor\":\"Editor_modal_dialogClassName_editor__1XGG2\",\"editor_body\":\"Editor_editor_body__3EeFS\",\"edit_panel_monaco_frame\":\"Editor_edit_panel_monaco_frame__2Gr-C\",\"edit_panel_buttons\":\"Editor_edit_panel_buttons__2pQXV\",\"edit_panel_output_wrapper\":\"Editor_edit_panel_output_wrapper__2oTl_\",\"edit_panel_button\":\"Editor_edit_panel_button__1jkCm\",\"edit_panel_results_container_hidden\":\"Editor_edit_panel_results_container_hidden__p8kfw\",\"edit_panel_results_container_shown\":\"Editor_edit_panel_results_container_shown__34mV6\",\"edit_panel_close_button\":\"Editor_edit_panel_close_button__22Duf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"output_message_root\":\"OutputPanel_output_message_root__3BbO4\",\"output_message_root__open\":\"OutputPanel_output_message_root__open__3AOBJ\",\"scaleopen\":\"OutputPanel_scaleopen__1uteu\",\"output_message_root__closed\":\"OutputPanel_output_message_root__closed__3fsY3\",\"scaleclosed\":\"OutputPanel_scaleclosed__4PMv-\",\"output_message_container\":\"OutputPanel_output_message_container__1-7lK\",\"none\":\"OutputPanel_none__3GHA7\",\"alert\":\"OutputPanel_alert__3nQyY\",\"reveal\":\"OutputPanel_reveal__zvhr1\",\"standard\":\"OutputPanel_standard__3VNcs\",\"success\":\"OutputPanel_success__1A9JB\",\"error\":\"OutputPanel_error__RrpRT\",\"running\":\"OutputPanel_running__1GzpO\",\"warning\":\"OutputPanel_warning__4MMhf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"libraries-list-accordion_wrapper__eDGpj\"};","import { NotebookParentElementId } from \"./types\";\nimport AzureNotebooks from \"@aznb/extension-contract\";\nimport MinecraftExtension, { createExtension, mapLocaleToAznbLocale } from \"extension-minecraft\";\nimport { AznbbTranslations, IIpcTelemetry, LocalesType } from \"core-library\";\nimport { getIpcTelemetry } from \"./telemetry\";\nimport { INotebook } from \"@aznb/core-contract\";\n\n// Load Notebook on specified id\nexport class AzureNotebookLoader {\n  private isInitialized: boolean;\n  private rootElementId: string;\n  private telemetryLogger: IIpcTelemetry;\n  private aznbTranslations: AznbbTranslations;\n  private locale: LocalesType;\n  private loadedNotebook: INotebook | null = null;\n\n  constructor(translations: AznbbTranslations, locale: LocalesType, rootElementId: string = NotebookParentElementId) {\n    this.rootElementId = rootElementId;\n    this.locale = locale;\n    this.isInitialized = false;\n    this.aznbTranslations = translations;\n    this.telemetryLogger = getIpcTelemetry();\n  }\n\n  public async initialize(): Promise<void> {\n    MinecraftExtension.setLocStrings(this.locale, this.aznbTranslations);\n    AzureNotebooks.registerExtension(MinecraftExtension);\n\n    return AzureNotebooks.init({\n      resourceUrl: \"https://minecraftresource.notebooks.azure.net\",\n      userHasGivenCookieConsent: false,\n      lazyLoadEditor: false,\n      getResourceIdAndKey: () =>\n        Promise.resolve({\n          notebookResourceId: \"\",\n          notebookResourceKey: \"\"\n        })\n    }).then(() => {\n      this.isInitialized = true;\n    });\n  }\n\n  public async loadComponent(filepath: string, disableAutoSave: boolean): Promise<INotebook> {\n    if (!this.isInitialized) {\n      throw new Error(\"Initialize needs to be called before proceeding.\");\n    }\n\n    this.loadedNotebook = await AzureNotebooks.loadNotebook({\n      parentElementId: this.rootElementId,\n      filePath: filepath, //BUG: filepath must be a url\n      getNotebookStorageOptions: () =>\n        Promise.resolve({\n          saveAs: (content) => Promise.resolve(\"dummypath\")\n        }),\n      config: {\n        disableAutoSave: disableAutoSave,\n        disableOutputIframe: true,\n        showSurveyBar: false,\n        locale: mapLocaleToAznbLocale(this.locale)\n      },\n      extensions: [\"minecraft\"]\n    });\n\n    // This token info is overridden by the extension to use the ipc protocol from Minecraft\n    // Example compute setting: local jupyter host with token auth\n    const compute = {\n      name: \"Local\",\n      targetUrl: \"http://localhost:8888\",\n      getAuthSettings: () =>\n        Promise.resolve({\n          authType: \"token\",\n          token: \"token to access your local jupyter host\"\n        }),\n      shouldMount: false\n    };\n\n    this.loadedNotebook.setCompute({ targetSettings: compute });\n    return this.loadedNotebook;\n  }\n\n  public stopNotebookCode(): void {\n    this.loadedNotebook?.kernels.interrupt();\n  }\n\n  public dispose(): void {\n    this.loadedNotebook?.kernels?.interrupt();\n    this.loadedNotebook?.dispose();\n  }\n}\n","export const NotebookParentElementId = \"notebook-container\";\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport declare namespace TelemetryEvents {\n  export interface IComponent {\n    id: string;\n    timeElapsed: number;\n    details?: { notebookCount: number };\n  }\n\n  export interface IComponents {\n    components: IComponent[];\n  }\n}\n","import { ILessonData, AdditionalLanguages, LessonData, addLessonLibrariesToLocalStore } from \"core-library\";\n\n/**\n * Check if language is supported\n *\n * @param lang - language to check\n * @param additionalLanguages - language packs to look for the language\n */\nexport function defaultIsLanguageSupported(lang: string, additionalLanguages: AdditionalLanguages) {\n  return !!additionalLanguages && additionalLanguages.includes(lang);\n}\n\nexport type GetLessonDataFunctor = () => Promise<ILessonData>;\n\n/**\n * Retrieves the lesson.json from the given url.\n * We currently don't cache the lesson.json.\n *\n * @param url - url\n * @param bypassCache -bypassCache\n */\nexport async function GetLessonData(url: string, bypassCache?: boolean): Promise<ILessonData> {\n  const httpOptions: RequestInit = {\n    method: \"GET\",\n    headers: Object.create(null),\n    mode: \"cors\"\n  };\n  try {\n    const response = await fetch(url, httpOptions);\n    const data = LessonData.decode(await response.json());\n    if (data._tag === \"Right\") {\n      addLessonLibrariesToLocalStore(data.right.libraries);\n      return { ...data.right, isLanguageSupported: defaultIsLanguageSupported };\n    } else {\n      throw new Error(\"Invalid LessonData. title, description and pages are all required values.\");\n    }\n  } catch (error) {\n    console.error(`Failed to get lesson data: ${error}`);\n    throw error;\n  }\n}\n","import React from \"react\";\nimport styles from \"./modals.module.scss\";\ninterface IProps {\n  title: string;\n  handleOnClose: () => void;\n  displayLockIcon?: boolean;\n}\nconst ModalTitle = ({ title, handleOnClose, displayLockIcon }: IProps) => {\n  return (\n    <div className=\"modal-header\" data-testid=\"libraries-modal-title\">\n      <button type=\"button\" className=\"print hide\" aria-label=\"Print\">\n        <i className=\"icon icon_close\"></i>\n      </button>\n\n      <div className=\"modal-title-flagged-space\">\n        {displayLockIcon && (\n          <div className=\"modal-title-flag-readonly\">\n            <i className=\"pa2-icon pa2_lock\"></i>\n          </div>\n        )}\n        <h1 className={`modal-title ${styles.modal_title}`}>{title}</h1>\n      </div>\n\n      <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={handleOnClose}>\n        <i className=\"icon icon_close\"></i>\n      </button>\n    </div>\n  );\n};\nModalTitle.displayName = \"ModalTitle\";\nexport { ModalTitle };\n","import { AZNB_CROSS_CELL_CRUD_STATE } from \"core-library\";\nimport React, { useCallback } from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\nimport { useTranslation } from \"react-i18next\";\nimport { useStore } from \"../../../store\";\nimport { translate } from \"../../../utils/i18next.utils\";\nimport styles from \"./modals.module.scss\";\nimport { ModalTitle } from \"./ModalTitle\";\ninterface IProps {\n  stateSlice: AZNB_CROSS_CELL_CRUD_STATE;\n}\nconst DeleteConformation = ({ stateSlice }: IProps) => {\n  const { t: fn } = useTranslation();\n  const t = translate(fn);\n  const { deleteLibrary, setCrossCellState } = useStore((state) => ({\n    deleteLibrary: state.deleteLibrary,\n    setCrossCellState: state.setCrossCellState\n  }));\n\n  const handleOnClose = useCallback(() => {\n    const { diff, currentBaseCodeCellId, attachedLibraryData } = stateSlice;\n    setCrossCellState({\n      kind: \"librariesList\",\n      displayedModalWindow: \"librariesList\",\n      diff,\n      currentBaseCodeCellId,\n      attachedLibraryData\n    });\n  }, [setCrossCellState, stateSlice]);\n  const onDelete = () => {\n    deleteLibrary(stateSlice.currentLibraryItem.id, stateSlice);\n  };\n\n  return (\n    <Modal\n      data-testid=\"library-delete-conformation-modal\"\n      show={true}\n      onHide={handleOnClose}\n      backdrop=\"static\"\n      size={\"lg\"}\n      contentClassName={\"__notch-width-padding\"}\n      dialogClassName={styles.modal_dialogClassName}\n      centered\n    >\n      <Modal.Header bsPrefix=\"-\">\n        <ModalTitle handleOnClose={handleOnClose} title={t(\"AznblpLibraryDeleteWindowTitle\")} />\n      </Modal.Header>\n      <Modal.Body data-testid=\"library-delete-conformation-modal-body\">\n        {`${t(\"AznblpLibraryDeleteWindowMsgPrefix\")}${stateSlice.currentLibraryItem.name}${t(\n          \"AznblpLibraryDeleteWindowMsgSuffix\"\n        )}`}\n      </Modal.Body>\n      <Modal.Footer bsPrefix=\"-\" className={styles.modal_footer_wrapper}>\n        <Button\n          data-testid=\"library-delete-conformation-modal-cancel-button\"\n          onClick={handleOnClose}\n          bsPrefix=\"-\"\n          className={`__ButtonGrey ${styles.modal_footer_button}`}\n        >\n          {t(\"AznblpNewDiagCancelButton\")}\n        </Button>\n        <Button\n          bsPrefix=\"-\"\n          data-testid=\"library-delete-conformation-modal-delete-button\"\n          className={`__ButtonGrey ${styles.modal_footer_button}`}\n          onClick={onDelete}\n        >\n          {t(\"AznblpDeleteBtn\")}\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n};\n\nif (process.env.NODE_ENV === \"development\") {\n  DeleteConformation.whyDidYouRender = true;\n}\n\nexport { DeleteConformation };\n","import React from \"react\";\nimport { RootState, ResultMessages } from \"core-library\";\nimport { useTranslation } from \"react-i18next\";\nimport { translate } from \"../../../../utils/i18next.utils\";\nimport styles from \"./index.module.scss\";\n\ntype IProps = RootState[\"librarySourceEditorOutputPanelData\"];\n\n// Message Panel State\nconst MPS = {\n  OPEN: 1,\n  CLOSE: 2\n} as const;\n\nconst OutputPanel = ({ isRunning, output }: IProps) => {\n  let messagePanelState: 1 | 2 = MPS.CLOSE;\n  const { t: fn } = useTranslation();\n  const t = translate(fn);\n  let message = \"\";\n  let stateClass = styles.none;\n  if (isRunning) {\n    message = t(\"AznbbRunInProcess\");\n    stateClass = styles.running;\n    messagePanelState = MPS.OPEN;\n  } else if (output) {\n    if (output.output_type === \"execute_result\" && typeof output.data[\"text/html\"] === \"string\") {\n      message = output.data[\"text/html\"] || \"\";\n      if (message === ResultMessages.ExecutionSucceeds) {\n        message = t(\"AznbbRunSuccessful\");\n        stateClass = styles.success;\n      } else if (message === ResultMessages.ExecutionCancelled) {\n        message = t(\"AznbbRunCancelled\");\n        stateClass = styles.warning;\n      }\n      messagePanelState = MPS.OPEN;\n    } else if (output.output_type === \"error\") {\n      message = t(\"AznbbErrorRun\") + \" \" + output.evalue;\n      message = output.evalue;\n      stateClass = styles.error;\n\n      messagePanelState = MPS.OPEN;\n    } else {\n      // We shouldn't fall into this branch, or it could be a bug\n      console.error(`Unexpected output_type from output:'${JSON.stringify(output)}'`);\n    }\n  } else {\n    messagePanelState = MPS.CLOSE;\n  }\n\n  let panelStateClass = \"\";\n  switch (messagePanelState) {\n    case MPS.OPEN:\n      panelStateClass = styles.output_message_root__open;\n      break;\n    case MPS.CLOSE:\n      panelStateClass = styles.output_message_root__closed;\n      break;\n    default:\n      console.error(\"Unhandled messagePanelState: \" + messagePanelState);\n  }\n\n  return (\n    <div className={`${styles.output_message_root}  ${panelStateClass}`}>\n      <hr />\n      <div className={`${styles.output_message_container} ${stateClass}`}>{message}</div>\n    </div>\n  );\n};\n\nif (process.env.NODE_ENV === \"development\") {\n  OutputPanel.whyDidYouRender = true;\n}\n\nexport { OutputPanel };\n","import React from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport { withTranslation, WithTranslation } from \"react-i18next\";\nimport { AzureNotebookLoader } from \"../../../../azureNotebookLoader\";\nimport { getAznbTranslations, translate } from \"../../../../utils/i18next.utils\";\nimport { ModalTitle } from \"../ModalTitle\";\nimport styles from \"./index.module.scss\";\nimport { appStore, AZNB_CROSS_CELL_CRUD_STATE, RootState } from \"core-library\";\nimport { OutputPanel } from \"../OutputPanel\";\n\ninterface IProps extends WithTranslation {\n  stateSlice: AZNB_CROSS_CELL_CRUD_STATE;\n}\ntype IState = {\n  librarySourceEditorOutputPanelData: RootState[\"librarySourceEditorOutputPanelData\"];\n  panelStatus: \"shown\" | \"hidden\";\n};\n\nclass EditorModalComponent extends React.PureComponent<IProps, IState> {\n  private aznbLoader: AzureNotebookLoader;\n  private unsubscribe: null | ReturnType<typeof appStore[\"subscribe\"]> = null;\n  constructor(props: IProps) {\n    super(props);\n    this.state = { librarySourceEditorOutputPanelData: { output: null, isRunning: false }, panelStatus: \"hidden\" };\n    const { aznbTranslations, locale } = getAznbTranslations(this.props.t);\n    this.aznbLoader = new AzureNotebookLoader(aznbTranslations, locale, \"editLibraryAZNB\");\n  }\n  async componentDidMount() {\n    await this.aznbLoader.initialize();\n    let libraryPath = \"lessons/EmptyLib/lib.ipynb\";\n    const index = window.location.href.search(\"index.html\");\n\n    libraryPath =\n      index > 0\n        ? `${window.location.href.substring(0, index)}${libraryPath}`\n        : `${window.location.origin}/${libraryPath}`;\n\n    await this.aznbLoader.loadComponent(libraryPath, true);\n    this.unsubscribe = appStore.subscribe(\n      (librarySourceEditorOutputPanelData: IState[\"librarySourceEditorOutputPanelData\"]) => {\n        this.setState({\n          librarySourceEditorOutputPanelData,\n          panelStatus:\n            this.state.panelStatus === \"hidden\" && librarySourceEditorOutputPanelData.isRunning\n              ? \"shown\"\n              : this.state.panelStatus\n        });\n      },\n      (state) => state.librarySourceEditorOutputPanelData\n    );\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe?.();\n    this.aznbLoader.dispose();\n  }\n  handleOnClose = () => {\n    const { diff, currentBaseCodeCellId, attachedLibraryData } = this.props.stateSlice;\n    appStore.getState().setCrossCellState({\n      kind: \"librariesList\",\n      displayedModalWindow: \"librariesList\",\n      diff,\n      currentBaseCodeCellId,\n      attachedLibraryData\n    });\n  };\n  private handleOnRename = () =>\n    appStore.getState().send({\n      action: \"OPEN_LIBRARY_RENAME_WINDOW\"\n    });\n  private handleOnSave = () =>\n    appStore.getState().send({\n      action: \"LIBRARY_UPDATE\"\n    });\n  private hidePanel = () => {\n    this.setState({\n      panelStatus: \"hidden\"\n    });\n  };\n\n  private handleOnTest = () => {\n    appStore.getState().send({\n      action: \"TEST_LIBRARY_CODE\"\n    });\n  };\n  private translate = translate(this.props.t);\n  render() {\n    const { stateSlice } = this.props;\n    const {\n      librarySourceEditorOutputPanelData: { isRunning, output },\n      panelStatus\n    } = this.state;\n    return (\n      <Modal\n        show={true}\n        onHide={this.handleOnClose}\n        size={\"lg\"}\n        dialogClassName={styles.modal_dialogClassName_editor}\n        contentClassName={\"__notch-width-padding\"}\n        backdrop=\"static\"\n        centered\n        data-testid=\"library-edit-modal\"\n      >\n        <Modal.Header bsPrefix=\"-\">\n          <ModalTitle\n            handleOnClose={this.handleOnClose}\n            title={stateSlice.currentLibraryItem.name}\n            displayLockIcon={!!stateSlice.currentLibraryItem.readonly}\n          />\n        </Modal.Header>\n        <Modal.Body bsPrefix=\"-\" className={styles.editor_body}>\n          <div className={styles.edit_panel_monaco_frame}>\n            <div id=\"editLibraryAZNB\" />\n          </div>\n          <div className={styles.edit_panel_output_wrapper}>\n            <div\n              className={`${styles.edit_panel_results_container_hidden}  ${\n                panelStatus === \"shown\" ? styles.edit_panel_results_container_shown : \"shown\"\n              }`}\n            >\n              {panelStatus === \"shown\" && (\n                <>\n                  <OutputPanel output={output} isRunning={isRunning} />\n                  <button\n                    aria-label=\"Dismiss\"\n                    className={styles.edit_panel_close_button}\n                    disabled={isRunning}\n                    onClick={this.hidePanel}\n                  >\n                    <i className=\"icon icon_close\" aria-hidden=\"true\"></i>\n                  </button>\n                </>\n              )}\n            </div>\n          </div>\n          <div className={styles.edit_panel_buttons}>\n            <button\n              data-testid=\"library-test-btn\"\n              onClick={this.handleOnTest}\n              disabled={isRunning}\n              className={`__ButtonGrey ${styles.edit_panel_button}`}\n            >\n              {this.translate(\"AznblpTestBtn\")}\n            </button>\n            <button\n              disabled={isRunning}\n              data-testid=\"library-rename-btn\"\n              onClick={this.handleOnRename}\n              className={`__ButtonGrey ${styles.edit_panel_button}`}\n            >\n              {this.translate(\"AznblpRenameBtn\")}\n            </button>\n            <button\n              data-testid=\"library-done-btn\"\n              disabled={isRunning}\n              onClick={this.handleOnSave}\n              className={`__ButtonGrey ${styles.edit_panel_button}`}\n            >\n              {this.translate(\"AznblpSaveBtn\")}\n            </button>\n          </div>\n        </Modal.Body>\n      </Modal>\n    );\n  }\n}\nexport const EditorModal = withTranslation()(EditorModalComponent);\n","import React from \"react\";\nimport \"./index.scss\";\ntype Props = React.HTMLProps<HTMLInputElement>;\n\nconst Checkbox = (props: Props) => {\n  return (\n    <label data-testid=\"libraries-modal-list-checkbox-label\" className={\"check option\"}>\n      <input data-testid=\"libraries-modal-list-checkbox \" className=\"check__input\" type=\"checkbox\" {...props} />\n      <span className=\"check__box\"></span>\n    </label>\n  );\n};\nCheckbox.displayName = \"Mc-Checkbox\";\nexport { Checkbox };\n","import { LibraryProviderItem } from \"core-library\";\nimport React from \"react\";\nimport { useStore } from \"../../../store\";\nimport { Checkbox } from \"../../checkbox\";\nconst style: React.CSSProperties = {\n  overflow: \"hidden\"\n};\ninterface IProps {\n  item: LibraryProviderItem;\n  attachedLibraryData: Record<string, boolean>;\n}\nconst LibrariesListItemWrapper = ({ item, children }: IProps & { children: React.ReactNode }) => {\n  return (\n    <>\n      {item.predefined ? (\n        item.readonly ? (\n          <div\n            className=\"mc_ListItem\"\n            data-bold-title\n            data-controls-deletable\n            data-controls-no-delete\n            data-controls-editor\n            data-controls-readonly\n          >\n            {children}\n          </div>\n        ) : (\n          <div\n            className=\"mc_ListItem\"\n            data-bold-title\n            data-controls-deletable\n            data-controls-no-delete\n            data-controls-editor\n          >\n            {children}\n          </div>\n        )\n      ) : (\n        <div className=\"mc_ListItem\" data-controls-deletable data-controls-editor>\n          {children}\n        </div>\n      )}\n    </>\n  );\n};\n\nconst LibrariesListItem = ({ item, attachedLibraryData }: IProps) => {\n  const { setAttachedLibraries, setCrossCellState, crossCellState } = useStore((state) => ({\n    setAttachedLibraries: state.setAttachedLibraries,\n    setCrossCellState: state.setCrossCellState,\n    crossCellState: state.crossCellState\n  }));\n\n  function handleDeleteIconClick() {\n    if (crossCellState.kind === \"librariesList\") {\n      setCrossCellState({\n        kind: \"crud\",\n        displayedModalWindow: \"deleteLibrary\",\n        diff: crossCellState.diff,\n        currentBaseCodeCellId: crossCellState.currentBaseCodeCellId,\n        attachedLibraryData,\n        currentLibraryItem: item\n      });\n    }\n  }\n  const editOrViewIconClick = () => {\n    if (crossCellState.kind === \"librariesList\") {\n      setCrossCellState({\n        kind: \"crud\",\n        displayedModalWindow: \"editLibrarySource\",\n        diff: crossCellState.diff,\n        currentBaseCodeCellId: crossCellState.currentBaseCodeCellId,\n        attachedLibraryData,\n        currentLibraryItem: item\n      });\n    }\n  };\n  const onChangeLibrarySelection = (evt: React.FormEvent<HTMLInputElement>) => {\n    if (crossCellState.kind === \"librariesList\") {\n      setAttachedLibraries(item.id, evt.currentTarget.checked, crossCellState);\n    }\n  };\n\n  return (\n    <LibrariesListItemWrapper attachedLibraryData={attachedLibraryData} item={item}>\n      <div className=\"mc_ListItem--TitleBar\">\n        <Checkbox\n          disabled={attachedLibraryData[item.id]}\n          onChange={onChangeLibrarySelection}\n          defaultChecked={attachedLibraryData[item.id] !== undefined}\n        />\n        {attachedLibraryData[item.id]}\n        <div className=\"mc_ListItem--Label\">{item.name}</div>\n        <div className=\"mc_ListItem--ControlsRight\" style={style}>\n          <div className=\"mc_ListItem--IconButton mc_ListItem--ViewBtn\" onClick={editOrViewIconClick}>\n            <i className=\"pa2-icon pa2_search\"></i>\n          </div>\n          <div className=\"mc_ListItem--IconButton mc_ListItem--EditBtn\" onClick={editOrViewIconClick}>\n            <i className=\"pa2-icon pa2_edit_short\"></i>\n          </div>\n          <div className=\"mc_ListItem--IconButton mc_ListItem--DeleteBtn\" onClick={handleDeleteIconClick}>\n            <i className=\"pa2-icon pa2_trash_default\"></i>\n          </div>\n          <div className=\"mc_ListItem--IconFlag mc_ListItem--LockedFlag\">\n            <i className=\"pa2-icon pa2_lock\"></i>\n          </div>\n        </div>\n      </div>\n    </LibrariesListItemWrapper>\n  );\n};\n\nexport { LibrariesListItem };\n","import React, { memo } from \"react\";\nimport { useStore } from \"../../../store\";\n\nimport { LibrariesFilterParameter } from \"core-library\";\nimport { LibrariesListItem } from \"./librariesListItem\";\nimport { useTranslation } from \"react-i18next\";\nimport { translate } from \"../../../utils/i18next.utils\";\ninterface IProps {\n  filter: LibrariesFilterParameter;\n}\nconst listItemStyle: React.CSSProperties = { textAlign: \"center\" };\nconst LibrariesList = memo(({ filter }: IProps) => {\n  const { t: fn } = useTranslation();\n  const t = translate(fn);\n  const { getFilteredLibraries, crossCellState } = useStore((state) => ({\n    getFilteredLibraries: state.getFilteredLibraries,\n    crossCellState: state.crossCellState\n  }));\n  const libraries = getFilteredLibraries(filter);\n  return (\n    <>\n      {crossCellState.kind === \"librariesList\" &&\n        (!libraries.length ? (\n          <div className=\"mc_ListItem--TitleBar\">\n            <div style={listItemStyle} className=\"mc_ListItem--Label __Font_NotoSans_Italic\">\n              {t(\"AznblpCodeLibraryMyLibrariesEmpty\")}\n            </div>\n          </div>\n        ) : (\n          <div>\n            {libraries.map((item) => (\n              <LibrariesListItem item={item} key={item.id} attachedLibraryData={crossCellState.attachedLibraryData} />\n            ))}\n          </div>\n        ))}\n    </>\n  );\n});\nLibrariesList.displayName = \"LibrariesList\";\nexport { LibrariesList };\n","import React, { memo, useContext } from \"react\";\nimport { AccordionContext } from \"react-bootstrap\";\nimport { useAccordionToggle } from \"react-bootstrap/AccordionToggle\";\nimport { useStore } from \"../../../store\";\n\ninterface IProps {\n  title: string;\n  accordionKey: 0 | 1;\n  eventKey: string;\n  callback?: (eventKey: string) => void;\n}\nconst commonClasses = \"mc_ExpanderBox mc_ExpanderBox__Dark __NoMargin\";\nconst AccordionHeader = memo(({ title, eventKey, callback, accordionKey }: IProps) => {\n  const { toggleAccordionsActiveKey } = useStore((state) => ({\n    toggleAccordionsActiveKey: state.toggleAccordionsActiveKey\n  }));\n  const currentEventKey = useContext(AccordionContext);\n  const decoratedOnClick = useAccordionToggle(eventKey, () => {\n    toggleAccordionsActiveKey(accordionKey);\n    return callback && callback(eventKey);\n  });\n  const currentClasses = currentEventKey === eventKey ? `${commonClasses}  mc_ExpanderBox__Open` : commonClasses;\n\n  return (\n    <div className={currentClasses} data-main-editor>\n      <div className=\"mc_ExpanderBox--TitleBar\">\n        <div className=\"mc_ExpanderBox--ToggleArrow\">\n          <i className=\"icon icon_chevron-down\" onClick={decoratedOnClick}></i>\n        </div>\n        <div className=\"mc_ExpanderBox--Label\">{title}</div>\n\n        <div className=\"mc_ExpanderBox--ControlsRight\">\n          <div className=\"mc_ExpanderBox--IconFlag readOnlyFlag\">\n            <i className=\"pa2-icon pa2_lock\"></i>\n          </div>\n          <div className=\"mc_ExpanderBox--IconButton moveUpBtn\">\n            <i className=\"pa2-icon pa2_arrow_up__7x7\"></i>\n          </div>\n          <div className=\"mc_ExpanderBox--IconButton moveDownBtn\">\n            <i className=\"pa2-icon pa2_arrow_down__7x7\"></i>\n          </div>\n          <div className=\"mc_ExpanderBox--IconButton remove-CloseBtn\">\n            <i className=\"pa2-icon pa2_x-pixel__7x7\"></i>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n});\nAccordionHeader.displayName = \"AccordionHeader\";\nexport { AccordionHeader };\n","import { LibrariesFilterParameter } from \"core-library\";\nimport React, { memo } from \"react\";\nimport { Accordion, Card } from \"react-bootstrap\";\nimport { useStore } from \"../../../store\";\nimport { LibrariesList } from \"../../user-libraries-components/libraries-list\";\nimport { AccordionHeader } from \"./accordionHeader\";\nimport styles from \"./libraries-list-accordion.module.scss\";\nexport interface IProps {\n  title: string;\n  filter: LibrariesFilterParameter;\n  accordionKey: 0 | 1;\n}\nconst getDefaultActiveKey = (input: boolean) => (input ? \"1\" : \"0\");\nconst LibrariesListAccordion = memo(({ title, filter, accordionKey }: IProps) => {\n  const { accordionsActiveKeys } = useStore((state) => ({\n    accordionsActiveKeys: state.accordionsActiveKeys\n  }));\n  return (\n    <Accordion\n      defaultActiveKey={\n        filter === \"predefined\"\n          ? getDefaultActiveKey(accordionsActiveKeys[0])\n          : getDefaultActiveKey(accordionsActiveKeys[1])\n      }\n      bsPrefix=\"-\"\n    >\n      <Card bsPrefix=\"-\" className={styles.wrapper}>\n        <AccordionHeader eventKey={\"1\"} title={title} accordionKey={accordionKey} />\n        <Accordion.Collapse eventKey=\"1\">\n          <LibrariesList filter={filter} />\n        </Accordion.Collapse>\n      </Card>\n    </Accordion>\n  );\n});\nLibrariesListAccordion.displayName = \"LibrariesListAccordion\";\nexport { LibrariesListAccordion };\n","import React, { memo, useCallback } from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\nimport { ModalTitle } from \"./ModalTitle\";\nimport styles from \"./modals.module.scss\";\nimport { useStore } from \"../../../store\";\nimport { LibrariesListAccordion } from \"../libraries-list-accordion\";\nimport { LibrariesList } from \"../libraries-list\";\nimport { useTranslation } from \"react-i18next\";\nimport { translate } from \"../../../utils/i18next.utils\";\n\nconst LibrariesModal = memo(() => {\n  const { t: fn } = useTranslation();\n  const t = translate(fn);\n\n  const { crossCellState, send, setCrossCellState, getFilteredLibraries } = useStore((state) => ({\n    crossCellState: state.crossCellState,\n    send: state.send,\n    setCrossCellState: state.setCrossCellState,\n    getFilteredLibraries: state.getFilteredLibraries\n  }));\n\n  const handleOnDone = () => {\n    if (crossCellState.kind === \"librariesList\" && Object.values(crossCellState.diff).length) {\n      send({\n        action: \"ADD_REMOVE_CONNECTED_LIBRARIES_TO_BASE_CELL\",\n        activeAznbCellId: crossCellState.currentBaseCodeCellId,\n        update: crossCellState.diff\n      });\n    }\n\n    setCrossCellState({ kind: \"idle\", displayedModalWindow: \"none\" });\n  };\n\n  const handleOnClose = useCallback(() => {\n    setCrossCellState({ kind: \"idle\", displayedModalWindow: \"none\" });\n  }, []);\n\n  const handleCreateNew = () => {\n    if (crossCellState.kind === \"librariesList\") {\n      setCrossCellState({\n        kind: \"crud\",\n        displayedModalWindow: \"upsertLibraryName\",\n        diff: crossCellState.diff,\n        attachedLibraryData: crossCellState.attachedLibraryData,\n        currentLibraryItem: { id: \"\", name: \"\", timestamp: 0 },\n        currentBaseCodeCellId: crossCellState.currentBaseCodeCellId\n      });\n    }\n  };\n\n  return (\n    <Modal\n      data-testid=\"libraries-list-modal\"\n      show={true}\n      onHide={handleOnClose}\n      backdrop=\"static\"\n      size={\"lg\"}\n      contentClassName={\"__notch-width-padding\"}\n      dialogClassName={styles.modal_dialogClassName}\n      centered\n    >\n      <Modal.Header bsPrefix=\"-\" className={styles.library_list_modal_header}>\n        <ModalTitle handleOnClose={handleOnClose} title={t(\"AznblpCodeLibraryWindowTitle\")} />\n      </Modal.Header>\n      <Modal.Body bsPrefix=\"-\" className={`${styles.library_list_modal_body} modal-body`}>\n        <div className={styles.library_list_wrapper}>\n          <p data-testid=\"libraries-list-modal-body-text\" className={styles.library_list_modal_body_title}>\n            {t(\"AznblpCodeLibraryWindowMsg\")}\n          </p>\n          {!getFilteredLibraries(\"predefined\").length ? (\n            <LibrariesList filter={\"custom\"} />\n          ) : (\n            <div className={styles.library_list_accordion}>\n              <LibrariesListAccordion\n                title={t(\"AznblpCodeLibraryLessonLibraries\")}\n                accordionKey={0}\n                filter={\"predefined\"}\n              />\n              <LibrariesListAccordion title={t(\"AznblpCodeLibraryMyLibraries\")} accordionKey={1} filter={\"custom\"} />\n            </div>\n          )}\n        </div>\n      </Modal.Body>\n      <Modal.Footer bsPrefix=\"-\" className={styles.modal_footer_wrapper}>\n        <Button\n          data-testid=\"libraries-list-modal-new-file-button\"\n          bsPrefix=\"-\"\n          className={`__ButtonGrey ${styles.modal_footer_button}`}\n          onClick={handleCreateNew}\n        >\n          {t(\"AznblpCreateNewBtn\")}\n        </Button>\n\n        <Button\n          data-testid=\"libraries-list-modal-done-button\"\n          bsPrefix=\"-\"\n          onClick={handleOnDone}\n          className={`__ButtonGrey ${styles.modal_footer_button}`}\n        >\n          {t(\"AznblpDoneBtn\")}\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n});\nLibrariesModal.displayName = \"LibrariesModal\";\nexport { LibrariesModal };\n","import React, { useCallback, useState } from \"react\";\nimport { Button, Form, FormControlProps, Modal } from \"react-bootstrap\";\nimport { useStore } from \"../../../store\";\nimport { ModalTitle } from \"./ModalTitle\";\nimport styles from \"./modals.module.scss\";\nimport {\n  AZNB_CROSS_CELL_CRUD_STATE,\n  AZNB_CROSS_CELL_LIBRARIES_LIST_STATE,\n  UpsertLibraryNameParameter\n} from \"core-library\";\nimport { useTranslation } from \"react-i18next\";\nimport { translate } from \"../../../utils/i18next.utils\";\ninterface IProps {\n  stateSlice: AZNB_CROSS_CELL_CRUD_STATE;\n}\nconst LibraryName = ({ stateSlice }: IProps) => {\n  const { t: fn } = useTranslation();\n  const t = translate(fn);\n  const { upsertLibraryName, getFilteredLibraries, setCrossCellState } = useStore((state) => ({\n    upsertLibraryName: state.upsertLibraryName,\n    getFilteredLibraries: state.getFilteredLibraries,\n    setCrossCellState: state.setCrossCellState\n  }));\n\n  const [libraryName, setLibraryName] = useState(stateSlice.currentLibraryItem.name);\n  const [showDuplicateNameMsg, setShowDuplicateNameMsg] = useState(false);\n\n  const renameAddLibrary = () => {\n    if (libraryName.length > 0) {\n      const check = getFilteredLibraries(\"all\").find(\n        (library) => library.name.toLocaleLowerCase() === libraryName.toLowerCase().trim()\n      );\n\n      if (check) {\n        setShowDuplicateNameMsg(true);\n      } else {\n        const { currentLibraryItem } = stateSlice;\n        setShowDuplicateNameMsg(false);\n        // currentLibraryItem.name===\"\" for insert\n        const data: UpsertLibraryNameParameter = currentLibraryItem.name\n          ? { action: \"update\", libraryName, libraryId: currentLibraryItem.id }\n          : { action: \"insert\", libraryName: libraryName };\n        upsertLibraryName(data, stateSlice);\n      }\n    }\n  };\n\n  const handleNewLibraryNameChange: FormControlProps[\"onChange\"] = ({ target: { value } }) => {\n    value.length <= 64 && setLibraryName(value);\n  };\n  const handleOnClose = useCallback(() => {\n    const { diff, currentBaseCodeCellId, attachedLibraryData, currentLibraryItem } = stateSlice;\n    const nextState: AZNB_CROSS_CELL_CRUD_STATE | AZNB_CROSS_CELL_LIBRARIES_LIST_STATE = currentLibraryItem.id\n      ? {\n          kind: \"crud\",\n          displayedModalWindow: \"editLibrarySource\",\n          diff,\n          currentBaseCodeCellId,\n          attachedLibraryData,\n          currentLibraryItem\n        }\n      : {\n          kind: \"librariesList\",\n          displayedModalWindow: \"librariesList\",\n          diff,\n          currentBaseCodeCellId,\n          attachedLibraryData\n        };\n\n    setCrossCellState(nextState);\n  }, []);\n\n  const isOkButtonDisabled =\n    libraryName.length < 1 || stateSlice.currentLibraryItem.name.toLowerCase() === libraryName.toLowerCase();\n  return (\n    <Modal\n      data-testid=\"library-name-edit-modal\"\n      show={true}\n      onHide={handleOnClose}\n      backdrop=\"static\"\n      size={\"lg\"}\n      dialogClassName={styles.modal_dialogClassName}\n      contentClassName={\"__notch-width-padding\"}\n      centered\n    >\n      <Modal.Header bsPrefix=\"-\">\n        <ModalTitle\n          handleOnClose={handleOnClose}\n          title={\n            stateSlice.currentLibraryItem.id ? t(\"AznblpRenameLibraryWindowTitle\") : t(\"AznblpNewLibraryWindowTitle\")\n          }\n        />\n      </Modal.Header>\n      <Modal.Body className={\"modal-body __full-width\"}>\n        <Form.Group className={styles.library_name_input}>\n          <Form.Control\n            data-testid=\"library-name-edit-input\"\n            className={\"textbox\"}\n            size=\"sm\"\n            type=\"text\"\n            placeholder={t(\"AznblpNewLibraryInputFieldPlaceholder\")}\n            value={libraryName}\n            onChange={handleNewLibraryNameChange}\n            bsPrefix={\"-\"}\n          />\n        </Form.Group>\n        {showDuplicateNameMsg && (\n          <div className={styles.library_name_warning_wrapper}>\n            <div data-testid=\"library-name-validation-msg-line-1\" className={styles.library_name_warning_line_1}>\n              {t(\"AznblpLibraryNameDuplicateWarningMsgLine1\")}\n            </div>\n            <div data-testid=\"library-name-validation-msg-line-2\" className={styles.library_name_warning_line_2}>\n              {t(\"AznblpLibraryNameDuplicateWarningMsgLine2\")}\n            </div>\n          </div>\n        )}\n      </Modal.Body>\n      <Modal.Footer bsPrefix=\"-\" className={styles.modal_footer_wrapper}>\n        <Button\n          data-testid=\"library-name-edit-cancel-button\"\n          onClick={handleOnClose}\n          bsPrefix=\"-\"\n          className={`__ButtonGrey ${styles.modal_footer_button}`}\n        >\n          {t(\"AznblpNewDiagCancelButton\")}\n        </Button>\n        <Button\n          data-testid=\"library-name-edit-ok-button\"\n          bsPrefix=\"-\"\n          disabled={isOkButtonDisabled}\n          className={`__ButtonGrey ${styles.modal_footer_button}`}\n          onClick={renameAddLibrary}\n        >\n          {t(\"AznblpOkBtn\")}\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n};\nif (process.env.NODE_ENV === \"development\") {\n  LibraryName.whyDidYouRender = true;\n}\n\nexport { LibraryName };\n","import React from \"react\";\nimport { useStore } from \"../../store\";\nimport { DeleteConformation } from \"../user-libraries-components/modals/DeleteConformation\";\nimport { EditorModal } from \"../user-libraries-components/modals/Editor\";\nimport { LibrariesModal } from \"../user-libraries-components/modals/Libraries\";\nimport { LibraryName } from \"../user-libraries-components/modals/LibraryName\";\nimport \"./index.scss\";\ninterface IFooterButton {\n  onClick: () => void;\n}\n\ninterface IFooterButtonsProps {\n  previousButton?: IFooterButton;\n  nextButton?: IFooterButton;\n}\n\nconst FooterButtons = ({ nextButton, previousButton }: IFooterButtonsProps) => {\n  const { crossCellState } = useStore((state) => ({\n    crossCellState: state.crossCellState\n  }));\n  const classes = \"footer-button __ButtonLiteGrey arrow-nav\";\n  const classesLeft = classes + \" arrow-nav-left\";\n  const classesRight = classes + \" arrow-nav-right\";\n  return (\n    <div id=\"footerButtons\" className=\"footer_controls\">\n      <button\n        id={\"footerButtonPrevious\"}\n        className={classesLeft + (previousButton ? \"\" : \" disabled\")}\n        disabled={previousButton == undefined}\n        onClick={previousButton?.onClick}\n      >\n        <i className=\"icon icon_chevron-down\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        id={\"footerButtonNext\"}\n        className={classesRight + (nextButton ? \"\" : \" disabled\")}\n        disabled={nextButton == undefined}\n        onClick={nextButton?.onClick}\n      >\n        <i className=\"icon icon_chevron-down\" aria-hidden=\"true\"></i>\n      </button>\n      {crossCellState.kind === \"librariesList\" && <LibrariesModal />}\n      {crossCellState.kind === \"crud\" && crossCellState.displayedModalWindow === \"upsertLibraryName\" && (\n        <LibraryName stateSlice={crossCellState} />\n      )}\n      {crossCellState.kind === \"crud\" && crossCellState.displayedModalWindow === \"deleteLibrary\" && (\n        <DeleteConformation stateSlice={crossCellState} />\n      )}\n      {crossCellState.kind === \"crud\" && crossCellState.displayedModalWindow === \"editLibrarySource\" && (\n        <EditorModal stateSlice={crossCellState} />\n      )}\n    </div>\n  );\n};\n\nif (process.env.NODE_ENV === \"development\") {\n  FooterButtons.whyDidYouRender = true;\n}\n\nexport { FooterButtons };\n","import { DeepReadonly } from \"core-library\";\nimport { IElementsWidth } from \"../types/tabs.types\";\n\n// calculates passed HtmlElement Width with left and right margin\nconst getElementWidthWithLRMargin = (input: Element | HTMLElement) => {\n  const style = window.getComputedStyle(input);\n  return (\n    Math.ceil(parseFloat(style.width)) +\n    Math.ceil(parseFloat(style.marginLeft)) +\n    Math.ceil(parseFloat(style.marginRight))\n  );\n};\n\n// ref parameter children :HTMLCollection structure is following\n// nav\n//  div\n//       0: a.nav-item.arrow-nav.arrow-nav-left.disabled  = left arrow button\n//       1: a#tab0.nav-item.nav-link.active\n//       2: a#tab1.nav-item.nav-link\n//       ...\n//       length - 3: a#tab15.nav-item.nav-link\n//       length - 2: a.nav-item.arrow-nav.arrow-nav-right =  right rrow button\n//       length - 1  : div = dropdown\n//  div\n// nav\nexport const calculateElementsWidth = (ref: Element): IElementsWidth => {\n  const containerPadding = 14;\n  const el = ref.children[0];\n  const containerWidths = getElementWidthWithLRMargin(ref) - containerPadding;\n  const leftButtonWidth = getElementWidthWithLRMargin(el.children[0]);\n  const itemsWidths: number[] = [];\n  let itemsTotalWidth = 0;\n  const itemsCollection = el.children;\n  const length = itemsCollection.length;\n  // getting  a#tab...  props\n  for (let index = 1; index < length - 2; index++) {\n    const val = getElementWidthWithLRMargin(itemsCollection[index]);\n    itemsTotalWidth = itemsTotalWidth + val;\n    itemsWidths.push(val);\n  }\n  const rightButtonWidth = getElementWidthWithLRMargin(el.children[length - 2]);\n  const dropdownWidths = getElementWidthWithLRMargin(el.children[length - 1]);\n  return {\n    containerWidths,\n    containerPadding,\n    leftButtonWidth,\n    itemsWidths,\n    dropdownWidths,\n    rightButtonWidth,\n    navigationTabsTotalWidth: dropdownWidths + rightButtonWidth + leftButtonWidth,\n    itemsTotalWidth\n  };\n};\n// calculate navBarEndIndex  based on remainingWidth and activeTabIndex\nconst fillRightSide = (\n  remainingWidth: Readonly<number>,\n  activeTabIndex: Readonly<number>,\n  itemsWidths: DeepReadonly<IElementsWidth[\"itemsWidths\"]>\n) => {\n  const length = itemsWidths.length;\n  let restWidth = remainingWidth;\n  let navBarEndIndex = activeTabIndex;\n  for (let index = navBarEndIndex + 1; index < length; index++) {\n    if (restWidth - itemsWidths[index] > 0) {\n      navBarEndIndex = index;\n      restWidth = restWidth - itemsWidths[index];\n    } else {\n      break;\n    }\n  }\n  return { navBarEndIndex, remainingWidth: restWidth };\n};\n// calculate navBarStartIndex  based on remainingWidth and activeTabIndex\nconst fillLeftSide = (\n  remainingWidth: Readonly<number>,\n  activeTabIndex: Readonly<number>,\n  itemsWidths: DeepReadonly<IElementsWidth[\"itemsWidths\"]>\n) => {\n  let restWidth = remainingWidth;\n  let navBarStartIndex = activeTabIndex;\n  for (let index = activeTabIndex - 1; index > 0; index--) {\n    if (restWidth - itemsWidths[index] > 0) {\n      navBarStartIndex = index;\n      restWidth = restWidth - itemsWidths[index];\n    } else {\n      break;\n    }\n  }\n  return { navBarStartIndex, remainingWidth: restWidth };\n};\n\nconst getRemainingWidth = (\n  currentContainerWidths: Readonly<number>,\n  input: DeepReadonly<IElementsWidth>,\n  activeTabIndex: Readonly<number>\n) => Math.ceil(currentContainerWidths - input.navigationTabsTotalWidth - input.itemsWidths[activeTabIndex]);\n\n// call fillLeftSide and than fillRightSide\nexport const getStartThanEndIndexes = (\n  currentContainerWidth: Readonly<number>,\n  elementsWidth: DeepReadonly<IElementsWidth>,\n  activeTabIndex: Readonly<number>\n) => {\n  const initialRemainingWidth = getRemainingWidth(currentContainerWidth, elementsWidth, activeTabIndex);\n  const { navBarStartIndex, remainingWidth } = fillLeftSide(\n    initialRemainingWidth,\n    activeTabIndex,\n    elementsWidth.itemsWidths\n  );\n  const { navBarEndIndex } = fillRightSide(remainingWidth, activeTabIndex, elementsWidth.itemsWidths);\n  return { navBarStartIndex, navBarEndIndex };\n};\n\n// call fillRightSide and than fillLeftSide\nexport const getEndThanStartIndexes = (\n  currentContainerWidth: Readonly<number>,\n  elementsWidth: DeepReadonly<IElementsWidth>,\n  activeTabIndex: Readonly<number>\n) => {\n  const initialRemainingWidth = getRemainingWidth(currentContainerWidth, elementsWidth, activeTabIndex);\n  const { navBarEndIndex, remainingWidth } = fillRightSide(\n    initialRemainingWidth,\n    activeTabIndex,\n    elementsWidth.itemsWidths\n  );\n  const { navBarStartIndex } = fillLeftSide(remainingWidth, activeTabIndex, elementsWidth.itemsWidths);\n  return { navBarStartIndex, navBarEndIndex };\n};\n","import React from \"react\";\nimport { debounceTime } from \"rxjs/operators\";\nimport { IActiveTab } from \"core-library\";\nimport { fromEvent } from \"rxjs/internal/observable/fromEvent\";\nimport { Subscription } from \"rxjs/internal/Subscription\";\nimport { Navbar, Nav, NavDropdown } from \"react-bootstrap\";\n\nimport { IElementsWidth } from \"../../types/tabs.types\";\nimport { calculateElementsWidth, getEndThanStartIndexes, getStartThanEndIndexes } from \"../../utils/tabs.utils\";\nimport \"./index.scss\";\nimport { PageName, NotebookRelativePath } from \"../notebook/NotebookViewController\";\nimport { SelectCallback } from \"react-bootstrap/esm/helpers\";\n\nexport type IsLocked = boolean;\nexport type TabData = Array<[PageName, NotebookRelativePath, IsLocked]>;\nexport interface INotebookTabsProps extends IActiveTab {\n  tabs: TabData;\n  activeTabPath: string;\n  onActivate?: (url: string, idx: number) => void;\n}\n\ninterface INotebookTabsState {\n  showNavigationTabs: boolean;\n  navBarStartIndex: number;\n  navBarEndIndex: number;\n  showNavControls: boolean;\n  containerIsHidden: boolean;\n}\n\n/*\n    Implements the Tabs Panel which includes the following:\n    1) Navigation Components (Left Arrow, Right Arrow and drop down)\n        - If required all 3 components are shown.\n    2) List of tabs which activate a page when clicked.\n        - Tabs that don't fit on the clients width are hidden. You can use the nav components to travers them.\n*/\nexport class Tabs extends React.Component<INotebookTabsProps, INotebookTabsState> {\n  static whyDidYouRender = true;\n  private containerRef = React.createRef<HTMLDivElement>();\n  private width$: Subscription | null = null;\n  private timeout: number | null = null;\n  private currentContainerWidth = -1;\n  private updateSource: \"internal\" | \"external\" = \"external\";\n  private elementsWidth: IElementsWidth = {\n    containerWidths: 0,\n    containerPadding: 0,\n    leftButtonWidth: 0,\n    itemsWidths: [],\n    dropdownWidths: 0,\n    rightButtonWidth: 0,\n    navigationTabsTotalWidth: 0,\n    itemsTotalWidth: 0\n  };\n\n  constructor(props: INotebookTabsProps) {\n    super(props);\n\n    this.state = {\n      showNavigationTabs: true,\n      navBarStartIndex: 0,\n      navBarEndIndex: this.props.tabs.length - 1,\n      showNavControls: true,\n      containerIsHidden: true\n    };\n  }\n  componentDidMount() {\n    this.width$ = fromEvent(window, \"resize\")\n      .pipe(debounceTime(70))\n      .subscribe(() => this.processResizeInfo(window.innerWidth - this.elementsWidth.containerPadding));\n\n    const ref = this.containerRef.current;\n    if (ref) {\n      this.timeout = window.setTimeout(() => {\n        this.elementsWidth = calculateElementsWidth(ref);\n        this.currentContainerWidth = this.elementsWidth.containerWidths - this.elementsWidth.containerPadding;\n        this.setInitialElementsLayout(this.elementsWidth.containerWidths);\n      }, 100);\n    }\n  }\n\n  showAllItems = () => {\n    const result: Pick<\n      INotebookTabsState,\n      \"showNavControls\" | \"navBarStartIndex\" | \"navBarEndIndex\" | \"containerIsHidden\"\n    > = {\n      showNavControls: false,\n      navBarStartIndex: 0,\n      containerIsHidden: false,\n      navBarEndIndex: this.props.tabs.length - 1\n    };\n    return result;\n  };\n\n  setInitialElementsLayout(width: Readonly<number>) {\n    const input = this.elementsWidth;\n    if (width > input.itemsTotalWidth) {\n      this.setState(this.showAllItems());\n    } else {\n      const { activeTabIndex } = this.props;\n      const { navBarEndIndex, navBarStartIndex } = getEndThanStartIndexes(width, this.elementsWidth, activeTabIndex);\n      this.setState({\n        showNavControls: true,\n        containerIsHidden: false,\n        navBarStartIndex,\n        navBarEndIndex\n      });\n    }\n  }\n\n  processResizeInfo = (width: Readonly<number>) => {\n    if (this.currentContainerWidth > width) {\n      this.onShrink(width);\n    } else {\n      if (this.currentContainerWidth > 0) {\n        this.onExpand(width);\n      }\n    }\n    this.currentContainerWidth = width;\n  };\n\n  componentDidUpdate(prevProps: INotebookTabsProps) {\n    if (prevProps.activeTabIndex !== this.props.activeTabIndex && this.updateSource === \"external\") {\n      this.setElementsLayout(this.props.activeTabIndex);\n    }\n    this.updateSource = \"external\";\n  }\n  onExpand = (nextWidth: Readonly<number>) => {\n    const input = this.elementsWidth;\n    if (nextWidth >= input.itemsTotalWidth) {\n      this.setState(this.showAllItems());\n    } else {\n      const { activeTabIndex } = this.props;\n      const { navBarEndIndex, navBarStartIndex } = getEndThanStartIndexes(\n        nextWidth,\n        this.elementsWidth,\n        activeTabIndex\n      );\n      this.setState({\n        showNavControls: true,\n        navBarStartIndex,\n        navBarEndIndex\n      });\n    }\n  };\n  onShrink = (nextWidth: Readonly<number>) => {\n    const input = this.elementsWidth;\n    if (nextWidth >= input.itemsTotalWidth) {\n      this.setState(this.showAllItems());\n    } else {\n      const { activeTabIndex } = this.props;\n      const { navBarEndIndex, navBarStartIndex } = getStartThanEndIndexes(\n        nextWidth,\n        this.elementsWidth,\n        activeTabIndex\n      );\n      this.setState({\n        showNavControls: true,\n        navBarStartIndex,\n        navBarEndIndex\n      });\n    }\n  };\n\n  leftRightArrowClickHandler = (evt: React.MouseEvent) => {\n    const direction = evt.currentTarget.getAttribute(\"data-id\");\n    const { activeTabIndex } = this.props;\n    const nextIndex = direction === \"leftArrow\" ? activeTabIndex - 1 : activeTabIndex + 1;\n    this.setElementsLayout(nextIndex);\n    this.updateSource = \"internal\";\n    this.props.onActivate?.(this.props.tabs[nextIndex][1], nextIndex);\n  };\n\n  setElementsLayout = (activeIndex: Readonly<number>) => {\n    const { navBarStartIndex, navBarEndIndex } = this.state;\n    if (activeIndex < navBarStartIndex) {\n      const { navBarEndIndex, navBarStartIndex } = getEndThanStartIndexes(\n        this.currentContainerWidth,\n        this.elementsWidth,\n        activeIndex\n      );\n      this.setState({ navBarStartIndex, navBarEndIndex });\n    }\n    if (activeIndex > navBarEndIndex) {\n      const { navBarEndIndex, navBarStartIndex } = getStartThanEndIndexes(\n        this.currentContainerWidth,\n        this.elementsWidth,\n        activeIndex\n      );\n      this.setState({ navBarStartIndex, navBarEndIndex });\n    }\n  };\n\n  onDropdownSelectHandler: SelectCallback = (key, _evt) => {\n    if (key) {\n      const idx = parseInt(key, 10);\n      this.setElementsLayout(idx);\n      this.updateSource = \"internal\";\n      this.props.onActivate?.(this.props.tabs[idx][1], idx);\n    }\n  };\n\n  onActivate = (evt: React.MouseEvent) => {\n    const dataId = evt.currentTarget.getAttribute(\"data-id\");\n    if (dataId) {\n      const idx = parseInt(dataId, 10);\n      this.updateSource = \"internal\";\n      this.props.onActivate?.(this.props.tabs[idx][1], idx);\n    }\n  };\n\n  render() {\n    const { activeTabIndex } = this.props;\n    const { showNavControls, navBarStartIndex, navBarEndIndex, containerIsHidden } = this.state;\n    const className = `navbar-container  ${containerIsHidden ? \"hidden-navbar\" : \"\"}`;\n    return (\n      <div className=\"nav-bar-wrapper\">\n        <Navbar ref={this.containerRef} className={className} variant=\"dark\">\n          <Nav className=\"nav-tabs dark-tabs tabs-sm\">\n            <Nav.Link\n              className={\"nav-item\"}\n              disabled={this.props.activeTabIndex === 0}\n              data-id=\"leftArrow\"\n              hidden={!showNavControls}\n              onClick={this.leftRightArrowClickHandler}\n            >\n              <i className=\"icon icon_chevron-down arrow-left\" aria-hidden=\"true\"></i>\n            </Nav.Link>\n            {this.props.tabs.map(([name], idx) => (\n              <Nav.Link\n                active={idx === activeTabIndex}\n                hidden={idx < navBarStartIndex || idx > navBarEndIndex}\n                key={name}\n                data-id={idx}\n                className={\"nav-item menu-item\"}\n                onClick={this.onActivate}\n              >\n                {name}\n              </Nav.Link>\n            ))}\n\n            <Nav.Link\n              className={\"nav-item\"}\n              data-id=\"rightArrow\"\n              hidden={!showNavControls}\n              onClick={this.leftRightArrowClickHandler}\n              disabled={this.props.activeTabIndex === this.props.tabs.length - 1}\n            >\n              <i className=\"icon icon_chevron-down arrow-right\" aria-hidden=\"true\"></i>\n            </Nav.Link>\n            <NavDropdown\n              onSelect={this.onDropdownSelectHandler}\n              hidden={!showNavControls}\n              alignRight={true}\n              bsPrefix={\"mc-nav-dropDown\"}\n              title=\"...\"\n              id=\"nav-dropdown\"\n            >\n              {this.props.tabs.map(([name], idx) => (\n                <NavDropdown.Item\n                  eventKey={idx.toString()}\n                  className={idx === activeTabIndex ? \"selected-nav-drop-down\" : \"\"}\n                  key={name}\n                >\n                  {name}\n                </NavDropdown.Item>\n              ))}\n            </NavDropdown>\n          </Nav>\n        </Navbar>\n      </div>\n    );\n  }\n\n  componentWillUnmount() {\n    this.width$?.unsubscribe();\n    this.timeout && window.clearTimeout(this.timeout);\n  }\n}\n","import React from \"react\";\nimport { getIpcTelemetry } from \"../../telemetry\";\nimport { NotebookParentElementId } from \"../../types\";\n\nexport interface IFrameProps {\n  notebookUrl: string;\n  activate: (url: string) => Promise<void>;\n}\n\n/**\n * log aznb errors\n *\n * @param error error to emit\n */\n\nfunction aznbErrorListener(error: Event) {\n  getIpcTelemetry().error(error);\n}\n\nexport class Frame extends React.Component<IFrameProps> {\n  static whyDidYouRender = true;\n  constructor(props: IFrameProps) {\n    super(props);\n  }\n\n  componentDidMount() {\n    const rootElement = document.getElementById(NotebookParentElementId);\n    if (!rootElement) {\n      console.warn(\n        `HTMLElement with ID '${NotebookParentElementId}' does not exist. Telemetry of aznb-error events will be turned off.`\n      );\n    } else {\n      rootElement.addEventListener(\"aznb-error\", aznbErrorListener);\n    }\n\n    this.props.activate(this.props.notebookUrl);\n  }\n\n  componentDidUpdate() {\n    this.props.activate(this.props.notebookUrl);\n  }\n\n  componentWillUnmount() {\n    const rootElement = document.getElementById(NotebookParentElementId);\n    if (rootElement) {\n      rootElement.removeEventListener(\"aznb-error\", aznbErrorListener);\n    }\n  }\n\n  shouldComponentUpdate(prevProps: IFrameProps) {\n    return prevProps.notebookUrl !== this.props.notebookUrl;\n  }\n\n  render() {\n    return (\n      <div id=\"tab-content\">\n        <div className=\"tab-pane fade show active\" id={NotebookParentElementId} role=\"tabpanel\"></div>\n      </div>\n    );\n  }\n}\n","// This file is for loading the lesson and notebook information.\n// These functions will take in the lesson json file and load\n// All the appropriate notebooks into tabs.\n\nimport React from \"react\";\nimport {\n  ILessonData,\n  NotebookContentProvider,\n  IIpcTelemetry,\n  MinecraftCommander,\n  MockMinecraftCommander,\n  IActiveTabProvider,\n  ActiveTabProvider,\n  IActiveTab\n} from \"core-library\";\nimport { IMcParams, IpynbV4 } from \"core-library\";\nimport { AzureNotebookLoader } from \"../../azureNotebookLoader\";\nimport { GetLessonDataFunctor } from \"../../lessonData\";\nimport { getIpcTelemetry } from \"../../telemetry\";\nimport { TelemetryEvents } from \"../../types\";\nimport { FooterButtons } from \"../footer-buttons\";\nimport { Page } from \"../page\";\nimport { INotebookTabsProps, TabData, Tabs } from \"../tabs\";\nimport { Frame } from \"./frame\";\nimport { INotebook } from \"@aznb/core-contract\";\nexport type PageId = string;\nexport type PageName = string;\nexport type NotebookRelativePath = string;\nexport type IsLocked = boolean;\n\nconst isPagePaths = (item: [string, string] | undefined): item is [string, string] => {\n  return !!item;\n};\n\nexport interface INotebookControllerProps {\n  getLessonData: GetLessonDataFunctor;\n  azureNotebookLoader: Pick<AzureNotebookLoader, \"initialize\" | \"loadComponent\">;\n  contentProvider: Pick<NotebookContentProvider, \"get\" | \"setContentSaveFlag\">;\n  params: IMcParams;\n}\n\ninterface INotebookControllerState {\n  // Since we start initialization after mounting. Flag to indicate loading has completed.\n  hasLoaded: boolean;\n  tabProps: INotebookTabsProps;\n  errorMsg?: string;\n}\n\n/*\n    ViewController that handles entrypoint into out app. Similar to App.tsx.\n    We are currently not using any off the shelf controller, since we just need one.\n\n    Current App lifecycle:\n    - Constructor - Sets up post mounting initialization functor. The functor does the following:\n        - Fetches the lessonData (lesson.json)\n        - Iniitalizes the Azure Notebook Components.\n        - Parses the lesson.json and downloads all notebooks.\n    - Render - Either renders a loading screen or Actual Tabs/Notebook after it is available.\n    - OnComponentMounted  - Begins executing the above functor.\n*/\nexport class NotebookViewController extends React.Component<INotebookControllerProps, INotebookControllerState> {\n  static whyDidYouRender = true;\n  // LessonData is populated after the Component has mounted.\n  private LessonData?: ILessonData;\n  private TelemetryProvider?: IIpcTelemetry;\n  private ActiveTabProvider?: IActiveTabProvider;\n  private DisableAutoSave = false;\n\n  private AzureNoteBookInstance: INotebook | null = null;\n\n  constructor(props: INotebookControllerProps) {\n    super(props);\n\n    this.state = {\n      hasLoaded: false,\n      tabProps: {\n        tabs: [],\n        activeTabPath: \"\",\n        activeTabIndex: 0\n      }\n    };\n\n    this.onActivate = this.onActivate.bind(this);\n    this.onActivateByIndex = this.onActivateByIndex.bind(this);\n  }\n\n  throwAsyncError(error: Error, readableErrorMessage?: string) {\n    this.setState({ errorMsg: readableErrorMessage || error.message });\n  }\n\n  // Start initialization after the initial app frame has loaded. Minecraft depends on scripts\n  // being injected, and each platform has a different timing. The best time would be after the\n  // component has mounted.\n  async componentDidMount() {\n    this.ActiveTabProvider = new ActiveTabProvider(\n      localStorage,\n      window?.ipcRenderer ? MinecraftCommander.getInstance(window.ipcRenderer) : new MockMinecraftCommander()\n    );\n    this.TelemetryProvider = getIpcTelemetry();\n\n    let component = \"\";\n    const initEvent: TelemetryEvents.IComponents = { components: [] };\n\n    try {\n      const telemetry = async (comp: string, cb: () => Promise<void | { notebookCount: number }>) => {\n        component = comp;\n        const startTime = performance.now();\n\n        const callbackFunctionExecutionResult = await cb();\n        const timeElapsed = Math.trunc(performance.now() - startTime);\n        const telemetryComponent: TelemetryEvents.IComponent = {\n          id: component,\n          timeElapsed: timeElapsed\n        };\n        if (callbackFunctionExecutionResult) {\n          telemetryComponent.details = callbackFunctionExecutionResult;\n        }\n        initEvent.components.push(telemetryComponent);\n      };\n\n      await telemetry(\"getLessonData\", async () => {\n        this.LessonData = await this.props.getLessonData();\n\n        if (this.LessonData?.disableUserSaves) {\n          this.DisableAutoSave = true;\n          this.props.contentProvider.setContentSaveFlag(false);\n        }\n        this.TelemetryProvider?.setName(`Everglade:${this.LessonData.creatorName}:${this.LessonData.title}`);\n      });\n\n      await telemetry(\"aznb::initalize\", async () => {\n        await this.props.azureNotebookLoader.initialize();\n      });\n\n      await telemetry(\"loadNotebooks\", async () => {\n        const tabProps: INotebookTabsProps = await this.load();\n        this.setState({ hasLoaded: true, tabProps: tabProps });\n        return { notebookCount: tabProps.tabs?.length };\n      });\n    } catch (error) {\n      const e: Error = error;\n      this.TelemetryProvider?.error({\n        component: component,\n        message: e.message\n      });\n      this.throwAsyncError(error);\n    } finally {\n      this.TelemetryProvider?.log(initEvent);\n    }\n  }\n\n  // Gets the path of a notebook based on supported languages.\n  private getNotebookPath(\n    filename: string\n  ): { default: true; pathEn: string } | { default: false; pathEn: string; pathLoc: string } {\n    // When we go offline, we will need to fix this separator based. Maybe the filesystem will ignore it.\n    const separator = \"/\";\n    const { language } = this.props.params;\n    // en-us is the default language and shouldn't have its own folder.\n    if (\n      language &&\n      (this.LessonData?.isLanguageSupported?.(language, this.LessonData.additionalLanguages || []) ||\n        language === \"ps-PS\")\n    ) {\n      return {\n        default: false,\n        pathEn: this.props.params.rootNotebookPath + filename + \".ipynb\",\n        pathLoc: this.props.params.rootNotebookPath + this.props.params.language + separator + filename + \".ipynb\"\n      };\n    } else {\n      return {\n        default: true,\n        pathEn: this.props.params.rootNotebookPath + filename + \".ipynb\"\n      };\n    }\n  }\n\n  private async load(): Promise<INotebookTabsProps> {\n    const tabs: TabData = [];\n    if (this.LessonData) {\n      const tabIndexFunctor = this.ActiveTabProvider?.get(\n        this.props.params.lessonJsonPath,\n        this.LessonData?.activityTracker?.data?.activitySelectorObjective,\n        (data: IActiveTab) => {\n          // Ignore calls that occur before loading is complete.\n          if (\n            this.state.hasLoaded &&\n            this.state.tabProps?.tabs &&\n            data.activeTabIndex > 0 &&\n            data.activeTabIndex < tabs.length\n          ) {\n            this.onActivate(this.state.tabProps.tabs[data.activeTabIndex][1], data.activeTabIndex);\n          }\n        }\n      ).then((activeTab) => {\n        return activeTab ? activeTab : { activeTabIndex: 0 };\n      });\n\n      let path = \"\";\n      let notebook: IpynbV4;\n      const pagePaths = (\n        await Promise.all(\n          this.LessonData.pages.map(async (page) => {\n            const pathData = this.getNotebookPath(page);\n            try {\n              if (pathData.default === true) {\n                notebook = await this.props.contentProvider.get(pathData.pathEn, true);\n                path = pathData.pathEn;\n              } else {\n                try {\n                  notebook = await this.props.contentProvider.get(pathData.pathLoc, true);\n                  path = pathData.pathLoc;\n                } catch (error) {\n                  if (error.status === 404) {\n                    notebook = await this.props.contentProvider.get(pathData.pathEn, true);\n                    path = pathData.pathEn;\n                  }\n                }\n              }\n\n              const metadata = notebook.metadata;\n              return [metadata.minecraft.page_name, path] as [PageName, NotebookRelativePath];\n            } catch (error) {\n              this.throwAsyncError(error, \"Notebook could not be loaded from path: \" + path);\n            }\n          })\n        )\n      ).filter(isPagePaths);\n\n      const tabIndex = await tabIndexFunctor;\n\n      for (const [name, path] of pagePaths) {\n        tabs.push([name, path, false]);\n      }\n\n      const index =\n        tabIndex !== undefined && tabIndex.activeTabIndex >= 0 && tabIndex.activeTabIndex < tabs.length\n          ? tabIndex.activeTabIndex\n          : 0;\n\n      return {\n        tabs,\n        activeTabPath: pagePaths[index][1],\n        activeTabIndex: index\n      } as INotebookTabsProps;\n    } else {\n      throw new Error(\"Notebook Controller Loading failed: LessonData cant be empty.\");\n    }\n  }\n\n  onActivate(url: string, idx: number) {\n    if (!this.DisableAutoSave) {\n      this.AzureNoteBookInstance?.save();\n    }\n    const tabProps = { ...this.state.tabProps };\n    tabProps.activeTabPath = url;\n    tabProps.activeTabIndex = idx;\n\n    this.setState({ hasLoaded: true, tabProps });\n  }\n\n  onActivateByIndex(idx: number) {\n    this.onActivate(this.getTabPathFromIndex(idx), idx);\n  }\n\n  getTabPathFromIndex(index: number): string {\n    let path = \"\";\n    for (let idx = 0; idx < this.state.tabProps.tabs.length; idx++) {\n      if (index === idx) {\n        path = this.state.tabProps.tabs[idx][1];\n      }\n    }\n    return path;\n  }\n\n  public render() {\n    if (this.state.errorMsg) {\n      // This error should be caught by the ErrorBoundary\n      throw new Error(this.state.errorMsg);\n    } else if (!this.state.hasLoaded) {\n      return (\n        <span className=\"page-loader\">\n          <img />\n        </span>\n      );\n    } else {\n      this.TelemetryProvider?.setContext(\"loaded\");\n      return (\n        <Page>\n          <Page.Header>\n            <Tabs\n              tabs={this.state.tabProps.tabs}\n              activeTabPath={this.state.tabProps.activeTabPath}\n              activeTabIndex={this.state.tabProps.activeTabIndex}\n              onActivate={this.onActivate}\n            />\n          </Page.Header>\n          <Page.Body>\n            <Frame\n              notebookUrl={this.state.tabProps.activeTabPath}\n              activate={async (url: string) => {\n                this.AzureNoteBookInstance = await this.props.azureNotebookLoader.loadComponent(\n                  url,\n                  this.DisableAutoSave\n                );\n\n                return;\n              }}\n            />\n            <FooterButtons\n              previousButton={\n                this.state.tabProps.activeTabIndex == 0\n                  ? undefined\n                  : { onClick: this.onActivateByIndex.bind(this, this.state.tabProps.activeTabIndex - 1) }\n              }\n              nextButton={\n                this.state.tabProps.activeTabIndex == this.state.tabProps.tabs.length - 1\n                  ? undefined\n                  : { onClick: this.onActivateByIndex.bind(this, this.state.tabProps.activeTabIndex + 1) }\n              }\n            />\n          </Page.Body>\n        </Page>\n      );\n    }\n  }\n}\n","import React from \"react\";\nimport Modal from \"react-modal\";\nimport { NotebookContentProvider } from \"core-library\";\nimport { WithTranslation, withTranslation } from \"react-i18next\";\nimport { translate } from \"../../utils/i18next.utils\";\nimport { AzureNotebookLoader } from \"../../azureNotebookLoader\";\nimport \"./index.scss\";\nconst customStyles: Modal.Styles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n    borderColor: \"transparent\",\n    backgroundColor: \"transparent\",\n    zIndex: 1\n  }\n};\nif (process.env.NODE_ENV !== \"test\") {\n  Modal.setAppElement(\"#root\");\n}\n\ninterface IResetModalProps extends WithTranslation {\n  nbContentProvider: NotebookContentProvider;\n  aznbLoader: AzureNotebookLoader;\n}\n\ninterface IResetModalState {\n  isOpen: boolean;\n}\n\nexport class ResetModalComponent extends React.Component<IResetModalProps, IResetModalState> {\n  static whyDidYouRender = true;\n  constructor(props: IResetModalProps) {\n    super(props);\n\n    this.state = {\n      isOpen: false\n    };\n\n    window.ipcRenderer?.registerResetCallback?.(this.resetCallback);\n  }\n\n  resetCallback = () => {\n    this.setState({ isOpen: true });\n  };\n\n  componentWillUnmount() {\n    window.ipcRenderer?.unregisterResetCallback?.(this.resetCallback);\n  }\n\n  onClickAccept = () => {\n    this.props.aznbLoader.stopNotebookCode();\n    this.props.nbContentProvider.clear(true);\n    location.reload();\n  };\n\n  closeModal = () => {\n    this.setState({ isOpen: false });\n  };\n\n  render() {\n    const t = translate(this.props.t);\n    return (\n      <Modal\n        isOpen={this.state.isOpen}\n        onRequestClose={this.closeModal}\n        shouldCloseOnEsc={true}\n        shouldCloseOnOverlayClick={false}\n        style={customStyles}\n        overlayClassName=\"Overlay\"\n      >\n        <div className=\"\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n          <div className=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\" role=\"document\">\n            <div className=\"modal-content\">\n              <div className=\"modal-header\">\n                <h1 data-testid=\"AznblpNewDiagTitle\" className=\"modal-title\" id=\"exampleModalLabel\">\n                  {t(\"AznblpResetDiagTitle\")}\n                </h1>\n                <button\n                  type=\"button\"\n                  className=\"close\"\n                  data-dismiss=\"modal\"\n                  aria-label=\"Close\"\n                  onClick={this.closeModal}\n                >\n                  <i className=\"icon icon_close\" aria-hidden=\"true\"></i>\n                </button>\n              </div>\n              <div data-testid=\"AznblpNewDiagBody\" className=\" mcBackgroundN6-BHalf-2 modal-style-2 modal-body\">\n                {t(\"AznblpResetDiagBody\")}\n                <div className=\"modal-body-button-stack\">\n                  <button\n                    data-testid=\"AznblpNewDiagContButton\"\n                    type=\"button\"\n                    className=\"__ButtonGrey\"\n                    onClick={this.onClickAccept}\n                  >\n                    {t(\"AznblpNewDiagContButton\")}\n                  </button>\n                  <button\n                    data-testid=\"AznblpNewDiagCancelButton\"\n                    type=\"button\"\n                    className=\"__ButtonGrey\"\n                    onClick={this.closeModal}\n                  >\n                    {t(\"AznblpNewDiagCancelButton\")}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Modal>\n    );\n  }\n}\n\nexport const ResetModal = withTranslation()(ResetModalComponent);\n","import React from \"react\";\nimport { AznbbTranslations, IMcParams, LocalesType } from \"core-library\";\nimport { NotebookContentProvider } from \"core-library\";\nimport { WithTranslation, withTranslation } from \"react-i18next\";\nimport { AzureNotebookLoader } from \"../../azureNotebookLoader\";\nimport { GetLessonData } from \"../../lessonData\";\nimport { translate } from \"../../utils/i18next.utils\";\nimport { NotebookViewController } from \"./NotebookViewController\";\nimport { ResetModal } from \"../reset-modal\";\n\ntype Props = { parameters: IMcParams } & WithTranslation;\nclass AzNotebook extends React.Component<Props> {\n  static whyDidYouRender = true;\n  private aznbTranslations: AznbbTranslations;\n  private locale: LocalesType;\n  constructor(props: Props) {\n    super(props);\n    const t = translate(this.props.t);\n    this.aznbTranslations = {\n      AznbbErrorPrefix: t(\"AznbbErrorPrefix\"),\n      AznbbErrorRun: t(\"AznbbErrorRun\"),\n      AznbbErrorUnexpected: t(\"AznbbErrorUnexpected\"),\n      AznbbReadOnly: t(\"AznbbReadOnly\"),\n      AznbbResetCode: t(\"AznbbResetCode\"),\n      AznbbResetWorld: t(\"AznbbResetWorld\"),\n      AznbbRun: t(\"AznbbRun\"),\n      AznbbRunCancelled: t(\"AznbbRunCancelled\"),\n      AznbbRunInProcess: t(\"AznbbRunInProcess\"),\n      AznbbRunSuccessful: t(\"AznbbRunSuccessful\"),\n      AznbbStop: t(\"AznbbStop\"),\n      AznbbLibraries: t(\"AznbbLibraries\")\n    };\n    this.locale = t(\"Locale\");\n  }\n  render() {\n    const { parameters } = this.props;\n    const nbContentProvider = new NotebookContentProvider(localStorage);\n    const aznbLoader = new AzureNotebookLoader(this.aznbTranslations, this.locale);\n    return (\n      <>\n        <NotebookViewController\n          getLessonData={() => {\n            return GetLessonData(parameters.lessonJsonPath, parameters.disableLessonDataCache);\n          }}\n          azureNotebookLoader={aznbLoader}\n          contentProvider={nbContentProvider}\n          params={parameters}\n        />\n        <ResetModal nbContentProvider={nbContentProvider} aznbLoader={aznbLoader} />\n      </>\n    );\n  }\n}\n\nexport default withTranslation()(AzNotebook);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeListenerIds = exports.MetadataNamespace = exports.MyComputeProtocol = exports.ExtensionName = void 0;\nexports.ExtensionName = \"minecraft\";\n/**\n * Name of my custom protocol\n */\nexports.MyComputeProtocol = \"minecraft-ipc\";\n/**\n * Namespace for minecraft's own metadata of a cell data entity\n */\nexports.MetadataNamespace = \"minecraft\";\n/**\n * List of all onCodeCommand id's that a cell can contain.\n */\nvar CodeListenerIds;\n(function (CodeListenerIds) {\n    // onCodeStartedCommand: Called just before an execute command is sent to the game.\n    CodeListenerIds[\"onCodeStartedCommand\"] = \"onCodeStartedCommand\";\n    // onCodeStoppedCommand: Called whenever code execution is stopped. This is followed\n    // by a cancelled/successfull/error event.\n    CodeListenerIds[\"onCodeStoppedCommand\"] = \"onCodeStoppedCommand\";\n    CodeListenerIds[\"onCodeCancelledCommand\"] = \"onCodeCancelledCommand\";\n    CodeListenerIds[\"onCodeSuccessfulCommand\"] = \"onCodeSuccessfulCommand\";\n    CodeListenerIds[\"onCodeErrorCommand\"] = \"onCodeErrorCommand\";\n})(CodeListenerIds = exports.CodeListenerIds || (exports.CodeListenerIds = {}));\n//# sourceMappingURL=types.js.map"],"sourceRoot":""}