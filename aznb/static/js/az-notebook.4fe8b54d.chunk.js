(this["webpackJsonppython-ide"]=this["webpackJsonppython-ide"]||[]).push([[1],{123:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settings=t.mapLocaleToAznbLocale=void 0;var n=a(112),r=a(4);t.mapLocaleToAznbLocale=function(e){switch(e){case"zh-CN":return n.Locale.zh_Hans;case"zh-TW":return n.Locale.zh_Hant;case"en-GB":case"en-US":return n.Locale.en;case"cs-CZ":return n.Locale.cs;case"de-DE":return n.Locale.de;case"es-ES":case"es-MX":return n.Locale.es;case"fr-CA":case"fr-FR":return n.Locale.fr;case"hu-HU":return n.Locale.hu;case"it-IT":return n.Locale.it;case"ja-JP":return n.Locale.ja;case"ko-KR":return n.Locale.ko;case"nl-NL":return n.Locale.nl;case"pl-PL":return n.Locale.pl;case"pt-PT":return n.Locale.pt_PT;case"pt-BR":return n.Locale.pt_BR;case"ru-RU":return n.Locale.ru;case"sv-SE":return n.Locale.sv;case"tr-TR":return n.Locale.tr;case"ps-PS":return n.Locale.pseudo;case"bg-BG":case"el-GR":case"da-DK":case"fi-FI":case"id-ID":case"nb-NO":case"sk-SK":case"uk-UA":return n.Locale.en}return r.assertUnreachable(e)},t.settings={logToConsole:!0,locale:"en-US"}},124:function(e,t,a){e.exports={modal_dialogClassName:"modals_modal_dialogClassName__3-1eI",library_list_modal_body:"modals_library_list_modal_body__19_dv",library_list_accordion:"modals_library_list_accordion__1is8t",library_list_wrapper:"modals_library_list_wrapper__1HBEv",library_list_modal_header:"modals_library_list_modal_header__2IKWs",library_list_modal_body_title:"modals_library_list_modal_body_title__3Jp7W",modal_footer_button:"modals_modal_footer_button__13SjO",modal_footer_wrapper:"modals_modal_footer_wrapper__hedCp",library_name_warning_wrapper:"modals_library_name_warning_wrapper__3LI3I",library_name_warning_line_1:"modals_library_name_warning_line_1__2PgNh",library_name_warning_line_2:"modals_library_name_warning_line_2__znSXu",modal_title:"modals_modal_title__3bv5U",library_name_input:"modals_library_name_input__1-BcW"}},146:function(e,t,a){"use strict";var n=a(130),r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getLocStrings=t.setLocStrings=void 0;var o,i=a(123),l=r(a(235));t.setLocStrings=function(e,t){o=new l.default(n({},e,t))};t.getLocStrings=function(){return i.settings.locale!==o.getLanguage()&&o.setLanguage(i.settings.locale),o}},147:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLogger=void 0;var n=a(123),r=function(){},o={log:r,error:r};t.createLogger=function(e){var t=function(t){return"".concat(e,": ").concat(t)},a=!0===n.settings.logToConsole?console:o;return{log:function(e){return a.log(t(e))},error:function(e){return a.error(t(e))}}}},157:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(5),r=a(6),o=a(9),i=a(7),l=a(8),s=a(1),c=a.n(s),d=(a(158),function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"page-wrapper-header"},this.props.children)}}]),t}(s.Component));d.displayName="PageHeader";var u=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"page-wrapper-body"},this.props.children)}}]),t}(s.Component);u.displayName="PageBody";var m=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"page-wrapper-footer"},this.props.children)}}]),t}(s.Component);m.displayName="PageFooter";var p=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"page-wrapper"},this.props.children)}}]),t}(s.Component);p.displayName="Page",p.Header=d,p.Body=u,p.Footer=m},158:function(e,t,a){},209:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),r=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createExtension=t.mapLocaleToAznbLocale=void 0;var i=o(a(210)),l=a(227),s=a(245),c=a(98),d=a(248),u=a(123);a(249);var m=a(250),p=a(146),b=a(4),f=a(123);Object.defineProperty(t,"mapLocaleToAznbLocale",{enumerable:!0,get:function(){return f.mapLocaleToAznbLocale}}),r(a(98),t);t.createExtension=function(e){return{name:"minecraft",config:i.default,activate:function(t){t.components.register("Panel",e),t.compute.registerProtocol(c.MyComputeProtocol,s.createRuntime()),t.commands.registerCellSettingsProcessor("minecraft-metadata",d.cellSettingsProcessor);var a=b.ExtractUrlParams();t.commands.registerMarkdownImageUriTransformer((function(e){if(console.log("Uri Transformer Called: "+e),/^https?:/.test(e)||e.startsWith("/"))return e;var t=a.rootNotebookPath;return t.endsWith("/")||(t+="/"),t+e})),t.theme.registerTheme("minecraft",m.theme)}}};var v={name:"minecraft",config:i.default,activate:function(e){e.components.register("Panel",l.Panel),e.compute.registerProtocol(c.MyComputeProtocol,s.createRuntime()),e.commands.registerCellSettingsProcessor("minecraft-metadata",d.cellSettingsProcessor);var t=b.ExtractUrlParams();e.commands.registerMarkdownImageUriTransformer((function(e){if(console.log("Uri Transformer Called: "+e),/^https?:/.test(e)||e.startsWith("/"))return e;var a=t.rootNotebookPath;return a.endsWith("/")||(a+="/"),a+e})),e.theme.registerTheme("minecraft",m.theme)}};t.default=Object.assign(Object.assign({},v),{settings:u.settings,setLocStrings:p.setLocStrings})},210:function(e,t,a){"use strict";var n,r=a(130);Object.defineProperty(t,"__esModule",{value:!0});var o=a(112),i=a(98),l={mainFrame:{showStatusBar:!1,showCellStatusBar:!1,showCommandBar:!1,showCellBanner:!1,showCellVerticalToolbar:!1,showCellToolbar:!1,enableDragDrop:!1,theme:"minecraft",keyboardShortcuts:{shortcutsMode:o.KeyboardShortcutsModes.none,shortcutsOverrides:(n={},r(n,o.CommandModeShortcuts.focusEditor,!0),r(n,o.CommandModeShortcuts.executeCell,!0),r(n,o.EditModeShortcuts.unfocusEditor,!0),r(n,o.EditModeShortcuts.executeCell,!0),n)}},codeCell:{prompt:{showCounter:!1,showExecuteButton:!1},outputs:{precedingComponents:[{key:"panel",component:"Panel"}]},editor:{showLineNumber:!0}},markdownCell:{viewOnly:!0},monacoOptions:{wordWrap:"on",lineNumbersMinChars:3,scrollbar:{vertical:"auto"},quickSuggestions:{other:!1,comments:!1,strings:!1},parameterHints:{enabled:!1},suggestOnTriggerCharacters:!1,acceptSuggestionOnEnter:"off",tabCompletion:"off",wordBasedSuggestions:!1,contextmenu:!1,gotoLocation:{multiple:"goto"},codeLens:!1,lightbulb:{enabled:!1}},compute:{protocol:i.MyComputeProtocol},cellSettingProcessors:["minecraft-metadata"]};t.default=l},227:function(e,t,a){"use strict";var n=a(82),r=a(83),o=a(84),i=a(85),l=a(86),s=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),c=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&s(t,e,a);return c(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Panel=void 0;var u=d(a(78)),m=a(4),p=a(232),b=a(233),f=function(e){function t(){return n(this,t),o(this,i(t).apply(this,arguments))}return l(t,e),r(t,[{key:"render",value:function(){return this.props.cell.metadata.getIn([m.MetadataNamespace,"LibraryEditCell"])?u.createElement(p.ButtonsPanelLibrary,Object.assign({},this.props)):u.createElement(b.ButtonsPanelCodeCell,Object.assign({},this.props))}}]),t}(u.PureComponent);t.Panel=f},232:function(e,t,a){"use strict";var n=a(82),r=a(83),o=a(84),i=a(85),l=a(86),s=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),c=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&s(t,e,a);return c(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonsPanelLibrary=void 0;var u=d(a(78)),m=a(4),p=function(e){function t(){var e;return n(this,t),(e=o(this,i(t).apply(this,arguments))).libraryListItem=void 0,e.CodeLibraryProvider=m.CodeLibraryProviderInstance,e.subscription=null,e.minecraftCommander=(null===window||void 0===window?void 0:window.ipcRenderer)?m.MinecraftCommander.getInstance(window.ipcRenderer):new m.MockMinecraftCommander,e.ipcWorldStorage=(null===window||void 0===window?void 0:window.ipcWorldStorage)?window.ipcWorldStorage:new m.MockIpcWorldStorage,e.onSaveHandler=function(){var t,a,n=null===(t=e.props.commands.notebook.cells.getSnapshot(e.props.cellId))||void 0===t?void 0:t.source,r=null===(a=e.libraryListItem)||void 0===a?void 0:a.id,o=r?e.CodeLibraryProvider.getLibraryItemWithSource(r):void 0;if(r&&n&&(null===o||void 0===o?void 0:o.source)!==n){var i=e.CodeLibraryProvider.update(r,"source",n);i&&m.CrossCellMessageService.sendMessage({action:m.CrossCellMessages.LIBRARY_UPDATED,library:i})}m.CrossCellMessageService.sendMessage({action:m.CrossCellMessages.HIDE_LIBRARY_EDIT_WINDOW})},e}return l(t,e),r(t,[{key:"componentDidMount",value:function(){var e=this;this.props.commands.notebook.cells.setContent(this.props.cellId,""),this.subscription=m.CrossCellMessageService.getMessage().subscribe((function(t){switch(t.action){case m.CrossCellMessages.SEND_CURRENT_LIBRARY:if(e.libraryListItem=e.CodeLibraryProvider.getLibraryItemWithSource(t.library.id),e.libraryListItem){var a=e.props.commands.notebook.cells.getMetadata(e.props.cellId,m.MetadataNamespace);a=Object.assign(Object.assign({},a),{readonly:!!e.libraryListItem.readonly}),e.props.commands.notebook.cells.setMetadata(e.props.cellId,m.MetadataNamespace,a),e.props.commands.notebook.cells.setContent(e.props.cellId,e.libraryListItem.source)}break;case m.CrossCellMessages.LIBRARY_UPDATED:e.libraryListItem=e.CodeLibraryProvider.getLibraryItemWithSource(t.library.id);break;case m.CrossCellMessages.LIBRARY_UPDATE:e.onSaveHandler();break;case m.CrossCellMessages.TEST_LIBRARY_CODE:e.props.cell.source.length>0&&e.props.commands.notebook.cells.run(e.props.cellId)}})),m.CrossCellMessageService.sendMessage({action:m.CrossCellMessages.GET_CURRENT_LIBRARY})}},{key:"componentDidUpdate",value:function(){var e,t=this.props,a=t.cell,n=t.settings;if("code"===a.cell_type&&"code"===n.cellType){var r=n.cellStatus,o=null===(e=a.outputs.first(null))||void 0===e?void 0:e.toJSON();m.CrossCellMessageService.sendMessage({action:m.CrossCellMessages.UPDATE_OUTPUT_PANEL_DATA,data:{isRunning:"busy"===r||"queued"===r,output:o}})}}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.subscription)||void 0===e||e.unsubscribe()}},{key:"render",value:function(){return u.createElement("div",null)}}]),t}(u.PureComponent);t.ButtonsPanelLibrary=p},233:function(e,t,a){"use strict";var n=a(130),r=a(82),o=a(83),i=a(84),l=a(85),s=a(86),c=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),d=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&c(t,e,a);return d(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonsPanelCodeCell=void 0;var m=u(a(78)),p=a(199),b=a(4),f=a(234),v=a(147),h=a(146),C=a(238),g=a(242),_=a(198),y=v.createLogger("ButtonsPanelCodeCell"),E=function(e){function t(e){var a;r(this,t),(a=i(this,l(t).call(this,e))).onChangeNotebookLibraryCell$=null,a.minecraftCommander=null,a.ipcWorldStorage=null,a.CodeLibraryProvider=b.CodeLibraryProviderInstance,a.subscription=null,a.libraryCellLines={},a.codeCellContainer=null,a.panelRef=m.createRef(),a.portalEl=document.createElement("div"),a.prependElement=function(){var e,t,n,r=a.panelRef.current;null===(e=null===r||void 0===r?void 0:r.closest(".cell-not-draggable"))||void 0===e||e.classList.add("cell-not-draggable-padding"),null===(t=null===r||void 0===r?void 0:r.closest(".cell-container"))||void 0===t||t.prepend(a.portalEl),a.codeCellContainer=null===(n=null===r||void 0===r?void 0:r.closest(".cell-container"))||void 0===n?void 0:n.lastChild},a.cellPropsHelper=function(){var e=a.props;return{cellId:e.cellId,cells:e.commands.notebook.cells}},a.setCodeCellStyle=function(){var e,t,n,r=a.cellPropsHelper(),o=r.cellId,i=r.cells,l=b.getMetadata(i,o).expand,s=null===(e=a.codeCellContainer)||void 0===e?void 0:e.querySelector(".cell-code-input");if(a.codeCellContainer&&s){var c=null===(n=null===(t=a.portalEl)||void 0===t?void 0:t.firstElementChild)||void 0===n?void 0:n.firstElementChild;if(c){var d=window.getComputedStyle(c),u="rgb(255, 255, 255)"===d.borderColor?d.backgroundColor:d.borderColor;s.style.border="solid 2px ".concat(u),l?(s.classList.remove("expanderBox_shrink"),s.classList.add("expanderBox_expand")):(s.classList.remove("expanderBox_expand"),s.classList.add("expanderBox_shrink"))}}},a.handleBaseCellExecutionResults=function(e){var t,n=a.cellPropsHelper().cells,r=b.getErrorData(e,a.libraryCellLines),o=r.baseCellErrorLineNumbers,i=r.librariesErrorLineNumbers,l=r.firstErrorLineNumberAndCellId,s=Object.keys(i);if(s.forEach((function(t){var n=JSON.stringify({summary:" ".concat(e.evalue),lineNumbers:i[t]});a.updateLibraryCodeCellMetadataAndSource(t,{errorData:n,codeStatus:"error"},null)})),s.length>0){var c=l.cellId,d=l.lineNumber,u=b.getMetadata(n,c).libraryId,m=u?null===(t=a.CodeLibraryProvider.getLibraryItem(u))||void 0===t?void 0:t.name:"",p=JSON.stringify({summary:"".concat(m," line ").concat(d,"   ").concat(e.evalue),lineNumbers:o});a.updateLibraryCodeCellMetadataAndSource(a.props.cellId,{errorData:p},null),s.forEach((function(e){a.props.commands.notebook.cells.run(e)})),a.props.commands.notebook.cells.run(a.props.cellId)}},a.deleteCell=function(e){a.setFocusToCell(e),a.props.commands.notebook.cells.delete()},a.deleteLibraryCell=function(){var e=a.cellPropsHelper(),t=e.cellId,r=e.cells,o=b.getMetadata(r,t),i=o.libraryId,l=o.baseKey,s=b.getBaseCellId(r,{baseKey:l});i&&s&&b.setBaseCellLibraries({cells:r,baseCellId:s,update:n({},i,-1),deleteCellFn:a.deleteCell,updateLibraryCodeCellMetadataAndSourceFn:a.updateLibraryCodeCellMetadataAndSource,insertCellFn:a.insertCell,getLibraryItemWithSourceFn:a.CodeLibraryProvider.getLibraryItemWithSource}),s&&b.CrossCellMessageService.sendMessage({action:b.CrossCellMessages.UPDATE_ARROW_ICONS,connectedLibrariesCellIds:b.getConnectedLibrariesCellIdsSet(r,s)}),a.props.commands.notebook.save()},a.updateLibraryCodeCellMetadataAndSource=function(e,t,n){var r=a.props.commands.notebook.cells.getMetadata(e,b.MetadataNamespace);r=Object.assign(Object.assign({},r),t),a.props.commands.notebook.cells.setMetadata(e,b.MetadataNamespace,r),null!==n&&a.props.commands.notebook.cells.setContent(e,n),a.props.commands.notebook.save()},a.refresh=function(e){var t=a.props.commands.notebook.cells.getMetadata(e,b.MetadataNamespace);"object"===typeof t&&a.props.commands.notebook.cells.setMetadata(e,b.MetadataNamespace,Object.assign({},t))},a.moveBtnOnClick=function(e){var t=a.cellPropsHelper(),n=t.cellId,r=t.cells;a.setFocusToCell(n);var o=b.changeLibraryOrderData(r,n,e);if(a.props.commands.notebook.cells.move(e),o){var i=o.baseCellId,l=o.connectedLibraries,s=o.set;a.updateLibraryCodeCellMetadataAndSource(i,{connectedLibraries:l},null),b.CrossCellMessageService.sendMessage({action:b.CrossCellMessages.UPDATE_ARROW_ICONS,connectedLibrariesCellIds:s})}},a.moveUpBtnOnClick=function(e){a.moveBtnOnClick("up")},a.moveDownBtnOnClick=function(e){a.moveBtnOnClick("down")},a.removeBtnOnClick=function(e){var t;e.preventDefault(),e.stopPropagation(),"true"===(null===(t=e.currentTarget)||void 0===t?void 0:t.getAttribute("data-item-disabled"))||a.deleteLibraryCell()},a.expanderBoxToggle=function(e){var t=a.cellPropsHelper(),n=t.cellId,r=t.cells,o=b.getMetadata(r,n);a.updateLibraryCodeCellMetadataAndSource(a.props.cellId,{expand:!(null===o||void 0===o?void 0:o.expand)},null)},a.handleShowLibrariesListModal=function(){var e=a.cellPropsHelper(),t=e.cellId,n=e.cells;b.CrossCellMessageService.sendMessage({action:b.CrossCellMessages.OPEN_LIBRARIES_LIST_WINDOW,activeAznbCellId:a.props.cellId,attachedLibraryData:b.getAttachedLibraryData(n,t)})},a.deleteLibraryFromStore=function(e){var t=a.cellPropsHelper().cells,r=b.getBaseCellIds(t,{libraryId:e});r.forEach((function(r){r&&b.setBaseCellLibraries({cells:t,baseCellId:r,update:n({},e,-1),deleteCellFn:a.deleteCell,insertCellFn:a.insertCell,updateLibraryCodeCellMetadataAndSourceFn:a.updateLibraryCodeCellMetadataAndSource,getLibraryItemWithSourceFn:a.CodeLibraryProvider.getLibraryItemWithSource})})),r.forEach((function(e){e&&b.CrossCellMessageService.sendMessage({action:b.CrossCellMessages.UPDATE_ARROW_ICONS,connectedLibrariesCellIds:b.getConnectedLibrariesCellIdsSet(t,e)})})),a.props.commands.notebook.save()},a.getCodeCellLabel=function(e){var t,n=e.libraryId,r=e.baseCodeCellName;return n?null===(t=a.CodeLibraryProvider.getLibraryItem(n))||void 0===t?void 0:t.name:r||"Main"},a.insertCell=function(e,t,n){var r=a.cellPropsHelper().cells;a.setFocusToCell(e),r.insertAbove("code",t,{key:b.MetadataNamespace,value:n})},a.setBaseCellLibraries=function(e){var t=a.cellPropsHelper(),n=t.cellId,r=t.cells;b.setBaseCellLibraries({cells:r,baseCellId:n,update:e,deleteCellFn:a.deleteCell,insertCellFn:a.insertCell,updateLibraryCodeCellMetadataAndSourceFn:a.updateLibraryCodeCellMetadataAndSource,getLibraryItemWithSourceFn:a.CodeLibraryProvider.getLibraryItemWithSource}),b.CrossCellMessageService.sendMessage({action:b.CrossCellMessages.UPDATE_ARROW_ICONS,connectedLibrariesCellIds:b.getConnectedLibrariesCellIdsSet(r,n)})},a.setFocusToCell=function(e){var t=document.getElementById("editor-".concat(e));null===t||void 0===t||t.click()},a.onRunButtonClicked=function(){var e=a.cellPropsHelper(),t=e.cellId,n=e.cells,r=b.getMetadata(n,t),o=r.connectedLibraries,i=r.baseKey;if(a.props.cell.source.length>0)if(void 0===i)a.props.commands.notebook.cells.run(a.props.cellId);else{if(o&&o.length>0){a.props.commands.notebook.kernels.interrupt();var l=[],s=[];a.libraryCellLines={};var c=1;null===o||void 0===o||o.forEach((function(e){var t,r=b.getConnectedLibraryCellId(n,{libraryId:e,baseKey:i}),o=null===(t=a.CodeLibraryProvider.getLibraryItemWithSource(e))||void 0===t?void 0:t.source;o&&o.length>0&&r&&(s.push(o),l.push(r),a.libraryCellLines[r]={from:c,to:c+o.split("\n").length-1},c=a.libraryCellLines[r].to+1)})),l.forEach((function(e){a.updateLibraryCodeCellMetadataAndSource(e,{codeStatus:"ok",errorData:""},null)})),l.forEach((function(e){a.props.commands.notebook.cells.run(e)}));var d=s.join("\n");a.updateLibraryCodeCellMetadataAndSource(a.props.cellId,{overridePython:d+"\n@user-code",errorData:""},null),a.props.commands.notebook.cells.run(a.props.cellId)}o&&!o.length&&(a.updateLibraryCodeCellMetadataAndSource(a.props.cellId,{overridePython:"\n@user-code",errorData:""},null),a.props.commands.notebook.cells.run(a.props.cellId))}},a.onStopButtonClicked=function(){a.props.commands.notebook.kernels.interrupt()},a.onResetCodeButtonClicked=function(){var e;a.props.commands.notebook.cells.clearOutputs(a.props.cellId),a.props.commands.notebook.kernels.interrupt();var t=a.cellPropsHelper(),n=t.cellId,r=t.cells,o=b.getMetadata(r,n).default_code,i=void 0;"string"===typeof o?i=o:Array.isArray(o)?i=o.join(""):void 0===i?i="":y.log("Error: unexpected type of default_code:'".concat(typeof o,"' defined for cell '").concat(a.props.cellId,"'")),void 0!==i&&a.props.commands.notebook.cells.setContent(a.props.cellId,i),null===(e=a.ipcWorldStorage)||void 0===e||e.setCodeStatus(b.CodeStatus.notStarted)},a.onResetWorldButtonClicked=function(){var e;a.props.commands.notebook.kernels.interrupt();var t=a.cellPropsHelper(),n=t.cellId,r=t.cells,o=b.getMetadata(r,n).resetWorldCommand;o&&(null===(e=a.minecraftCommander)||void 0===e||e.send(new b.AnyCommand(o)))};var o=a.cellPropsHelper(),s=o.cellId,c=o.cells;return b.getMetadata(c,s).libraryId?a.onChangeNotebookLibraryCell$=new p.Subject:(a.minecraftCommander=(null===window||void 0===window?void 0:window.ipcRenderer)?b.MinecraftCommander.getInstance(window.ipcRenderer):new b.MockMinecraftCommander,a.ipcWorldStorage=(null===window||void 0===window?void 0:window.ipcWorldStorage)?window.ipcWorldStorage:new b.MockIpcWorldStorage),a}return s(t,e),o(t,[{key:"componentDidMount",value:function(){var e,t,a=this,n=this.cellPropsHelper(),r=n.cellId,o=n.cells,i=b.getMetadata(o,r);null===(e=this.onChangeNotebookLibraryCell$)||void 0===e||e.pipe(_.debounceTime(500)).subscribe((function(e){var t=e.libraryId,n=e.cellId,r=a.CodeLibraryProvider.getLibraryItemWithSource(t);r&&b.CrossCellMessageService.sendMessage({action:b.CrossCellMessages.LIBRARY_UPDATED,library:r,cellId:n})})),this.subscription=b.CrossCellMessageService.getMessage().subscribe((function(e){switch(e.action){case b.CrossCellMessages.LIBRARY_UPDATED:var t=e.library,n=t.timestamp,o=t.source,l=e.cellId;(null===i||void 0===i?void 0:i.libraryId)!==e.library.id||l&&l===r||a.updateLibraryCodeCellMetadataAndSource(a.props.cellId,{timestamp:n},o);break;case b.CrossCellMessages.ADD_REMOVE_CONNECTED_LIBRARIES_TO_BASE_CELL:r===e.activeAznbCellId&&a.setBaseCellLibraries(e.update);break;case b.CrossCellMessages.DELETE_LIBRARY_FROM_STORE:r===e.activeAznbCellId&&a.deleteLibraryFromStore(e.libraryId);break;case b.CrossCellMessages.UPDATE_ARROW_ICONS:(null===i||void 0===i?void 0:i.libraryId)&&e.connectedLibrariesCellIds.has(r)&&a.refresh(r)}})),this.props.commands.notebook.cells.onChangeContent((function(e){var t,n=i.libraryId,o=i.readonly;if(r===e.cellId&&n&&!o){var l=a.props.cell.source;a.CodeLibraryProvider.update(n,"source",l),null===(t=a.onChangeNotebookLibraryCell$)||void 0===t||t.next({libraryId:n,cellId:r})}})),this.props.commands.notebook.cells.onRun((function(e){var t,n=b.getMetadata(o,e.cellId),i=n.connectedLibraries,l=n.errorData,s=a.props.cell;if(r===e.cellId&&"code"===s.cell_type&&(null===i||void 0===i?void 0:i.length)){var c=null===(t=s.outputs.first(null))||void 0===t?void 0:t.toJSON(),d=!!l;c&&"error"===c.output_type&&!d&&a.handleBaseCellExecutionResults(Object.assign(Object.assign({},c),{traceback:c.traceback.toJSON()}))}})),this.prependElement(),this.setCodeCellStyle(),(null===(t=null===i||void 0===i?void 0:i.connectedLibraries)||void 0===t?void 0:t.length)&&b.CrossCellMessageService.sendMessage({action:b.CrossCellMessages.UPDATE_ARROW_ICONS,connectedLibrariesCellIds:b.getConnectedLibrariesCellIdsSet(o,r)})}},{key:"componentDidUpdate",value:function(){this.setCodeCellStyle()}},{key:"componentWillUnmount",value:function(){var e,t,a,n;null===(e=this.onChangeNotebookLibraryCell$)||void 0===e||e.unsubscribe(),null===(t=this.subscription)||void 0===t||t.unsubscribe(),null===(n=null===(a=this.panelRef.current)||void 0===a?void 0:a.closest(".cell-container"))||void 0===n||n.removeChild(this.portalEl)}},{key:"render",value:function(){var e=this.props,t=e.cell,a=e.settings,n=e.cellId,r=e.commands.notebook.cells;if("code"!==t.cell_type||"code"!==a.cellType)return null;var o=b.getMetadata(r,n),i=o.libraryId,l=o.baseCodeCellName,s=h.getLocStrings(),c=a.cellStatus,d="busy"===c||"queued"===c,u=t.outputs.first(null);return m.createElement("div",{ref:this.panelRef,className:"editor-buttons-panel"},C.createPortal(m.createElement(g.ExpanderBox,{moveDownBtnOnClick:this.moveDownBtnOnClick,moveUpBtnOnClick:this.moveUpBtnOnClick,removeBtnOnClick:this.removeBtnOnClick,expanderBoxToggle:this.expanderBoxToggle,metadata:o,label:this.getCodeCellLabel({libraryId:i,baseCodeCellName:l}),cellId:n,cells:r}),this.portalEl),!o.libraryId&&m.createElement(m.Fragment,null,m.createElement("hr",{className:"standard-hr"}),m.createElement("div",{className:"button-group"},d?m.createElement("button",{className:"editor-button __ButtonLiteGrey","data-testid":"AznbbStop",onClick:this.onStopButtonClicked},m.createElement("i",{className:"icon icon_stop","aria-hidden":"true"}),"\xa0",s.AznbbStop):m.createElement("button",{className:"editor-button __ButtonLiteGrey","data-testid":"AznbbRun",onClick:this.onRunButtonClicked},m.createElement("i",{className:"icon icon_play","aria-hidden":"true"}),"\xa0",s.AznbbRun),this.shouldHideCodeReset()?null:m.createElement("button",{className:"editor-button __ButtonLiteGrey","data-testid":"AznbbResetCode",onClick:this.onResetCodeButtonClicked},m.createElement("i",{className:"icon icon_refresh","aria-hidden":"true"}),"\xa0",s.AznbbResetCode),this.shouldHideWorldReset()?null:m.createElement("button",{className:"editor-button __ButtonLiteGrey","data-testid":"AznbbResetWorld",onClick:this.onResetWorldButtonClicked},m.createElement("i",{className:"icon icon_refresh","aria-hidden":"true"}),"\xa0",s.AznbbResetWorld),this.shouldHideLibrariesButton()?null:m.createElement("button",{className:"editor-button __ButtonLiteGrey","data-testid":"AznbLibraries",onClick:this.handleShowLibrariesListModal,disabled:d},m.createElement("i",{className:"icon icon_article","aria-hidden":"true"}),"\xa0",s.AznbbLibraries)),m.createElement(f.OutputPanel,{output:u,isRunning:d})))}},{key:"shouldHideCodeReset",value:function(){var e=this.cellPropsHelper(),t=e.cellId,a=e.cells;return void 0==b.getMetadata(a,t).default_code}},{key:"shouldHideLibrariesButton",value:function(){var e=this.cellPropsHelper(),t=e.cellId,a=e.cells;return!0!==b.getMetadata(a,t).enableCodeLibraryButton}},{key:"shouldHideWorldReset",value:function(){var e=this.cellPropsHelper(),t=e.cellId,a=e.cells;return void 0==b.getMetadata(a,t).resetWorldCommand}}]),t}(m.PureComponent);t.ButtonsPanelCodeCell=E},234:function(e,t,a){"use strict";var n=a(82),r=a(83),o=a(84),i=a(85),l=a(86),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OutputPanel=void 0;var c=a(4),d=s(a(78)),u=a(146),m=function(e){function t(){var e;return n(this,t),(e=o(this,i(t).apply(this,arguments))).MPS_INIT=0,e.MPS_OPEN=1,e.MPS_CLOSE=2,e.messagePanelState=e.MPS_INIT,e}return l(t,e),r(t,[{key:"render",value:function(){var e=this.props,t=e.output,a=e.isRunning,n=u.getLocStrings(),r="",o="none";a?(r=n.AznbbRunInProcess,o="running",this.messagePanelState=this.MPS_OPEN):t?"execute_result"===t.output_type?((r=t.data["text/html"])===c.ResultMessages.ExecutionSucceeds?(r=n.AznbbRunSuccessful,o="success"):r===c.ResultMessages.ExecutionCancelled&&(r=n.AznbbRunCancelled,o="warning"),this.messagePanelState=this.MPS_OPEN):"error"===t.output_type?(r=n.formatString(n.AznbbErrorRun,t.evalue),r=t.evalue,o="error",this.messagePanelState=this.MPS_OPEN):console.error("Unexpected output_type from output:'".concat(JSON.stringify(t),"'")):this.messagePanelState!==this.MPS_OPEN&&(this.messagePanelState=this.MPS_CLOSE);var i="";switch(this.messagePanelState){case this.MPS_INIT:break;case this.MPS_OPEN:i="output-message-root--open";break;case this.MPS_CLOSE:i="output-message-root--closed";break;default:console.error("Unhandled messagePanelState: "+this.messagePanelState)}return d.default.createElement("div",{className:"output-message-root "+i},d.default.createElement("hr",{className:"standard-hr"}),d.default.createElement("div",{className:"output-message-container "+o},r))}}]),t}(d.default.PureComponent);t.OutputPanel=m},242:function(e,t,a){"use strict";var n=a(82),r=a(83),o=a(84),i=a(85),l=a(86),s=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),c=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&s(t,e,a);return c(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ExpanderBox=void 0;var u=d(a(78)),m=a(4),p=a(243),b=a(244),f=function(e){function t(){return n(this,t),o(this,i(t).apply(this,arguments))}return l(t,e),r(t,[{key:"render",value:function(){var e=this.props,t=e.cellId,a=e.cells,n=e.metadata,r=e.label,o=void 0===r?"Main":r,i=e.moveDownBtnOnClick,l=e.moveUpBtnOnClick,s=e.removeBtnOnClick,c=e.expanderBoxToggle,d=!0,f=!0,v=!0;if(n.libraryId){var h=m.getLibraryCellPosition(a,t);d="preAttached"===h.kind||"custom"===h.kind&&("first"===h.position||"alone"===h.position),f="preAttached"===h.kind||"custom"===h.kind&&("last"===h.position||"alone"===h.position),v=!!n.isPreAttached}var C=n.readonly,g={kind:"Main"};return n.libraryId&&(g=n.isPredefined?{kind:"Library",libraryType:"LessonLibrary"}:{kind:"Library",libraryType:"UserLibrary"}),u.default.createElement(b.ExpanderBoxWrapper,{hasError:"error"===n.codeStatus,isMainEditor:!n.libraryId,isOpen:!!n.expand,isReadonly:!!C,cedeCellType:g},u.default.createElement("div",{className:"mc_ExpanderBox--TitleBar"},u.default.createElement("div",{className:"mc_ExpanderBox--ToggleArrow",onClick:c},u.default.createElement("i",{className:"icon icon_chevron-down"})),u.default.createElement("div",{className:"mc_ExpanderBox--Label",onClick:c},o),u.default.createElement("div",{className:"mc_ExpanderBox--ControlsRight"},u.default.createElement("div",{className:"mc_ExpanderBox--IconFlag readOnlyFlag"},u.default.createElement("i",{className:"pa2-icon pa2_lock"})),u.default.createElement(p.ExpanderBoxIcon,{btnClass:"moveUpBtn",isDisabled:d,onClickHandler:l},u.default.createElement("i",{className:"pa2-icon pa2_arrow_up__7x7"})),u.default.createElement(p.ExpanderBoxIcon,{btnClass:"moveDownBtn",isDisabled:f,onClickHandler:i},u.default.createElement("i",{className:"pa2-icon pa2_arrow_down__7x7"})),u.default.createElement(p.ExpanderBoxIcon,{btnClass:"remove-CloseBtn",isDisabled:v,onClickHandler:s},u.default.createElement("i",{className:"pa2-icon pa2_x-pixel__7x7"})))))}}]),t}(u.Component);t.ExpanderBox=f},243:function(e,t,a){"use strict";var n=a(82),r=a(83),o=a(84),i=a(85),l=a(86),s=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),c=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&s(t,e,a);return c(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ExpanderBoxIcon=void 0;var u=d(a(78)),m=function(e){function t(){return n(this,t),o(this,i(t).apply(this,arguments))}return l(t,e),r(t,[{key:"render",value:function(){var e=this.props,t=e.isDisabled,a=e.children,n=e.btnClass,r=e.onClickHandler;return u.default.createElement(u.default.Fragment,null,t?u.default.createElement("div",{className:"mc_ExpanderBox--IconButton ".concat(n),"data-item-disabled":!0},a):u.default.createElement("div",{onClick:r,className:"mc_ExpanderBox--IconButton ".concat(n)},a))}}]),t}(u.Component);t.ExpanderBoxIcon=m},244:function(e,t,a){"use strict";var n=a(82),r=a(83),o=a(84),i=a(85),l=a(86),s=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),c=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&s(t,e,a);return c(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ExpanderBoxWrapper=void 0;var u=d(a(78)),m=function(e){function t(){return n(this,t),o(this,i(t).apply(this,arguments))}return l(t,e),r(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.hasError,n=e.cedeCellType,r=e.isMainEditor,o=e.isReadonly,i=a?"mc_ExpanderBox__Error __Bright":"mc_ExpanderBox__Valid",l=e.isOpen?"mc_ExpanderBox__Open":" ",s="Library"===n.kind?"UserLibrary"===n.libraryType?"mc_ExpanderBox__UserLibrary":"mc_ExpanderBox__LessonLibrary":"",c="mc_ExpanderBox  ".concat(s,"  ").concat(i,"  ").concat(l);return u.default.createElement(u.default.Fragment,null,r&&o?u.default.createElement("div",{className:c,"data-main-editor":!0,"data-editor-readonly":!0},t):null,r&&!o?u.default.createElement("div",{className:c,"data-main-editor":!0},t):null,!r&&o?u.default.createElement("div",{className:c,"data-editor-readonly":!0},t):null,r||o?null:u.default.createElement("div",{className:c},t))}}]),t}(u.Component);t.ExpanderBoxWrapper=m},245:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntime=void 0;var n=a(246);Object.defineProperty(t,"createRuntime",{enumerable:!0,get:function(){return n.createRuntime}})},246:function(e,t,a){"use strict";var n=a(10),r=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{s(n.next(e))}catch(t){o(t)}}function l(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntime=t.setError=void 0;var o=a(199),i=a(198),l=a(247),s=a(112),c=a(98),d=a(147),u=a(4),m=d.createLogger("Minecraft-Runtime");t.setError=function(e){try{var t=JSON.parse(e),a=t.summary,n=t.lineNumbers;m.log("called setError with input ".concat(e));var r=n.map((function(e){return{startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1e3,severity:s.EditorMarkerSeverity.Error,message:a}}));return{output:{type:"error",executionCount:0,errorTarget:"Error",errorMessage:a,errorDetails:[],errorMarkers:r,metadata:{}}}}catch(o){return m.error("error parsing 'errorData'  ".concat(o.message)),{output:{type:"error",executionCount:0,errorTarget:"Error",errorMessage:"".concat(o.message),errorDetails:[],errorMarkers:[],metadata:{}}}}};var p=function(e){var t=new o.Subject,a=function(e,a){t.next({eventName:e,payload:a?JSON.parse(a):void 0})};return e.on("InitializationComplete",a),e.on("CompilationCompleted",a),e.on("ExecutionStarted",a),e.on("Error",a),e.on("Completed",a),t};function b(e,t){return{type:"html",executionCount:t,metadata:{},result:e}}function f(e,t,a,n){var r=n.map((function(e){return e.details})),o=u.getLineNumbersFromErrorOutput(r).map((function(e){return{startLineNumber:e+t,startColumn:1,endLineNumber:e+t,endColumn:1e3,severity:s.EditorMarkerSeverity.Error,message:n[0].summary}}));return{type:"error",executionCount:a,errorTarget:e,errorMessage:n.length>0?n[0].summary:"unknown",errorDetails:r,errorMarkers:o,metadata:{}}}var v=function(e,t){var a;null===(a=null===t||void 0===t?void 0:t.get(e))||void 0===a||a()},h=function(e,t,a,n){var r=JSON.stringify(e.payload),o=(n=n||{}).lineOffset||0;if("Error"===e.eventName)return v(c.CodeListenerIds.onCodeErrorCommand,a),f(e.eventName,o,t,e.payload.errors||[]);if("Completed"===e.eventName){v(c.CodeListenerIds.onCodeStoppedCommand,a);var i=e.payload.success;"Succeeded"===i?(v(c.CodeListenerIds.onCodeSuccessfulCommand,a),r=u.ResultMessages.ExecutionSucceeds):"Cancelled"===i&&(v(c.CodeListenerIds.onCodeCancelledCommand,a),r=u.ResultMessages.ExecutionCancelled)}else if("CompilationCompleted"===e.eventName){var l=e.payload.errors;if(l&&0!==l.length)return f(e.eventName,o,t,l);r=u.ResultMessages.CompilationSucceeds}return b(r,t)};t.createRuntime=function(){var e,a,o,s,d,f=this,C=window.ipcTelemetry?window.ipcTelemetry:new u.MockIpcTelemetry,g=window.ipcWorldStorage?window.ipcWorldStorage:new u.MockIpcWorldStorage,_=(null===window||void 0===window?void 0:window.ipcRenderer)?u.MinecraftCommander.getInstance(window.ipcRenderer):new u.MockMinecraftCommander,y=0,E=!1,L=new u.NotebookContentProvider(localStorage,m),I=new Map;I.set(c.CodeListenerIds.onCodeStartedCommand,u.CodeStatus.inProgress),I.set(c.CodeListenerIds.onCodeCancelledCommand,u.CodeStatus.notStarted),I.set(c.CodeListenerIds.onCodeErrorCommand,u.CodeStatus.error),I.set(c.CodeListenerIds.onCodeSuccessfulCommand,u.CodeStatus.succeeded);var k=function(e){var t=new Map;console.log("Started getOnCodeListeners");var a=function(a){var n=e.metadata.getIn([u.MetadataNamespace,a]);n&&(console.log("Found getOnCodeListeners ".concat(a," --  ").concat(n)),t.set(a,(function(){var e=I.get(a);e&&g.setCodeStatus(e),_.send(new u.AnyCommand(n))})))};for(var n in c.CodeListenerIds)a(n);return t};return _.subscribe(new u.CodebuidlerRuntimeActionCommand(!0),(function(t){t&&t.RuntimeAction==u.RuntimeAction.Stop&&(m.log("interruptExecution is called from CodebuidlerRuntimeActionCommand"),e.cancel())})),{type:"standard",initialize:function(t){return r(f,void 0,void 0,n.mark((function r(){return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return m.log("initializeCompute is called with input ".concat(JSON.stringify(t))),a=window.ipcCodeScreenRenderer||l.createIpcCodeScreenRenderer(),e=window.ipcPython||l.createIpcPythonMock(),o=p(e),s=o.pipe(i.filter((function(e){return"InitializationComplete"===e.eventName})),i.first()),E=!1,o.pipe(i.filter((function(e){return"ExecutionStarted"===e.eventName}))).subscribe({next:function(){E=!0}}),o.pipe(i.filter((function(e){return"CompilationCompleted"===e.eventName}))).subscribe({next:function(){console.log("CompilationCompleted")}}),o.pipe(i.filter((function(e){return"ExecutionStarted"===e.eventName}))).subscribe({next:function(){console.log("ExecutionStarted")}}),(d=o.pipe(i.filter((function(e){return"Completed"===e.eventName||"Error"===e.eventName})))).subscribe({next:function(){E=!1}}),o.pipe(i.filter((function(e){return"CompilationCompleted"===e.eventName}))).pipe(i.tap((function(e){m.log("Compile$ message: ".concat(JSON.stringify(e)))}))),n.abrupt("return",{message:"done"});case 14:case"end":return n.stop()}}),r)})))},connect:function(t){return r(f,void 0,void 0,n.mark((function a(){var r;return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return m.log("connectCompute is called with input ".concat(JSON.stringify(t))),e.initialize(),a.next=4,s.toPromise();case 4:return r=a.sent,a.abrupt("return",{message:"Done. Details: ".concat(JSON.stringify(r))});case 6:case"end":return a.stop()}}),a)})))},disconnect:function(e){return r(f,void 0,void 0,n.mark((function t(){return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m.log("disconnectCompute is called with input ".concat(JSON.stringify(e))),t.abrupt("return",{message:"done"});case 2:case"end":return t.stop()}}),t)})))},execute:function(o){return r(f,void 0,void 0,n.mark((function r(){var l,s,p,f,g,_,L,I,x,w,S,O,N,P;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l=o.script,s=o.cell,p=s.metadata.getIn([u.MetadataNamespace,"errorData"]),f=s.metadata.getIn([u.MetadataNamespace,"libraryId"]),!p){n.next=11;break}return g=k(s),v(c.CodeListenerIds.onCodeErrorCommand,g),n.next=8,d.pipe(i.first(),i.map((function(){return t.setError(p)}))).toPromise();case 8:return n.abrupt("return",n.sent);case 11:if(!f){n.next=20;break}return _=k(s),v(c.CodeListenerIds.onCodeSuccessfulCommand,_),n.next=16,d.pipe(i.first(),i.map((function(){return b("",y)}))).toPromise();case 16:return L=n.sent,n.abrupt("return",{output:L});case 20:if(m.log("executeCell is called with script '".concat(l,"'")),n.prev=21,!E){n.next=26;break}throw"Previous execution is not completed yet.";case 26:return y++,I=l,x=s.metadata.getIn([u.MetadataNamespace,"overridePython"]),w=0,x&&(m.log("Found Override Code: '".concat(x,"'")),"@user-code",S=x.search("@user-code"),w=-(x.substring(0,S).match(/\n/g)||[]).length,O=x.substring(0,S)+l+x.substring(S+"@user-code".length),I=O),N=k(s),v(c.CodeListenerIds.onCodeStartedCommand,N),e.execute(I),C.log({action:"execute",codeListener:N.size,hasOverrideCode:x,scriptLength:l.length}),!0===s.metadata.getIn([u.MetadataNamespace,"closeCodeBuilderOnRun"])&&a.dismiss(),n.next=39,d.pipe(i.first(),i.map((function(e){return h(e,y,N,{lineOffset:w})}))).toPromise();case 39:return P=n.sent,n.abrupt("return",{output:P});case 41:n.next=46;break;case 43:return n.prev=43,n.t0=n.catch(21),n.abrupt("return",{output:{type:"error",errorTarget:"sample runtime",errorDetails:[],errorMessage:JSON.stringify(n.t0),executionCount:y,metadata:{}}});case 46:case"end":return n.stop()}}),r,null,[[21,43]])})))},interrupt:function(t){return r(f,void 0,void 0,n.mark((function a(){return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:m.log("interruptExecution is called with input ".concat(JSON.stringify(t))),e.cancel();case 2:case"end":return a.stop()}}),a)})))},fetchContent:function(e){return r(f,void 0,void 0,n.mark((function t(){var a,r;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m.log("fetchContent is called with input ".concat(JSON.stringify(e))),a=e.url,t.next=4,L.get(a,!0);case 4:return r=t.sent,t.abrupt("return",{content:r});case 6:case"end":return t.stop()}}),t)})))},saveContent:function(e){return r(f,void 0,void 0,n.mark((function t(){var a;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m.log("saveContent is called with for url ".concat(e.url)),t.next=3,L.save(e.url,e.content);case 3:return a=e.url,t.abrupt("return",{url:a});case 5:case"end":return t.stop()}}),t)})))}}}},247:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createIpcCodeScreenRenderer=t.createIpcPythonMock=void 0;var n=a(147).createLogger("Minecraft-Mock-Host");function r(e){if(e.indexOf("!Force Error!")>=0){var t=e.split("\n"),a=[];return t.forEach((function(e,t){var n=e.indexOf("!Force Error!");if(n>=0){var r=t+1;a.push({context:"",details:'  File "CodeBuilder Script", line '.concat(r,"\n  ").concat(e,"\n  ").concat(new Array(n+1).join(" "),"^\n  Error: Explicit Error by ").concat("!Force Error!","\n  "),line:r,summary:"Error: Explicit Error by ".concat("!Force Error!")})}})),{errors:a,scriptName:"CodeBuilder Script"}}return null}var o=function(){};t.createIpcPythonMock=function(){n.log("createIpcPythonMock: Starting Mock!");var e={InitializationComplete:o,CompilationCompleted:o,ExecutionStarted:o,Error:o,Completed:o},t=!1;return{initialize:function(){n.log("Initializing"),setTimeout((function(){e.InitializationComplete({}),n.log("Initialized")}),1e3)},execute:function(a){n.log("Executing Code:\n".concat(a)),e.ExecutionStarted({}),t=!1,setTimeout((function(){if(t)e.Completed({details:"",scriptName:"CodeBuilder Script",success:"Cancelled"}),n.log("Cancelled Executing Code");else{var o=r(a);o?(e.Error(o),n.log("Error Executing Code")):(e.Completed({details:"Executed Code: ".concat(a),scriptName:"CodeBuilder Script",success:"Succeeded"}),n.log("Completed Executing Code"))}}),1e3)},compile:function(t){n.log("Compiling Code:\n".concat(t)),setTimeout((function(){var a=r(t);a?(e.Error(a),n.log("Error Compiling Code")):(e.CompilationCompleted({}),n.log("Completed Compiling Code"))}),1e3)},cancel:function(){t=!0,n.log("Mark current execution cancelled")},on:function(t,a){e[t]=function(e){return a(t,JSON.stringify(e))}},once:function(t,a){e[t]=function(e){return a(t,JSON.stringify(e))}}}},t.createIpcCodeScreenRenderer=function(){return n.log("Using Mock IPCCodeScreenRederer"),{dismiss:function(){n.log("MockHost: closing window")},registerResetCallback:function(e){n.log("MockHost: registerResetCallback: ".concat(e))},unregisterResetCallback:function(e){n.log("MockHost: unregisterResetCallback: ".concat(e))},on:function(e){n.log("On event called ".concat(e))},removeListener:function(e){n.log("removeListener called ".concat(e))},once:function(e){n.log("once called ".concat(e))}}}},248:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cellSettingsProcessor=void 0;var n=a(98);t.cellSettingsProcessor=function(e,t,a){var r=a;!0===t.metadata.getIn([n.MetadataNamespace,"readonly"])&&!1===r.editor.readOnly&&(r=r.setIn(["editor","readOnly"],!0));var o=t.metadata.getIn([n.MetadataNamespace,"numberOfLines"]);return"number"===typeof o&&o>0&&o!==r.editor.numberOfLines&&(r=r.setIn(["editor","numberOfLines"],o)),!0===t.metadata.getIn([n.MetadataNamespace,"hidden"])&&!0===r.showCell&&(r=r.setIn(["showCell"],!1)),r}},249:function(e,t,a){},250:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.theme=void 0;var n=a(112);t.theme={base:n.Themes.Dark,variables:new Map([["--theme-app-bg","transparent"],["--theme-app-fg","#f3f2f1"],["--theme-app-border","#1b1a19"],["--theme-primary-bg","transparent"],["--theme-primary-bg-hover","transparent"],["--theme-primary-bg-focus","transparent"],["--theme-primary-fg","#f3f2f1"],["--theme-primary-fg-hover","#f3f2f1"],["--theme-primary-fg-focus","#f3f2f1"],["--theme-secondary-bg","#201f1e"],["--theme-secondary-bg-hover","#201f1e"],["--theme-secondary-bg-focus","#201f1e"],["--theme-secondary-fg","#252423"],["--theme-secondary-fg-hover","#292827"],["--theme-secondary-fg-focus","#323130"],["--theme-primary-shadow-hover","0px 0px 6px rgba(0, 0, 0, 0.6)"],["--theme-primary-shadow-focus","box-shadow(0px 0px 8px #000000)"],["--theme-title-bar-bg","#2DFFFE"],["--theme-menu-bg","#3b3a39"],["--theme-menu-bg-hover","#323130"],["--theme-menu-bg-focus","#292827"],["--theme-menu-shadow","var(--theme-primary-shadow-hover)"],["--theme-menu-fg","#f3f2f1"],["--theme-menu-fg-hover","#f3f2f1"],["--theme-menu-fg-focus","#f3f2f1"],["--theme-cell-bg","transparent"],["--theme-cell-shadow-hover","var(--theme-primary-shadow-hover)"],["--theme-cell-shadow-focus","var(--theme-primary-shadow-focus)"],["--theme-cell-vertical-toolbar-button-bg","#323130"],["--theme-cell-vertical-toolbar-button-bg-hover","#484644"],["--theme-cell-vertical-toolbar-button-fg","#f3f2f1"],["--theme-cell-vertical-toolbar-button-fg-hover","#edebe9"],["--theme-cell-state-bar-cell-focused-bg","transparent"],["--theme-cell-state-bar-editor-focused-bg","transparent"],["--theme-cell-state-bar-no-focus-hover-bg","transparent"],["--theme-cell-execute-button-command-mode-bg","#1891e2"],["--theme-cell-execute-button-command-mode-bg-hover","#42a2e2"],["--theme-cell-execute-button-command-mode-fg","#000000"],["--theme-cell-execute-button-command-mode-fg-hover","#000000"],["--theme-cell-execute-button-edit-mode-bg","#66a656"],["--theme-cell-execute-button-edit-mode-bg-hover","#7ab46c"],["--theme-cell-execute-button-edit-mode-fg","#000000"],["--theme-cell-execute-button-edit-mode-fg-hover","#000000"],["--theme-cell-execute-button-hover-bg","#3b3a39"],["--theme-cell-execute-button-hover-bg-hover","#484644"],["--theme-cell-execute-button-hover-fg","#1891e2"],["--theme-cell-execute-button-hover-fg-hover","#1891e2"],["--theme-cell-prompt-bg","#201f1e"],["--theme-cell-prompt-bg-hover","#292827"],["--theme-cell-prompt-bg-focus","#3b3a39"],["--theme-cell-prompt-fg","#f3f2f1"],["--theme-cell-prompt-fg-hover","#f3f2f1"],["--theme-cell-prompt-fg-focus","#f3f2f1"],["--theme-cell-toolbar-bg","#201f1e"],["--theme-cell-toolbar-bg-hover","#323130"],["--theme-cell-toolbar-bg-focus","#3b3a39"],["--theme-cell-toolbar-fg","#f3f2f1"],["--theme-cell-toolbar-fg-hover","#f3f2f1"],["--theme-cell-toolbar-fg-focus","#f3f2f1"],["--theme-cell-menu-bg","#252423"],["--theme-cell-menu-bg-hover","#323130"],["--theme-cell-menu-bg-focus","#3b3a39"],["--theme-cell-menu-fg","#f3f2f1"],["--theme-cell-menu-fg-hover","#f3f2f1"],["--theme-cell-menu-fg-focus","#f3f2f1"],["--theme-cell-menu-linktext","0px solid"],["--theme-cell-input-bg","#1e1e1e"],["--theme-cell-input-fg","#f3f2f1"],["--theme-cell-output-bg","transparent"],["--theme-cell-output-bg-hover","transparent"],["--theme-cell-output-bg-focus","transparent"],["--theme-cell-output-fg","#f3f2f1"],["--theme-cell-creator-bg","#252423"],["--theme-cell-creator-bg-hover","#323130"],["--theme-cell-creator-bg-focus","#3b3a39"],["--theme-cell-creator-fg","#f3f2f1"],["--theme-cell-creator-fg-hover","#f3f2f1"],["--theme-cell-creator-fg-focus","#f3f2f1"],["--theme-error-fg","hsl(0, 100%, 95%)"],["--theme-error-bg","hsl(0, 100%, 30%)"],["--theme-pager-bg","#111"],["--theme-cell-border-width","0"],["--theme-cell-input-border-width","1px"],["--theme-cell-input-border-color","#323130"],["--theme-cell-input-active-border-width","1px"],["--prompt-width","0px"]]),monacoTheme:{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":"#00000000"}}}},254:function(e,t,a){e.exports={modal_dialogClassName_editor:"Editor_modal_dialogClassName_editor__1XGG2",editor_body:"Editor_editor_body__3EeFS",edit_panel_monaco_frame:"Editor_edit_panel_monaco_frame__2Gr-C",edit_panel_buttons:"Editor_edit_panel_buttons__2pQXV",edit_panel_output_wrapper:"Editor_edit_panel_output_wrapper__2oTl_",edit_panel_button:"Editor_edit_panel_button__1jkCm",edit_panel_results_container_hidden:"Editor_edit_panel_results_container_hidden__p8kfw",edit_panel_results_container_shown:"Editor_edit_panel_results_container_shown__34mV6",edit_panel_close_button:"Editor_edit_panel_close_button__22Duf"}},255:function(e,t,a){e.exports={output_message_root:"OutputPanel_output_message_root__3BbO4",output_message_root__open:"OutputPanel_output_message_root__open__3AOBJ",scaleopen:"OutputPanel_scaleopen__1uteu",output_message_root__closed:"OutputPanel_output_message_root__closed__3fsY3",scaleclosed:"OutputPanel_scaleclosed__4PMv-",output_message_container:"OutputPanel_output_message_container__1-7lK",none:"OutputPanel_none__3GHA7",alert:"OutputPanel_alert__3nQyY",reveal:"OutputPanel_reveal__zvhr1",standard:"OutputPanel_standard__3VNcs",success:"OutputPanel_success__1A9JB",error:"OutputPanel_error__RrpRT",running:"OutputPanel_running__1GzpO",warning:"OutputPanel_warning__4MMhf"}},256:function(e,t,a){},257:function(e,t,a){e.exports={wrapper:"libraries-list-accordion_wrapper__eDGpj"}},259:function(e,t,a){},260:function(e,t,a){},280:function(e,t,a){},290:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(6),o=a(9),i=a(7),l=a(8),s=a(1),c=a.n(s),d=a(4),u=a(58),m=a(10),p=a.n(m),b=a(22),f=a(204),v=a.n(f),h=a(209),C=a.n(h),g=a(14),_=function(){function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"notebook-container";Object(n.a)(this,e),this.isInitialized=void 0,this.rootElementId=void 0,this.telemetryLogger=void 0,this.aznbTranslations=void 0,this.locale=void 0,this.loadedNotebook=null,this.rootElementId=r,this.locale=a,this.isInitialized=!1,this.aznbTranslations=t,this.telemetryLogger=Object(g.a)()}return Object(r.a)(e,[{key:"initialize",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C.a.setLocStrings(this.locale,this.aznbTranslations),v.a.registerExtension(C.a),e.abrupt("return",v.a.init({resourceUrl:"https://minecraftresource.notebooks.azure.net",userHasGivenCookieConsent:!1,lazyLoadEditor:!1,getResourceIdAndKey:function(){return Promise.resolve({notebookResourceId:"",notebookResourceKey:""})}}).then((function(){t.isInitialized=!0})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadComponent",value:function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isInitialized){e.next=2;break}throw new Error("Initialize needs to be called before proceeding.");case 2:return e.next=4,v.a.loadNotebook({parentElementId:this.rootElementId,filePath:t,getNotebookStorageOptions:function(){return Promise.resolve({saveAs:function(e){return Promise.resolve("dummypath")}})},config:{disableAutoSave:a,disableOutputIframe:!0,showSurveyBar:!1,locale:Object(h.mapLocaleToAznbLocale)(this.locale)},extensions:["minecraft"]});case 4:return this.loadedNotebook=e.sent,n={name:"Local",targetUrl:"http://localhost:8888",getAuthSettings:function(){return Promise.resolve({authType:"token",token:"token to access your local jupyter host"})},shouldMount:!1},this.loadedNotebook.setCompute({targetSettings:n}),e.abrupt("return",this.loadedNotebook);case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"stopNotebookCode",value:function(){var e;null===(e=this.loadedNotebook)||void 0===e||e.kernels.interrupt()}},{key:"dispose",value:function(){var e,t,a;null===(e=this.loadedNotebook)||void 0===e||null===(t=e.kernels)||void 0===t||t.interrupt(),null===(a=this.loadedNotebook)||void 0===a||a.dispose()}}]),e}(),y=a(203);function E(e,t){return!!t&&t.includes(e)}function L(){return(L=Object(b.a)(p.a.mark((function e(t,a){var n,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:Object.create(null),mode:"cors"},e.prev=1,e.next=4,fetch(t,n);case 4:return r=e.sent,e.t0=d.LessonData,e.next=8,r.json();case 8:if(e.t1=e.sent,"Right"!==(o=e.t0.decode.call(e.t0,e.t1))._tag){e.next=15;break}return Object(d.addLessonLibrariesToLocalStore)(o.right.libraries),e.abrupt("return",Object(y.a)({},o.right,{isLanguageSupported:E}));case 15:throw new Error("Invalid LessonData. title, description and pages are all required values.");case 16:e.next=22;break;case 18:throw e.prev=18,e.t2=e.catch(1),console.error("Failed to get lesson data: ".concat(e.t2)),e.t2;case 22:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}var I=a(20),k=a(23),x=a(25),w=a(18),S=a(291),O=a(253),N=a(28),P=a(124),B=a.n(P),M=function(e){var t=e.title,a=e.handleOnClose,n=e.displayLockIcon;return c.a.createElement("div",{className:"modal-header","data-testid":"libraries-modal-title"},c.a.createElement("button",{type:"button",className:"print hide","aria-label":"Print"},c.a.createElement("i",{className:"icon icon_close"})),c.a.createElement("div",{className:"modal-title-flagged-space"},n&&c.a.createElement("div",{className:"modal-title-flag-readonly"},c.a.createElement("i",{className:"pa2-icon pa2_lock"})),c.a.createElement("h1",{className:"modal-title ".concat(B.a.modal_title)},t)),c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:a},c.a.createElement("i",{className:"icon icon_close"})))};M.displayName="ModalTitle";var A=function(e){var t=e.stateSlice,a=Object(N.a)().t,n=Object(I.b)(a),r=Object(w.a)((function(e){return{deleteLibrary:e.deleteLibrary,setCrossCellState:e.setCrossCellState}})),o=r.deleteLibrary,i=r.setCrossCellState,l=Object(s.useCallback)((function(){var e=t.diff,a=t.currentBaseCodeCellId,n=t.attachedLibraryData;i({kind:"librariesList",displayedModalWindow:"librariesList",diff:e,currentBaseCodeCellId:a,attachedLibraryData:n})}),[i,t]);return c.a.createElement(S.a,{"data-testid":"library-delete-conformation-modal",show:!0,onHide:l,backdrop:"static",size:"lg",contentClassName:"__notch-width-padding",dialogClassName:B.a.modal_dialogClassName,centered:!0},c.a.createElement(S.a.Header,{bsPrefix:"-"},c.a.createElement(M,{handleOnClose:l,title:n("AznblpLibraryDeleteWindowTitle")})),c.a.createElement(S.a.Body,{"data-testid":"library-delete-conformation-modal-body"},"".concat(n("AznblpLibraryDeleteWindowMsgPrefix")).concat(t.currentLibraryItem.name).concat(n("AznblpLibraryDeleteWindowMsgSuffix"))),c.a.createElement(S.a.Footer,{bsPrefix:"-",className:B.a.modal_footer_wrapper},c.a.createElement(O.a,{"data-testid":"library-delete-conformation-modal-cancel-button",onClick:l,bsPrefix:"-",className:"__ButtonGrey ".concat(B.a.modal_footer_button)},n("AznblpNewDiagCancelButton")),c.a.createElement(O.a,{bsPrefix:"-","data-testid":"library-delete-conformation-modal-delete-button",className:"__ButtonGrey ".concat(B.a.modal_footer_button),onClick:function(){o(t.currentLibraryItem.id,t)}},n("AznblpDeleteBtn"))))};var j=a(254),R=a.n(j),T=a(255),D=a.n(T),z=1,W=2,F=function(e){var t=e.isRunning,a=e.output,n=W,r=Object(N.a)().t,o=Object(I.b)(r),i="",l=D.a.none;t?(i=o("AznbbRunInProcess"),l=D.a.running,n=z):a?"execute_result"===a.output_type&&"string"===typeof a.data["text/html"]?((i=a.data["text/html"]||"")===d.ResultMessages.ExecutionSucceeds?(i=o("AznbbRunSuccessful"),l=D.a.success):i===d.ResultMessages.ExecutionCancelled&&(i=o("AznbbRunCancelled"),l=D.a.warning),n=z):"error"===a.output_type?(i=o("AznbbErrorRun")+" "+a.evalue,i=a.evalue,l=D.a.error,n=z):console.error("Unexpected output_type from output:'".concat(JSON.stringify(a),"'")):n=W;var s="";switch(n){case z:s=D.a.output_message_root__open;break;case W:s=D.a.output_message_root__closed;break;default:console.error("Unhandled messagePanelState: "+n)}return c.a.createElement("div",{className:"".concat(D.a.output_message_root,"  ").concat(s)},c.a.createElement("hr",null),c.a.createElement("div",{className:"".concat(D.a.output_message_container," ").concat(l)},i))};var H=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).aznbLoader=void 0,a.unsubscribe=null,a.handleOnClose=function(){var e=a.props.stateSlice,t=e.diff,n=e.currentBaseCodeCellId,r=e.attachedLibraryData;d.appStore.getState().setCrossCellState({kind:"librariesList",displayedModalWindow:"librariesList",diff:t,currentBaseCodeCellId:n,attachedLibraryData:r})},a.handleOnRename=function(){return d.appStore.getState().send({action:"OPEN_LIBRARY_RENAME_WINDOW"})},a.handleOnSave=function(){return d.appStore.getState().send({action:"LIBRARY_UPDATE"})},a.hidePanel=function(){a.setState({panelStatus:"hidden"})},a.handleOnTest=function(){d.appStore.getState().send({action:"TEST_LIBRARY_CODE"})},a.translate=Object(I.b)(a.props.t),a.state={librarySourceEditorOutputPanelData:{output:null,isRunning:!1},panelStatus:"hidden"};var r=Object(I.a)(a.props.t),l=r.aznbTranslations,s=r.locale;return a.aznbLoader=new _(l,s,"editLibraryAZNB"),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.aznbLoader.initialize();case 2:return t="lessons/EmptyLib/lib.ipynb",a=window.location.href.search("index.html"),t=a>0?"".concat(window.location.href.substring(0,a)).concat(t):"".concat(window.location.origin,"/").concat(t),e.next=7,this.aznbLoader.loadComponent(t,!0);case 7:this.unsubscribe=d.appStore.subscribe((function(e){n.setState({librarySourceEditorOutputPanelData:e,panelStatus:"hidden"===n.state.panelStatus&&e.isRunning?"shown":n.state.panelStatus})}),(function(e){return e.librarySourceEditorOutputPanelData}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e;null===(e=this.unsubscribe)||void 0===e||e.call(this),this.aznbLoader.dispose()}},{key:"render",value:function(){var e=this.props.stateSlice,t=this.state,a=t.librarySourceEditorOutputPanelData,n=a.isRunning,r=a.output,o=t.panelStatus;return c.a.createElement(S.a,{show:!0,onHide:this.handleOnClose,size:"lg",dialogClassName:R.a.modal_dialogClassName_editor,contentClassName:"__notch-width-padding",backdrop:"static",centered:!0,"data-testid":"library-edit-modal"},c.a.createElement(S.a.Header,{bsPrefix:"-"},c.a.createElement(M,{handleOnClose:this.handleOnClose,title:e.currentLibraryItem.name,displayLockIcon:!!e.currentLibraryItem.readonly})),c.a.createElement(S.a.Body,{bsPrefix:"-",className:R.a.editor_body},c.a.createElement("div",{className:R.a.edit_panel_monaco_frame},c.a.createElement("div",{id:"editLibraryAZNB"})),c.a.createElement("div",{className:R.a.edit_panel_output_wrapper},c.a.createElement("div",{className:"".concat(R.a.edit_panel_results_container_hidden,"  ").concat("shown"===o?R.a.edit_panel_results_container_shown:"shown")},"shown"===o&&c.a.createElement(c.a.Fragment,null,c.a.createElement(F,{output:r,isRunning:n}),c.a.createElement("button",{"aria-label":"Dismiss",className:R.a.edit_panel_close_button,disabled:n,onClick:this.hidePanel},c.a.createElement("i",{className:"icon icon_close","aria-hidden":"true"}))))),c.a.createElement("div",{className:R.a.edit_panel_buttons},c.a.createElement("button",{"data-testid":"library-test-btn",onClick:this.handleOnTest,disabled:n,className:"__ButtonGrey ".concat(R.a.edit_panel_button)},this.translate("AznblpTestBtn")),c.a.createElement("button",{disabled:n,"data-testid":"library-rename-btn",onClick:this.handleOnRename,className:"__ButtonGrey ".concat(R.a.edit_panel_button)},this.translate("AznblpRenameBtn")),c.a.createElement("button",{"data-testid":"library-done-btn",disabled:n,onClick:this.handleOnSave,className:"__ButtonGrey ".concat(R.a.edit_panel_button)},this.translate("AznblpSaveBtn")))))}}]),t}(c.a.PureComponent),U=Object(u.a)()(H),G=a(298),J=a(297),K=(a(256),function(e){return c.a.createElement("label",{"data-testid":"libraries-modal-list-checkbox-label",className:"check option"},c.a.createElement("input",Object.assign({"data-testid":"libraries-modal-list-checkbox ",className:"check__input",type:"checkbox"},e)),c.a.createElement("span",{className:"check__box"}))});K.displayName="Mc-Checkbox";var Y={overflow:"hidden"},$=function(e){var t=e.item,a=e.children;return c.a.createElement(c.a.Fragment,null,t.predefined?t.readonly?c.a.createElement("div",{className:"mc_ListItem","data-bold-title":!0,"data-controls-deletable":!0,"data-controls-no-delete":!0,"data-controls-editor":!0,"data-controls-readonly":!0},a):c.a.createElement("div",{className:"mc_ListItem","data-bold-title":!0,"data-controls-deletable":!0,"data-controls-no-delete":!0,"data-controls-editor":!0},a):c.a.createElement("div",{className:"mc_ListItem","data-controls-deletable":!0,"data-controls-editor":!0},a))},V=function(e){var t=e.item,a=e.attachedLibraryData,n=Object(w.a)((function(e){return{setAttachedLibraries:e.setAttachedLibraries,setCrossCellState:e.setCrossCellState,crossCellState:e.crossCellState}})),r=n.setAttachedLibraries,o=n.setCrossCellState,i=n.crossCellState;var l=function(){"librariesList"===i.kind&&o({kind:"crud",displayedModalWindow:"editLibrarySource",diff:i.diff,currentBaseCodeCellId:i.currentBaseCodeCellId,attachedLibraryData:a,currentLibraryItem:t})};return c.a.createElement($,{attachedLibraryData:a,item:t},c.a.createElement("div",{className:"mc_ListItem--TitleBar"},c.a.createElement(K,{disabled:a[t.id],onChange:function(e){"librariesList"===i.kind&&r(t.id,e.currentTarget.checked,i)},defaultChecked:void 0!==a[t.id]}),a[t.id],c.a.createElement("div",{className:"mc_ListItem--Label"},t.name),c.a.createElement("div",{className:"mc_ListItem--ControlsRight",style:Y},c.a.createElement("div",{className:"mc_ListItem--IconButton mc_ListItem--ViewBtn",onClick:l},c.a.createElement("i",{className:"pa2-icon pa2_search"})),c.a.createElement("div",{className:"mc_ListItem--IconButton mc_ListItem--EditBtn",onClick:l},c.a.createElement("i",{className:"pa2-icon pa2_edit_short"})),c.a.createElement("div",{className:"mc_ListItem--IconButton mc_ListItem--DeleteBtn",onClick:function(){"librariesList"===i.kind&&o({kind:"crud",displayedModalWindow:"deleteLibrary",diff:i.diff,currentBaseCodeCellId:i.currentBaseCodeCellId,attachedLibraryData:a,currentLibraryItem:t})}},c.a.createElement("i",{className:"pa2-icon pa2_trash_default"})),c.a.createElement("div",{className:"mc_ListItem--IconFlag mc_ListItem--LockedFlag"},c.a.createElement("i",{className:"pa2-icon pa2_lock"})))))},q={textAlign:"center"},X=Object(s.memo)((function(e){var t=e.filter,a=Object(N.a)().t,n=Object(I.b)(a),r=Object(w.a)((function(e){return{getFilteredLibraries:e.getFilteredLibraries,crossCellState:e.crossCellState}})),o=r.getFilteredLibraries,i=r.crossCellState,l=o(t);return c.a.createElement(c.a.Fragment,null,"librariesList"===i.kind&&(l.length?c.a.createElement("div",null,l.map((function(e){return c.a.createElement(V,{item:e,key:e.id,attachedLibraryData:i.attachedLibraryData})}))):c.a.createElement("div",{className:"mc_ListItem--TitleBar"},c.a.createElement("div",{style:q,className:"mc_ListItem--Label __Font_NotoSans_Italic"},n("AznblpCodeLibraryMyLibrariesEmpty")))))}));X.displayName="LibrariesList";var Z=a(155),Q=a(184),ee="mc_ExpanderBox mc_ExpanderBox__Dark __NoMargin",te=Object(s.memo)((function(e){var t=e.title,a=e.eventKey,n=e.callback,r=e.accordionKey,o=Object(w.a)((function(e){return{toggleAccordionsActiveKey:e.toggleAccordionsActiveKey}})).toggleAccordionsActiveKey,i=Object(s.useContext)(Z.a),l=Object(Q.b)(a,(function(){return o(r),n&&n(a)})),d=i===a?"".concat(ee,"  mc_ExpanderBox__Open"):ee;return c.a.createElement("div",{className:d,"data-main-editor":!0},c.a.createElement("div",{className:"mc_ExpanderBox--TitleBar"},c.a.createElement("div",{className:"mc_ExpanderBox--ToggleArrow"},c.a.createElement("i",{className:"icon icon_chevron-down",onClick:l})),c.a.createElement("div",{className:"mc_ExpanderBox--Label"},t),c.a.createElement("div",{className:"mc_ExpanderBox--ControlsRight"},c.a.createElement("div",{className:"mc_ExpanderBox--IconFlag readOnlyFlag"},c.a.createElement("i",{className:"pa2-icon pa2_lock"})),c.a.createElement("div",{className:"mc_ExpanderBox--IconButton moveUpBtn"},c.a.createElement("i",{className:"pa2-icon pa2_arrow_up__7x7"})),c.a.createElement("div",{className:"mc_ExpanderBox--IconButton moveDownBtn"},c.a.createElement("i",{className:"pa2-icon pa2_arrow_down__7x7"})),c.a.createElement("div",{className:"mc_ExpanderBox--IconButton remove-CloseBtn"},c.a.createElement("i",{className:"pa2-icon pa2_x-pixel__7x7"})))))}));te.displayName="AccordionHeader";var ae=a(257),ne=a.n(ae),re=function(e){return e?"1":"0"},oe=Object(s.memo)((function(e){var t=e.title,a=e.filter,n=e.accordionKey,r=Object(w.a)((function(e){return{accordionsActiveKeys:e.accordionsActiveKeys}})).accordionsActiveKeys;return c.a.createElement(G.a,{defaultActiveKey:re("predefined"===a?r[0]:r[1]),bsPrefix:"-"},c.a.createElement(J.a,{bsPrefix:"-",className:ne.a.wrapper},c.a.createElement(te,{eventKey:"1",title:t,accordionKey:n}),c.a.createElement(G.a.Collapse,{eventKey:"1"},c.a.createElement(X,{filter:a}))))}));oe.displayName="LibrariesListAccordion";var ie=Object(s.memo)((function(){var e=Object(N.a)().t,t=Object(I.b)(e),a=Object(w.a)((function(e){return{crossCellState:e.crossCellState,send:e.send,setCrossCellState:e.setCrossCellState,getFilteredLibraries:e.getFilteredLibraries}})),n=a.crossCellState,r=a.send,o=a.setCrossCellState,i=a.getFilteredLibraries,l=Object(s.useCallback)((function(){o({kind:"idle",displayedModalWindow:"none"})}),[]);return c.a.createElement(S.a,{"data-testid":"libraries-list-modal",show:!0,onHide:l,backdrop:"static",size:"lg",contentClassName:"__notch-width-padding",dialogClassName:B.a.modal_dialogClassName,centered:!0},c.a.createElement(S.a.Header,{bsPrefix:"-",className:B.a.library_list_modal_header},c.a.createElement(M,{handleOnClose:l,title:t("AznblpCodeLibraryWindowTitle")})),c.a.createElement(S.a.Body,{bsPrefix:"-",className:"".concat(B.a.library_list_modal_body," modal-body")},c.a.createElement("div",{className:B.a.library_list_wrapper},c.a.createElement("p",{"data-testid":"libraries-list-modal-body-text",className:B.a.library_list_modal_body_title},t("AznblpCodeLibraryWindowMsg")),i("predefined").length?c.a.createElement("div",{className:B.a.library_list_accordion},c.a.createElement(oe,{title:t("AznblpCodeLibraryLessonLibraries"),accordionKey:0,filter:"predefined"}),c.a.createElement(oe,{title:t("AznblpCodeLibraryMyLibraries"),accordionKey:1,filter:"custom"})):c.a.createElement(X,{filter:"custom"}))),c.a.createElement(S.a.Footer,{bsPrefix:"-",className:B.a.modal_footer_wrapper},c.a.createElement(O.a,{"data-testid":"libraries-list-modal-new-file-button",bsPrefix:"-",className:"__ButtonGrey ".concat(B.a.modal_footer_button),onClick:function(){"librariesList"===n.kind&&o({kind:"crud",displayedModalWindow:"upsertLibraryName",diff:n.diff,attachedLibraryData:n.attachedLibraryData,currentLibraryItem:{id:"",name:"",timestamp:0},currentBaseCodeCellId:n.currentBaseCodeCellId})}},t("AznblpCreateNewBtn")),c.a.createElement(O.a,{"data-testid":"libraries-list-modal-done-button",bsPrefix:"-",onClick:function(){"librariesList"===n.kind&&Object.values(n.diff).length&&r({action:"ADD_REMOVE_CONNECTED_LIBRARIES_TO_BASE_CELL",activeAznbCellId:n.currentBaseCodeCellId,update:n.diff}),o({kind:"idle",displayedModalWindow:"none"})},className:"__ButtonGrey ".concat(B.a.modal_footer_button)},t("AznblpDoneBtn"))))}));ie.displayName="LibrariesModal";var le=a(293),se=function(e){var t=e.stateSlice,a=Object(N.a)().t,n=Object(I.b)(a),r=Object(w.a)((function(e){return{upsertLibraryName:e.upsertLibraryName,getFilteredLibraries:e.getFilteredLibraries,setCrossCellState:e.setCrossCellState}})),o=r.upsertLibraryName,i=r.getFilteredLibraries,l=r.setCrossCellState,d=Object(s.useState)(t.currentLibraryItem.name),u=Object(k.a)(d,2),m=u[0],p=u[1],b=Object(s.useState)(!1),f=Object(k.a)(b,2),v=f[0],h=f[1],C=Object(s.useCallback)((function(){var e=t.diff,a=t.currentBaseCodeCellId,n=t.attachedLibraryData,r=t.currentLibraryItem,o=r.id?{kind:"crud",displayedModalWindow:"editLibrarySource",diff:e,currentBaseCodeCellId:a,attachedLibraryData:n,currentLibraryItem:r}:{kind:"librariesList",displayedModalWindow:"librariesList",diff:e,currentBaseCodeCellId:a,attachedLibraryData:n};l(o)}),[]),g=m.length<1||t.currentLibraryItem.name.toLowerCase()===m.toLowerCase();return c.a.createElement(S.a,{"data-testid":"library-name-edit-modal",show:!0,onHide:C,backdrop:"static",size:"lg",dialogClassName:B.a.modal_dialogClassName,contentClassName:"__notch-width-padding",centered:!0},c.a.createElement(S.a.Header,{bsPrefix:"-"},c.a.createElement(M,{handleOnClose:C,title:t.currentLibraryItem.id?n("AznblpRenameLibraryWindowTitle"):n("AznblpNewLibraryWindowTitle")})),c.a.createElement(S.a.Body,{className:"modal-body __full-width"},c.a.createElement(le.a.Group,{className:B.a.library_name_input},c.a.createElement(le.a.Control,{"data-testid":"library-name-edit-input",className:"textbox",size:"sm",type:"text",placeholder:n("AznblpNewLibraryInputFieldPlaceholder"),value:m,onChange:function(e){var t=e.target.value;t.length<=64&&p(t)},bsPrefix:"-"})),v&&c.a.createElement("div",{className:B.a.library_name_warning_wrapper},c.a.createElement("div",{"data-testid":"library-name-validation-msg-line-1",className:B.a.library_name_warning_line_1},n("AznblpLibraryNameDuplicateWarningMsgLine1")),c.a.createElement("div",{"data-testid":"library-name-validation-msg-line-2",className:B.a.library_name_warning_line_2},n("AznblpLibraryNameDuplicateWarningMsgLine2")))),c.a.createElement(S.a.Footer,{bsPrefix:"-",className:B.a.modal_footer_wrapper},c.a.createElement(O.a,{"data-testid":"library-name-edit-cancel-button",onClick:C,bsPrefix:"-",className:"__ButtonGrey ".concat(B.a.modal_footer_button)},n("AznblpNewDiagCancelButton")),c.a.createElement(O.a,{"data-testid":"library-name-edit-ok-button",bsPrefix:"-",disabled:g,className:"__ButtonGrey ".concat(B.a.modal_footer_button),onClick:function(){if(m.length>0)if(i("all").find((function(e){return e.name.toLocaleLowerCase()===m.toLowerCase().trim()})))h(!0);else{var e=t.currentLibraryItem;h(!1);var a=e.name?{action:"update",libraryName:m,libraryId:e.id}:{action:"insert",libraryName:m};o(a,t)}}},n("AznblpOkBtn"))))};a(259);var ce=function(e){var t=e.nextButton,a=e.previousButton,n=Object(w.a)((function(e){return{crossCellState:e.crossCellState}})).crossCellState;return c.a.createElement("div",{id:"footerButtons",className:"footer_controls"},c.a.createElement("button",{id:"footerButtonPrevious",className:"footer-button __ButtonLiteGrey arrow-nav arrow-nav-left"+(a?"":" disabled"),disabled:void 0==a,onClick:null===a||void 0===a?void 0:a.onClick},c.a.createElement("i",{className:"icon icon_chevron-down","aria-hidden":"true"})),c.a.createElement("button",{id:"footerButtonNext",className:"footer-button __ButtonLiteGrey arrow-nav arrow-nav-right"+(t?"":" disabled"),disabled:void 0==t,onClick:null===t||void 0===t?void 0:t.onClick},c.a.createElement("i",{className:"icon icon_chevron-down","aria-hidden":"true"})),"librariesList"===n.kind&&c.a.createElement(ie,null),"crud"===n.kind&&"upsertLibraryName"===n.displayedModalWindow&&c.a.createElement(se,{stateSlice:n}),"crud"===n.kind&&"deleteLibrary"===n.displayedModalWindow&&c.a.createElement(A,{stateSlice:n}),"crud"===n.kind&&"editLibrarySource"===n.displayedModalWindow&&c.a.createElement(U,{stateSlice:n}))};var de=a(157),ue=a(292),me=a(261),pe=a(295),be=a(296),fe=a(289),ve=function(e){var t=window.getComputedStyle(e);return Math.ceil(parseFloat(t.width))+Math.ceil(parseFloat(t.marginLeft))+Math.ceil(parseFloat(t.marginRight))},he=function(e,t,a){for(var n=a.length,r=e,o=t,i=o+1;i<n&&r-a[i]>0;i++)o=i,r-=a[i];return{navBarEndIndex:o,remainingWidth:r}},Ce=function(e,t,a){for(var n=e,r=t,o=t-1;o>0&&n-a[o]>0;o--)r=o,n-=a[o];return{navBarStartIndex:r,remainingWidth:n}},ge=function(e,t,a){return Math.ceil(e-t.navigationTabsTotalWidth-t.itemsWidths[a])},_e=function(e,t,a){var n=ge(e,t,a),r=Ce(n,a,t.itemsWidths),o=r.navBarStartIndex,i=r.remainingWidth;return{navBarStartIndex:o,navBarEndIndex:he(i,a,t.itemsWidths).navBarEndIndex}},ye=function(e,t,a){var n=ge(e,t,a),r=he(n,a,t.itemsWidths),o=r.navBarEndIndex,i=r.remainingWidth;return{navBarStartIndex:Ce(i,a,t.itemsWidths).navBarStartIndex,navBarEndIndex:o}},Ee=(a(260),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).containerRef=c.a.createRef(),a.width$=null,a.timeout=null,a.currentContainerWidth=-1,a.updateSource="external",a.elementsWidth={containerWidths:0,containerPadding:0,leftButtonWidth:0,itemsWidths:[],dropdownWidths:0,rightButtonWidth:0,navigationTabsTotalWidth:0,itemsTotalWidth:0},a.showAllItems=function(){return{showNavControls:!1,navBarStartIndex:0,containerIsHidden:!1,navBarEndIndex:a.props.tabs.length-1}},a.processResizeInfo=function(e){a.currentContainerWidth>e?a.onShrink(e):a.currentContainerWidth>0&&a.onExpand(e),a.currentContainerWidth=e},a.onExpand=function(e){if(e>=a.elementsWidth.itemsTotalWidth)a.setState(a.showAllItems());else{var t=a.props.activeTabIndex,n=ye(e,a.elementsWidth,t),r=n.navBarEndIndex,o=n.navBarStartIndex;a.setState({showNavControls:!0,navBarStartIndex:o,navBarEndIndex:r})}},a.onShrink=function(e){if(e>=a.elementsWidth.itemsTotalWidth)a.setState(a.showAllItems());else{var t=a.props.activeTabIndex,n=_e(e,a.elementsWidth,t),r=n.navBarEndIndex,o=n.navBarStartIndex;a.setState({showNavControls:!0,navBarStartIndex:o,navBarEndIndex:r})}},a.leftRightArrowClickHandler=function(e){var t,n,r=e.currentTarget.getAttribute("data-id"),o=a.props.activeTabIndex,i="leftArrow"===r?o-1:o+1;a.setElementsLayout(i),a.updateSource="internal",null===(t=(n=a.props).onActivate)||void 0===t||t.call(n,a.props.tabs[i][1],i)},a.setElementsLayout=function(e){var t=a.state,n=t.navBarStartIndex,r=t.navBarEndIndex;if(e<n){var o=ye(a.currentContainerWidth,a.elementsWidth,e),i=o.navBarEndIndex,l=o.navBarStartIndex;a.setState({navBarStartIndex:l,navBarEndIndex:i})}if(e>r){var s=_e(a.currentContainerWidth,a.elementsWidth,e),c=s.navBarEndIndex,d=s.navBarStartIndex;a.setState({navBarStartIndex:d,navBarEndIndex:c})}},a.onDropdownSelectHandler=function(e,t){if(e){var n,r,o=parseInt(e,10);a.setElementsLayout(o),a.updateSource="internal",null===(n=(r=a.props).onActivate)||void 0===n||n.call(r,a.props.tabs[o][1],o)}},a.onActivate=function(e){var t=e.currentTarget.getAttribute("data-id");if(t){var n,r,o=parseInt(t,10);a.updateSource="internal",null===(n=(r=a.props).onActivate)||void 0===n||n.call(r,a.props.tabs[o][1],o)}},a.state={showNavigationTabs:!0,navBarStartIndex:0,navBarEndIndex:a.props.tabs.length-1,showNavControls:!0,containerIsHidden:!0},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.width$=Object(me.fromEvent)(window,"resize").pipe(Object(ue.a)(70)).subscribe((function(){return e.processResizeInfo(window.innerWidth-e.elementsWidth.containerPadding)}));var t=this.containerRef.current;t&&(this.timeout=window.setTimeout((function(){e.elementsWidth=function(e){for(var t=e.children[0],a=ve(e)-14,n=ve(t.children[0]),r=[],o=0,i=t.children,l=i.length,s=1;s<l-2;s++){var c=ve(i[s]);o+=c,r.push(c)}var d=ve(t.children[l-2]),u=ve(t.children[l-1]);return{containerWidths:a,containerPadding:14,leftButtonWidth:n,itemsWidths:r,dropdownWidths:u,rightButtonWidth:d,navigationTabsTotalWidth:u+d+n,itemsTotalWidth:o}}(t),e.currentContainerWidth=e.elementsWidth.containerWidths-e.elementsWidth.containerPadding,e.setInitialElementsLayout(e.elementsWidth.containerWidths)}),100))}},{key:"setInitialElementsLayout",value:function(e){if(e>this.elementsWidth.itemsTotalWidth)this.setState(this.showAllItems());else{var t=this.props.activeTabIndex,a=ye(e,this.elementsWidth,t),n=a.navBarEndIndex,r=a.navBarStartIndex;this.setState({showNavControls:!0,containerIsHidden:!1,navBarStartIndex:r,navBarEndIndex:n})}}},{key:"componentDidUpdate",value:function(e){e.activeTabIndex!==this.props.activeTabIndex&&"external"===this.updateSource&&this.setElementsLayout(this.props.activeTabIndex),this.updateSource="external"}},{key:"render",value:function(){var e=this,t=this.props.activeTabIndex,a=this.state,n=a.showNavControls,r=a.navBarStartIndex,o=a.navBarEndIndex,i=a.containerIsHidden,l="navbar-container  ".concat(i?"hidden-navbar":"");return c.a.createElement("div",{className:"nav-bar-wrapper"},c.a.createElement(pe.a,{ref:this.containerRef,className:l,variant:"dark"},c.a.createElement(be.a,{className:"nav-tabs dark-tabs tabs-sm"},c.a.createElement(be.a.Link,{className:"nav-item",disabled:0===this.props.activeTabIndex,"data-id":"leftArrow",hidden:!n,onClick:this.leftRightArrowClickHandler},c.a.createElement("i",{className:"icon icon_chevron-down arrow-left","aria-hidden":"true"})),this.props.tabs.map((function(a,n){var i=Object(k.a)(a,1)[0];return c.a.createElement(be.a.Link,{active:n===t,hidden:n<r||n>o,key:i,"data-id":n,className:"nav-item menu-item",onClick:e.onActivate},i)})),c.a.createElement(be.a.Link,{className:"nav-item","data-id":"rightArrow",hidden:!n,onClick:this.leftRightArrowClickHandler,disabled:this.props.activeTabIndex===this.props.tabs.length-1},c.a.createElement("i",{className:"icon icon_chevron-down arrow-right","aria-hidden":"true"})),c.a.createElement(fe.a,{onSelect:this.onDropdownSelectHandler,hidden:!n,alignRight:!0,bsPrefix:"mc-nav-dropDown",title:"...",id:"nav-dropdown"},this.props.tabs.map((function(e,a){var n=Object(k.a)(e,1)[0];return c.a.createElement(fe.a.Item,{eventKey:a.toString(),className:a===t?"selected-nav-drop-down":"",key:n},n)}))))))}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.width$)||void 0===e||e.unsubscribe(),this.timeout&&window.clearTimeout(this.timeout)}}]),t}(c.a.Component));function Le(e){Object(g.a)().error(e)}Ee.whyDidYouRender=!0;var Ie=function(e){function t(e){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).call(this,e))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("notebook-container");e?e.addEventListener("aznb-error",Le):console.warn("HTMLElement with ID '".concat("notebook-container","' does not exist. Telemetry of aznb-error events will be turned off.")),this.props.activate(this.props.notebookUrl)}},{key:"componentDidUpdate",value:function(){this.props.activate(this.props.notebookUrl)}},{key:"componentWillUnmount",value:function(){var e=document.getElementById("notebook-container");e&&e.removeEventListener("aznb-error",Le)}},{key:"shouldComponentUpdate",value:function(e){return e.notebookUrl!==this.props.notebookUrl}},{key:"render",value:function(){return c.a.createElement("div",{id:"tab-content"},c.a.createElement("div",{className:"tab-pane fade show active",id:"notebook-container",role:"tabpanel"}))}}]),t}(c.a.Component);Ie.whyDidYouRender=!0;var ke=function(e){return!!e},xe=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).LessonData=void 0,a.TelemetryProvider=void 0,a.ActiveTabProvider=void 0,a.DisableAutoSave=!1,a.AzureNoteBookInstance=null,a.state={hasLoaded:!1,tabProps:{tabs:[],activeTabPath:"",activeTabIndex:0}},a.onActivate=a.onActivate.bind(Object(x.a)(a)),a.onActivateByIndex=a.onActivateByIndex.bind(Object(x.a)(a)),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"throwAsyncError",value:function(e,t){this.setState({errorMsg:t||e.message})}},{key:"componentDidMount",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,r,o,i,l,s=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ActiveTabProvider=new d.ActiveTabProvider(localStorage,(null===(t=window)||void 0===t?void 0:t.ipcRenderer)?d.MinecraftCommander.getInstance(window.ipcRenderer):new d.MockMinecraftCommander),this.TelemetryProvider=Object(g.a)(),a="",n={components:[]},e.prev=4,r=function(){var e=Object(b.a)(p.a.mark((function e(t,r){var o,i,l,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,o=performance.now(),e.next=4,r();case 4:i=e.sent,l=Math.trunc(performance.now()-o),s={id:a,timeElapsed:l},i&&(s.details=i),n.components.push(s);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),e.next=8,r("getLessonData",Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.props.getLessonData();case 2:s.LessonData=e.sent,(null===(t=s.LessonData)||void 0===t?void 0:t.disableUserSaves)&&(s.DisableAutoSave=!0,s.props.contentProvider.setContentSaveFlag(!1)),null===(a=s.TelemetryProvider)||void 0===a||a.setName("Everglade:".concat(s.LessonData.creatorName,":").concat(s.LessonData.title));case 5:case"end":return e.stop()}}),e)}))));case 8:return e.next=10,r("aznb::initalize",Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.props.azureNotebookLoader.initialize();case 2:case"end":return e.stop()}}),e)}))));case 10:return e.next=12,r("loadNotebooks",Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.load();case 2:return a=e.sent,s.setState({hasLoaded:!0,tabProps:a}),e.abrupt("return",{notebookCount:null===(t=a.tabs)||void 0===t?void 0:t.length});case 5:case"end":return e.stop()}}),e)}))));case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(4),i=e.t0,null===(o=this.TelemetryProvider)||void 0===o||o.error({component:a,message:i.message}),this.throwAsyncError(e.t0);case 19:return e.prev=19,null===(l=this.TelemetryProvider)||void 0===l||l.log(n),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[4,14,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNotebookPath",value:function(e){var t,a,n=this.props.params.language;return n&&((null===(t=this.LessonData)||void 0===t||null===(a=t.isLanguageSupported)||void 0===a?void 0:a.call(t,n,this.LessonData.additionalLanguages||[]))||"ps-PS"===n)?{default:!1,pathEn:this.props.params.rootNotebookPath+e+".ipynb",pathLoc:this.props.params.rootNotebookPath+this.props.params.language+"/"+e+".ipynb"}:{default:!0,pathEn:this.props.params.rootNotebookPath+e+".ipynb"}}},{key:"load",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,r,o,i,l,s,c,d,u,m,f,v,h,C,g,_,y,E=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.LessonData){e.next=34;break}return i=null===(a=this.ActiveTabProvider)||void 0===a?void 0:a.get(this.props.params.lessonJsonPath,null===(n=this.LessonData)||void 0===n||null===(r=n.activityTracker)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.activitySelectorObjective,(function(e){var a;E.state.hasLoaded&&(null===(a=E.state.tabProps)||void 0===a?void 0:a.tabs)&&e.activeTabIndex>0&&e.activeTabIndex<t.length&&E.onActivate(E.state.tabProps.tabs[e.activeTabIndex][1],e.activeTabIndex)})).then((function(e){return e||{activeTabIndex:0}})),l="",e.next=6,Promise.all(this.LessonData.pages.map(function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=E.getNotebookPath(t),e.prev=1,!0!==a.default){e.next=9;break}return e.next=5,E.props.contentProvider.get(a.pathEn,!0);case 5:s=e.sent,l=a.pathEn,e.next=23;break;case 9:return e.prev=9,e.next=12,E.props.contentProvider.get(a.pathLoc,!0);case 12:s=e.sent,l=a.pathLoc,e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(9),404!==e.t0.status){e.next=23;break}return e.next=21,E.props.contentProvider.get(a.pathEn,!0);case 21:s=e.sent,l=a.pathEn;case 23:return n=s.metadata,e.abrupt("return",[n.minecraft.page_name,l]);case 27:e.prev=27,e.t1=e.catch(1),E.throwAsyncError(e.t1,"Notebook could not be loaded from path: "+l);case 30:case"end":return e.stop()}}),e,null,[[1,27],[9,16]])})));return function(t){return e.apply(this,arguments)}}()));case 6:return e.t0=ke,c=e.sent.filter(e.t0),e.next=10,i;case 10:for(d=e.sent,u=!0,m=!1,f=void 0,e.prev=14,v=c[Symbol.iterator]();!(u=(h=v.next()).done);u=!0)C=Object(k.a)(h.value,2),g=C[0],_=C[1],t.push([g,_,!1]);e.next=22;break;case 18:e.prev=18,e.t1=e.catch(14),m=!0,f=e.t1;case 22:e.prev=22,e.prev=23,u||null==v.return||v.return();case 25:if(e.prev=25,!m){e.next=28;break}throw f;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return y=void 0!==d&&d.activeTabIndex>=0&&d.activeTabIndex<t.length?d.activeTabIndex:0,e.abrupt("return",{tabs:t,activeTabPath:c[y][1],activeTabIndex:y});case 34:throw new Error("Notebook Controller Loading failed: LessonData cant be empty.");case 35:case"end":return e.stop()}}),e,this,[[14,18,22,30],[23,,25,29]])})));return function(){return e.apply(this,arguments)}}()},{key:"onActivate",value:function(e,t){var a;this.DisableAutoSave||(null===(a=this.AzureNoteBookInstance)||void 0===a||a.save());var n=Object(y.a)({},this.state.tabProps);n.activeTabPath=e,n.activeTabIndex=t,this.setState({hasLoaded:!0,tabProps:n})}},{key:"onActivateByIndex",value:function(e){this.onActivate(this.getTabPathFromIndex(e),e)}},{key:"getTabPathFromIndex",value:function(e){for(var t="",a=0;a<this.state.tabProps.tabs.length;a++)e===a&&(t=this.state.tabProps.tabs[a][1]);return t}},{key:"render",value:function(){var e,t=this;if(this.state.errorMsg)throw new Error(this.state.errorMsg);return this.state.hasLoaded?(null===(e=this.TelemetryProvider)||void 0===e||e.setContext("loaded"),c.a.createElement(de.a,null,c.a.createElement(de.a.Header,null,c.a.createElement(Ee,{tabs:this.state.tabProps.tabs,activeTabPath:this.state.tabProps.activeTabPath,activeTabIndex:this.state.tabProps.activeTabIndex,onActivate:this.onActivate})),c.a.createElement(de.a.Body,null,c.a.createElement(Ie,{notebookUrl:this.state.tabProps.activeTabPath,activate:function(){var e=Object(b.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.azureNotebookLoader.loadComponent(a,t.DisableAutoSave);case 2:return t.AzureNoteBookInstance=e.sent,e.abrupt("return");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),c.a.createElement(ce,{previousButton:0==this.state.tabProps.activeTabIndex?void 0:{onClick:this.onActivateByIndex.bind(this,this.state.tabProps.activeTabIndex-1)},nextButton:this.state.tabProps.activeTabIndex==this.state.tabProps.tabs.length-1?void 0:{onClick:this.onActivateByIndex.bind(this,this.state.tabProps.activeTabIndex+1)}})))):c.a.createElement("span",{className:"page-loader"},c.a.createElement("img",null))}}]),t}(c.a.Component);xe.whyDidYouRender=!0;var we=a(194),Se=a.n(we),Oe=(a(280),{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",borderColor:"transparent",backgroundColor:"transparent",zIndex:1}});Se.a.setAppElement("#root");var Ne=function(e){function t(e){var a,r,l;return Object(n.a)(this,t),(l=Object(o.a)(this,Object(i.a)(t).call(this,e))).resetCallback=function(){l.setState({isOpen:!0})},l.onClickAccept=function(){l.props.aznbLoader.stopNotebookCode(),l.props.nbContentProvider.clear(!0),location.reload()},l.closeModal=function(){l.setState({isOpen:!1})},l.state={isOpen:!1},null===(a=window.ipcRenderer)||void 0===a||null===(r=a.registerResetCallback)||void 0===r||r.call(a,l.resetCallback),l}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentWillUnmount",value:function(){var e,t;null===(e=window.ipcRenderer)||void 0===e||null===(t=e.unregisterResetCallback)||void 0===t||t.call(e,this.resetCallback)}},{key:"render",value:function(){var e=Object(I.b)(this.props.t);return c.a.createElement(Se.a,{isOpen:this.state.isOpen,onRequestClose:this.closeModal,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!1,style:Oe,overlayClassName:"Overlay"},c.a.createElement("div",{className:"",tabIndex:-1,role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},c.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("h1",{"data-testid":"AznblpNewDiagTitle",className:"modal-title",id:"exampleModalLabel"},e("AznblpResetDiagTitle")),c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.closeModal},c.a.createElement("i",{className:"icon icon_close","aria-hidden":"true"}))),c.a.createElement("div",{"data-testid":"AznblpNewDiagBody",className:" mcBackgroundN6-BHalf-2 modal-style-2 modal-body"},e("AznblpResetDiagBody"),c.a.createElement("div",{className:"modal-body-button-stack"},c.a.createElement("button",{"data-testid":"AznblpNewDiagContButton",type:"button",className:"__ButtonGrey",onClick:this.onClickAccept},e("AznblpNewDiagContButton")),c.a.createElement("button",{"data-testid":"AznblpNewDiagCancelButton",type:"button",className:"__ButtonGrey",onClick:this.closeModal},e("AznblpNewDiagCancelButton"))))))))}}]),t}(c.a.Component);Ne.whyDidYouRender=!0;var Pe=Object(u.a)()(Ne),Be=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).aznbTranslations=void 0,a.locale=void 0;var r=Object(I.b)(a.props.t);return a.aznbTranslations={AznbbErrorPrefix:r("AznbbErrorPrefix"),AznbbErrorRun:r("AznbbErrorRun"),AznbbErrorUnexpected:r("AznbbErrorUnexpected"),AznbbReadOnly:r("AznbbReadOnly"),AznbbResetCode:r("AznbbResetCode"),AznbbResetWorld:r("AznbbResetWorld"),AznbbRun:r("AznbbRun"),AznbbRunCancelled:r("AznbbRunCancelled"),AznbbRunInProcess:r("AznbbRunInProcess"),AznbbRunSuccessful:r("AznbbRunSuccessful"),AznbbStop:r("AznbbStop"),AznbbLibraries:r("AznbbLibraries")},a.locale=r("Locale"),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.parameters,t=new d.NotebookContentProvider(localStorage),a=new _(this.aznbTranslations,this.locale);return c.a.createElement(c.a.Fragment,null,c.a.createElement(xe,{getLessonData:function(){return function(e,t){return L.apply(this,arguments)}(e.lessonJsonPath,e.disableLessonDataCache)},azureNotebookLoader:a,contentProvider:t,params:e}),c.a.createElement(Pe,{nbContentProvider:t,aznbLoader:a}))}}]),t}(c.a.Component);Be.whyDidYouRender=!0;t.default=Object(u.a)()(Be)},98:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeListenerIds=t.MetadataNamespace=t.MyComputeProtocol=t.ExtensionName=void 0,t.ExtensionName="minecraft",t.MyComputeProtocol="minecraft-ipc",t.MetadataNamespace="minecraft",function(e){e.onCodeStartedCommand="onCodeStartedCommand",e.onCodeStoppedCommand="onCodeStoppedCommand",e.onCodeCancelledCommand="onCodeCancelledCommand",e.onCodeSuccessfulCommand="onCodeSuccessfulCommand",e.onCodeErrorCommand="onCodeErrorCommand"}(t.CodeListenerIds||(t.CodeListenerIds={}))}}]);
//# sourceMappingURL=az-notebook.4fe8b54d.chunk.js.map